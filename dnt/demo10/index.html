<!DOCTYPE html>
<html>
    <head>
        <title>Particle Word</title>
    <link rel="shortcut icon" href="../img/dang.ico" type="image/x-icon"/>
    </head>
<body>
    <div style="margin:0 auto;width:630px;">
        <canvas style="border-bottom: #222222 15px solid; border-left: #222222 15px solid; background-color: #111111; color: #cccccc; border-top: #222222 15px solid; border-right: #222222 15px solid" id="myCanvas" width="600" height="400"></canvas>
    </div>
       <script>
           (function (window) { var Vector2 = function (x, y) { this.x = x || 0; this.y = y || 0 }; Vector2.prototype = { set: function (x, y) { this.x = x; this.y = y; return this }, sub: function (v) { return new Vector2(this.x - v.x, this.y - v.y) }, multiplyScalar: function (s) { this.x *= s; this.y *= s; return this }, divideScalar: function (s) { if (s) { this.x /= s; this.y /= s } else { this.set(0, 0) }; return this }, length: function () { return Math.sqrt(this.lengthSq()) }, normalize: function () { return this.divideScalar(this.length()) }, lengthSq: function () { return this.x * this.x + this.y * this.y }, distanceToSquared: function (v) { var dx = this.x - v.x, dy = this.y - v.y; return dx * dx + dy * dy }, distanceTo: function (v) { return Math.sqrt(this.distanceToSquared(v)) }, setLength: function (l) { return this.normalize().multiplyScalar(l) } }; window.Vector2 = Vector2 }(window)); (function (window) { var Ball = function (r, v, p, cp) { this.radius = r; this.velocity = v; this.position = p; this.collectionPosition = cp }; Ball.prototype = { collection: function (v) { this.velocity = this.collectionPosition.sub(this.position).setLength(v) }, disband: function () { this.velocity = new Vector2(MathHelp.getRandomNumber(-230, 230), MathHelp.getRandomNumber(-230, 230)) } }; window.Ball = Ball }(window)); (function (window) { var MathHelp = function () { }; MathHelp.getRandomNumber = function (min, max) { return (min + Math.floor(Math.random() * (max - min + 1))) }; window.MathHelp = MathHelp }(window)); canvas = document.getElementById("myCanvas"); cxt = canvas.getContext("2d"); var ps = [], balls = []; function init(tex) { balls.length = 0; ps.length = 0; cxt.clearRect(0, 0, canvas.width, canvas.height); cxt.fillStyle = "rgba(0,0,0,1)"; cxt.fillRect(0, 0, canvas.width, canvas.height); cxt.fillStyle = "rgba(255,255,255,1)"; cxt.font = "bolder 115px 宋体"; cxt.textBaseline = 'top'; cxt.fillText(tex, 20, 20); for (y = 1; y < 200; y += 6) { for (x = 1; x < canvas.width; x += 6) { imageData = cxt.getImageData(20 + x, 20 + y, 1, 1); if (imageData.data[0] > 170) { ps.push({ px: 20 + x, py: 20 + y }) } } }; cxt.fillStyle = "rgba(0,0,0,1)"; cxt.fillRect(20, 20, canvas.width, canvas.height); for (var i in ps) { var ball = new Ball(2, new Vector2(0, 0), new Vector2(ps[i].px, ps[i].py), new Vector2(ps[i].px, ps[i].py)); balls.push(ball) }; cxt.fillStyle = "#fff"; for (i in balls) { cxt.beginPath(); cxt.arc(balls[i].position.x, balls[i].position.y, balls[i].radius, 0, Math.PI * 2, true); cxt.closePath(); cxt.fill() }; for (var i in balls) { balls[i].disband() } }; var time = 0; var cyc = 15; var a = 80; var collectionCMD = false; init("当耐特"); setInterval(function () { cxt.fillStyle = "rgba(0, 0, 0, .3)"; cxt.fillRect(0, 0, canvas.width, canvas.height); cxt.fillStyle = "#fff"; time += cyc; for (var i in balls) { if (collectionCMD === true && balls[i].position.distanceTo(balls[i].collectionPosition) < 2) { balls[i].velocity.y = 0; balls[i].velocity.x = 0 } }; if (time === 3000) { collectionCMD = true; for (var i in balls) { balls[i].collection(230) } }; if (time === 7500) { time = 0; collectionCMD = false; for (var i in balls) { balls[i].disband() } }; for (var i in balls) { cxt.beginPath(); cxt.arc(balls[i].position.x, balls[i].position.y, balls[i].radius, 0, Math.PI * 2, true); cxt.closePath(); cxt.fill(); if (balls[i].radius + balls[i].position.x > canvas.width) { balls[i].position.x = canvas.width - balls[i].radius; balls[i].velocity.x *= -1 }; if (balls[i].position.x < balls[i].radius) { balls[i].position.x = balls[i].radius; balls[i].velocity.x *= -1 }; if (balls[i].radius + balls[i].position.y > canvas.height) { balls[i].position.y = canvas.height - balls[i].radius; balls[i].velocity.y *= -1 }; if (balls[i].position.y < balls[i].radius) { balls[i].position.y = balls[i].radius; balls[i].velocity.y *= -1 }; balls[i].position.y += balls[i].velocity.y * cyc / 1000; balls[i].position.x += balls[i].velocity.x * cyc / 1000 } }, 15);
                         </script>

    <div style="text-align:center;">
       <p>@2013-2113 create by <a href="http://weibo.com/iamleizhang" target="_blank">当耐特</a></p>     
    </div>
</body>
</html>
