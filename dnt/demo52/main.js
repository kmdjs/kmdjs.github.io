!function(){var e=!1,n=/xyz/.test(function(){})?/\b_super\b/:/.*/,i=function(){};i.extend=function(t){function i(){!e&&this.ctor&&this.ctor.apply(this,arguments)}var a,r,o,s=this.prototype;e=!0,a=new this,e=!1;for(o in t)"statics"!=o&&(a[o]="function"==typeof t[o]&&"function"==typeof s[o]&&n.test(t[o])?function(t,e){return function(){var i,n=this._super;return this._super=s[t],i=e.apply(this,arguments),this._super=n,i}}(o,t[o]):t[o]);for(r in this)this.hasOwnProperty(r)&&"extend"!=r&&(i[r]=this[r]);if(i.prototype=a,t.statics)for(o in t.statics)t.statics.hasOwnProperty(o)&&(i[o]=t.statics[o],"ctor"==o&&i[o]());return i.prototype.constructor=i,i.extend=arguments.callee,i.implement=function(t){for(var e in t)a[e]=t[e]},i},function(){var t={};t.UI={};var e={};t.DisplayObject=i.extend({ctor:function(){this.alpha=this.scaleX=this.scaleY=1,this.x=this.y=this.rotation=this.regX=this.regY=this.skewX=this.skewY=0,this.visible=!0,this._matrix=new t.Matrix2D,this.events={},this.id=t.UID.get()},isVisible:function(){return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY)},updateContext:function(t){var e=this._matrix.identity().appendTransform(this.x,this.y,this.scaleX,this.scaleY,this.rotation,this.skewX,this.skewY,this.regX,this.regY);t.transform(e.a,e.b,e.c,e.d,e.tx,e.ty),t.globalAlpha*=this.alpha},on:function(e,n){["mouseover","mousemove","mouseout","touchstart","touchmove","touchend"].join("_").match(e)&&(t.Stage.checkMove=!0),this.events[e]||(this.events[e]=[]),this.events[e].push(n)},execEvent:function(t){var e=this.events[t];this._fireFns(e)},hover:function(t,e){this.on("mouseover",t),this.on("mouseout",e)},_fireFns:function(t){if(t)for(var e=0,n=t.length;n>e;e++)t[e].call(this)},clone:function(){var e=new t.DisplayObject;return this.cloneProps(e),e},cloneProps:function(t){t.visible=this.visible,t.alpha=this.alpha,t.regX=this.regX,t.regY=this.regY,t.rotation=this.rotation,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.skewX=this.skewX,t.skewY=this.skewY,t.x=this.x,t.y=this.y}}),t.Shape=t.DisplayObject.extend({ctor:function(){this._super(),this.cmds=[],this.assMethod=["fillStyle","strokeStyle","lineWidth"]},draw:function(t){for(var e=0,n=this.cmds.length;n>e;e++){var i=this.cmds[e];this.assMethod.join("-").match(new RegExp("\\b"+i[0]+"\\b","g"))?t[i[0]]=i[1][0]:t[i[0]].apply(t,Array.prototype.slice.call(i[1]))}},beginPath:function(){return this.cmds.push(["beginPath",arguments]),this},arc:function(){return this.cmds.push(["arc",arguments]),this},closePath:function(){return this.cmds.push(["closePath",arguments]),this},fillStyle:function(){return this.cmds.push(["fillStyle",arguments]),this},fill:function(){return this.cmds.push(["fill",arguments]),this},strokeStyle:function(){return this.cmds.push(["strokeStyle",arguments]),this},lineWidth:function(){return this.cmds.push(["lineWidth",arguments]),this},stroke:function(){return this.cmds.push(["stroke",arguments]),this},moveTo:function(){return this.cmds.push(["moveTo",arguments]),this},lineTo:function(){return this.cmds.push(["lineTo",arguments]),this},bezierCurveTo:function(){return this.cmds.push(["bezierCurveTo",arguments]),this},clone:function(){}}),e.Main=i.extend({ctor:function(){e.Game.init()}}),e.Data=i.extend({statics:{ctor:function(){function r(){try{return i in e&&e[i]}catch(t){return!1}}function l(e){return function(){var n=Array.prototype.slice.call(arguments,0);n.unshift(a),o.appendChild(a),a.addBehavior("#default#userData"),a.load(i);var s=e.apply(t,n);return o.removeChild(a),s}}function f(t){return t.replace(/^d/,"___$&").replace(u,"___")}var a,t={},e=window,n=e.document,i="localStorage",s="script";if(t.disabled=!1,t.set=function(){},t.get=function(){},t.remove=function(){},t.clear=function(){},t.transact=function(e,n,i){var s=t.get(e);null==i&&(i=n,n=null),"undefined"==typeof s&&(s=n||{}),i(s),t.set(e,s)},t.getAll=function(){},t.forEach=function(){},t.serialize=function(t){return JSON.stringify(t)},t.deserialize=function(t){if("string"!=typeof t)return void 0;try{return JSON.parse(t)}catch(e){return t||void 0}},r())a=e[i],t.set=function(e,n){return void 0===n?t.remove(e):(a.setItem(e,t.serialize(n)),n)},t.get=function(e){return t.deserialize(a.getItem(e))},t.remove=function(t){a.removeItem(t)},t.clear=function(){a.clear()},t.getAll=function(){var e={};return t.forEach(function(t,n){e[t]=n}),e},t.forEach=function(e){for(var n=0;n<a.length;n++){var i=a.key(n);e(i,t.get(i))}};else if(n.documentElement.addBehavior){var o,h;try{h=new ActiveXObject("htmlfile"),h.open(),h.write("<"+s+">document.w=window</"+s+'><iframe src="/favicon.ico"></iframe>'),h.close(),o=h.w.frames[0].document,a=o.createElement("div")}catch(c){a=n.createElement("div"),o=n.body}var u=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");t.set=l(function(e,n,s){return n=f(n),void 0===s?t.remove(n):(e.setAttribute(n,t.serialize(s)),e.save(i),s)}),t.get=l(function(e,n){return n=f(n),t.deserialize(e.getAttribute(n))}),t.remove=l(function(t,e){e=f(e),t.removeAttribute(e),t.save(i)}),t.clear=l(function(t){var e=t.XMLDocument.documentElement.attributes;t.load(i);for(var s,n=0;s=e[n];n++)t.removeAttribute(s.name);t.save(i)}),t.getAll=function(){var n={};return t.forEach(function(t,e){n[t]=e}),n},t.forEach=l(function(e,n){for(var a,i=e.XMLDocument.documentElement.attributes,s=0;a=i[s];++s)n(a.name,t.deserialize(e.getAttribute(a.name)))})}try{var d="__storejs__";t.set(d,d),t.get(d)!=d&&(t.disabled=!0),t.remove(d)}catch(c){t.disabled=!0}t.enabled=!t.disabled,this.store=t}}}),t.Container=t.DisplayObject.extend({ctor:function(){this._super(),this.children=[],this.InstanceOfName="Container"},draw:function(t){for(var e=0,n=this.children.length;n>e;e++){var i=this.children[e];i.isVisible()&&(t.save(),i.updateContext(t),i.draw(t),t.restore())}},add:function(t){var e=arguments.length;if(e>1)for(var n=0;e>n;n++){var i=arguments[n];i&&(this.children.push(i),i.parent=this)}else t&&(this.children.push(t),t.parent=this)},remove:function(t){var e=arguments.length,n=this.children.length;if(e>1){for(var i=0;e>i;i++)for(var s=arguments[i],a=n;--a>=0;)if(this.children[a].id==s.id){s.parent=null,this.children.splice(a,1);break}}else for(var r=n;--r>=0;)if(this.children[r].id==t.id){t.parent=null,this.children.splice(r,1);break}},_getHitChild:function(t,e,n,i){var s=this.children.length;t.clearRect(0,0,2,2);for(var a=s-1;a>=0;a--){var r=this.children[a];if(r.x-=e,r.y-=n,t.save(),r.updateContext(t),"Container"==r.InstanceOfName?r._hitDraw(t,i):r.draw(t),t.restore(),r.x+=e,r.y+=n,t.getImageData(0,0,1,1).data[3]>1)return r.execEvent(i),r}},_hitDraw:function(t,e){for(var n=this.children.length;--n>=0;){var i=this.children[n];if(i.isVisible()&&(t.save(),i.updateContext(t),"Container"==i.InstanceOfName?i._hitDraw(t,e):i.draw(t),t.restore(),t.getImageData(0,0,1,1).data[3]>1)){i.execEvent(e);break}}},clone:function(){var e=new t.Container;this.cloneProps(e);for(var n=e.children=[],i=this.children.length-1;i>-1;i--){var s=this.children[i].clone();n.unshift(s)}return e},removeAll:function(){for(var t=this.children;t.length;)t.pop().parent=null}}),e.MainPanel=t.Container.extend({statics:{init:function(){e.Game.mp=new e.MainPanel,e.Game.Stage.add(e.Game.mp)},fade:function(){e.Game.mp.visible=!1}},ctor:function(){this._super();var n=new t.Txt("Start","bold 22px Arial","#F6626E");n.regX=26,n.regY=10;var i=new t.Container,s=new t.UI.ShapeButton(new t.Shape.Circle(58,"#AcE5C2"),n);s.x=160,s.y=180,s.scaleX=s.scaleY=0;var a=new t.Txt("About","bold 22px Arial","#F6626E");a.regX=30,a.regY=12;var r=new t.UI.ShapeButton(new t.Shape.Circle(48,"#AcE5C2"),a);r.scaleX=r.scaleY=0,r.x=160,r.y=300,r.on("click",function(){alert("powered by kmdjs")}),new t.TWEEN.Tween(s).to({scaleX:1,scaleY:1},1e3).easing(t.TWEEN.Easing.Elastic.Out).onComplete(function(){}).start(),new t.TWEEN.Tween(r).delay(200).to({scaleX:1,scaleY:1},1e3).easing(t.TWEEN.Easing.Elastic.Out).onComplete(function(){}).start(),this.levBtns=[];var o=this;s.on("click",function(){new t.TWEEN.Tween(s).to({x:160,y:240},500).easing(t.TWEEN.Easing.Elastic.Out).start(),new t.TWEEN.Tween(r).to({x:160,y:240},500).easing(t.TWEEN.Easing.Elastic.Out).onComplete(function(){s.visible=!1,r.visible=!1}).start();for(var n=0;9>n;n++){var a=new t.Txt(n+1,"bold 30px Arial","#F6626E");a.regX=9,a.regY=16;var h;e.Game.level>n?(h=new t.UI.ShapeButton(new t.Shape.Circle(28,"#AcE5C2"),a),h.on("click",function(){t.TWEEN.removeAll();for(var n=0,i=o.levBtns.length;i>n;n++){var s=o.levBtns[n].x-500;new t.TWEEN.Tween(o.levBtns[n]).to({x:s},500+100*n).easing(t.TWEEN.Easing.Back.InOut).onComplete(function(){}).start()}(new t.TWEEN.Tween).onComplete(function(){e.Game.gotoGamePanel()}).start()})):h=new t.UI.ShapeButton(new t.Shape.Circle(28,"#cccccc"),a),h.x=160,h.y=240,o.levBtns.push(h);var c=n%3,l=Math.floor(n/3);new t.TWEEN.Tween(h).delay(500).to({x:100*c+70,y:140*l+80},2e3+200*n).easing(t.TWEEN.Easing.Elastic.Out).start(),i.add(h)}}),s.on("mousedown",function(){}),this.add(i,r,s)}}),e.GamePanel=t.Container.extend({statics:{init:function(){e.Game.gp=new e.GamePanel,e.Game.Stage.add(e.Game.gp)}},ctor:function(){this._super(),this.smallBalls=[],this.width=e.Game.Stage.canvas.width,this.height=e.Game.Stage.canvas.height;var n=new t.Shape.Circle(28,"#F6626E");n.x=160,n.y=-300,this.add(n);var i=this;this.start=!1,new t.TWEEN.Tween(n).to({y:240},1500).easing(t.TWEEN.Easing.Elastic.Out).onComplete(function(){n.visible=!1,i.createBalls(5),i.start=!0}).start(),i.myBall=new e.Ball(160,400,15,"#AcE5C2"),i.initEvent(),e.Game.Stage.add(i.myBall)},createBalls:function(t){for(var n=0;t>n;n++){var i=new e.SmallBall(160,240,5,3,e.Util.randomColor());e.Game.Stage.add(i),this.smallBalls.push(i)}},gameover:function(){this.isGameover=!0,e.Game.Stage.remove(this.myBall);for(var n=0;35>n;n++){var i=new e.SmallBall(this.myBall.x,this.myBall.y,2,2,"#AcE5C2");this.smallBalls.push(i),e.Game.Stage.add(i)}var s=new t.Shape.Circle(100,"#AcE5C2"),a=new t.Txt("Game Over","bold 22px Arial","#F6626E");a.regX=58,a.regY=41;var r=new t.Container;r.add(s),r.add(a),e.Game.Stage.add(r),r.scaleX=r.scaleY=0,r.x=160,r.y=240;var o=new t.Txt("Retry","bold 22px Arial","#AcE5C2");o.regX=22,o.regY=11;var h=new t.UI.ShapeButton(new t.Shape.Circle(34,"#F6626E"),o);h.x=-40,h.y=40;var c=new t.Txt("Back","bold 22px Arial","#AcE5C2");c.regY=11,c.regX=22;var l=new t.UI.ShapeButton(new t.Shape.Circle(34,"#F6626E"),c),u=this;h.on("click",function(){new t.TWEEN.Tween(r).to({scaleX:0,scaleY:0},300).onComplete(function(){u.reset()}).start()}),l.on("click",function(){new t.TWEEN.Tween(r).to({scaleX:0,scaleY:0},300).onComplete(function(){e.Game.Stage.removeAll(),e.MainPanel.init()}).start()}),l.x=40,l.y=40,r.add(h,l),new t.TWEEN.Tween(r).to({scaleX:1,scaleY:1},2500).easing(t.TWEEN.Easing.Elastic.Out).onComplete(function(){}).start()},tick:function(){if(this.start){for(var t=0,e=this.smallBalls.length;e>t;t++)this.smallBalls[t].tick();this.isGameover||this.checkCollision()}},initEvent:function(){var t=this;e.Game.Stage.canvas.addEventListener("mousemove",function(n){var i=n.pageX-e.Game.Stage.offset[0],s=n.pageY-e.Game.Stage.offset[1];t.myBall.x=i+t.myBall.r>t.width?t.width-t.myBall.r:i-t.myBall.r<0?t.myBall.r:i,t.myBall.y=s+t.myBall.r>t.height?t.height-t.myBall.r:s-t.myBall.r<0?t.myBall.r:s},!1)},checkCollision:function(){var t=new e.Vector2(this.myBall.x,this.myBall.y),n=this;e.Util.each(this.smallBalls,function(i){t.distanceToSquared(new e.Vector2(i.x,i.y))<Math.pow(n.myBall.r+i.r,2)&&n.gameover()})},reset:function(){e.Game.Stage.removeAll(),e.GamePanel.init()}}),t.Stage=t.Container.extend({statics:{checkMove:!1},ctor:function(t){this._super(),this.canvas="string"==typeof t?document.querySelector(t):t,this.ctx=this.canvas.getContext("2d"),this.width=this.canvas.width,this.height=this.canvas.height,this.scale=1,this.scaleCanvasOffset={x:0,y:0},this.hitCanvas=document.createElement("canvas"),this.hitCanvas.width=1,this.hitCanvas.height=1,this.hitCtx=this.hitCanvas.getContext("2d"),Function.prototype.bind=function(){var t=this,e=Array.prototype.slice.call(arguments),n=e.shift();return function(){return t.apply(n,e.concat(Array.prototype.slice.call(arguments)))}},this.canvas.addEventListener("click",this._handleClick.bind(this),!1),this.canvas.addEventListener("mousemove",this._handleMouseMove.bind(this),!1),this.canvas.addEventListener("mousedown",this._handleMouseDown.bind(this),!1),this.canvas.addEventListener("mouseup",this._handleMouseUp.bind(this),!1),this.offset=this._getXY(this.canvas),this.overObj=null,this.InstanceOfName="Stage"},update:function(){this.ctx.clearRect(0,0,this.width,this.height),this.draw(this.ctx)},_handleClick:function(t){this._getHitChild(this.hitCtx,t.pageX-this.offset[0],t.pageY-this.offset[1],"click")},_handleMouseMove:function(e){var n=e.pageX-this.offset[0],i=e.pageY-this.offset[1];if(this.canScale&&this.isMouseDown){var s=n-this.prePosition[0],a=i-this.prePosition[1],r=this.scaleCanvasOffset.x,o=this.scaleCanvasOffset.y;this.scaleCanvasOffset.x+=s,this.scaleCanvasOffset.y+=a,this.redraw(this.scaleCanvasOffset.x,this.scaleCanvasOffset.y,this.scale,r,o),this.prePosition[0]=n,this.prePosition[1]=i}if(t.Stage.checkMove){var h=this._getHitChild(this.hitCtx,n,i);h?this.overObj?h.id!=this.overObj.id?(this.overObj.execEvent("mouseout"),h.execEvent("mouseover"),this.overObj=h):h.execEvent("mousemove"):(this.overObj=h,h.execEvent("mouseover")):this.overObj&&(this.overObj.execEvent("mouseout"),this.overObj=null)}},scalable:function(){this.canScale=!0;var t=this;Wheel.Hamster(this.canvas).wheel(function(e,n,i,s){var a=e.pageX-t.offset[0],r=e.pageY-t.offset[1],o=t.width*t.scale,h=t.height*t.scale,c=(a-t.scaleCanvasOffset.x)/o,l=(r-t.scaleCanvasOffset.y)/h,u=t.scaleCanvasOffset.x,f=t.scaleCanvasOffset.y;if(0>s){if(t.scale-=.1,t.scale<.1)return void(t.scale=.1);t.scaleCanvasOffset.x+=.1*t.width*c,t.scaleCanvasOffset.y+=.1*t.height*l}else t.scale+=.1,t.scaleCanvasOffset.x-=.1*t.width*c,t.scaleCanvasOffset.y-=.1*t.height*l;t.redraw(t.scaleCanvasOffset.x,t.scaleCanvasOffset.y,0>s?t.scale+.1:t.scale-.1,u,f),e.preventDefault()})},redraw:function(t,e,n,i,s){for(var a=0,r=this.children.length;r>a;a++){var o=this.children[a];o.x=this.scale*(o.x-i)/n+t,o.y=this.scale*(o.y-s)/n+e,o.scaleX=this.scale*o.scaleX/n,o.scaleY=this.scale*o.scaleY/n}this.update()},_handleMouseDown:function(t){var e=t.pageX-this.offset[0],n=t.pageY-this.offset[1];this.canScale&&(this.canvas.style.cursor="move",this.prePosition=[e,n],this.isMouseDown=!0);this._getHitChild(this.hitCtx,e,n,"mousedown")},_handleMouseUp:function(t){this.canScale&&(this.canvas.style.cursor="default",this.isMouseDown=!1);this._getHitChild(this.hitCtx,t.pageX-this.offset[0],t.pageY-this.offset[1],"mouseup")},_getXY:function(t){var e=0,n=0;if(t)if(document.documentElement.getBoundingClientRect&&t.getBoundingClientRect){var i={left:0,top:0,right:0,bottom:0};try{i=t.getBoundingClientRect(),n=i.left,e=i.top}catch(s){return alert(1),[0,0]}}else for(;t.offsetParent;)e+=t.offsetTop,n+=t.offsetLeft,t=t.offsetParent;return[n+Math.max(document.documentElement.scrollLeft,document.body.scrollLeft),e+Math.max(document.documentElement.scrollTop,document.body.scrollTop)]}}),t.Matrix2D=i.extend({statics:{DEG_TO_RAD:.017453292519943295},ctor:function(t,e,n,i,s,a){return this.a=null==t?1:t,this.b=e||0,this.c=n||0,this.d=null==i?1:i,this.tx=s||0,this.ty=a||0,this},identity:function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},appendTransform:function(e,n,i,s,a,r,o,h,c){if(a%360)var l=a*t.Matrix2D.DEG_TO_RAD,u=Math.cos(l),f=Math.sin(l);else u=1,f=0;return r||o?(r*=t.Matrix2D.DEG_TO_RAD,o*=t.Matrix2D.DEG_TO_RAD,this.append(Math.cos(o),Math.sin(o),-Math.sin(r),Math.cos(r),e,n),this.append(u*i,f*i,-f*s,u*s,0,0)):this.append(u*i,f*i,-f*s,u*s,e,n),(h||c)&&(this.tx-=h*this.a+c*this.c,this.ty-=h*this.b+c*this.d),this},append:function(t,e,n,i,s,a){var r=this.a,o=this.b,h=this.c,c=this.d;return this.a=t*r+e*h,this.b=t*o+e*c,this.c=n*r+i*h,this.d=n*o+i*c,this.tx=s*r+a*h+this.tx,this.ty=s*o+a*c+this.ty,this}}),t.Txt=t.DisplayObject.extend({ctor:function(t,e,n){this._super(),this.text=t,this.font=e,this.color=n,this.textAlign="left",this.textBaseline="top"},draw:function(t){t.fillStyle=this.color,t.font=this.font,t.textAlign=this.textAlign||"left",t.textBaseline=this.textBaseline||"top",t.fillText(this.text,0,0)},clone:function(){var e=new t.Txt(this.text,this.font,this.color);return this.cloneProps(e),e}}),t.Bitmap=t.DisplayObject.extend({ctor:function(t){this._super(),this.img=t},draw:function(t){t.drawImage(this.img,0,0)}}),t.Loader=i.extend({ctor:function(){this.audios={},this.res={},this.loadedCount=0,this.resCount=-1,this.FILE_PATTERN=/(\w+:\/{2})?((?:\w+\.){2}\w+)?(\/?[\S]+\/|\/)?([\w\-%\.]+)(?:\.)(\w+)?(\?\S+)?/i,this.ns=3,this.sounds=[];for(var t=0;t<this.ns;t++)this.sounds.push([]);this.playing=[],this.soundsCount=0},get:function(t){return this.res[t]},loadRes:function(t){this.resCount=t.length;for(var e=0;e<t.length;e++)"audio"==this._getTypeByExtension(t[e].src.match(this.FILE_PATTERN)[5])?this.loadAudio(t[e].id,t[e].src):this.loadImage(t[e].id,t[e].src)},loadImage:function(t,e){var n=document.createElement("img"),i=this;n.onload=function(){i._handleLoad(this,t),n.onreadystatechange=null},n.onreadystatechange=function(){("loaded"==n.readyState||"complete"==n.readyState)&&(i._handleLoad(this,t),n.onload=null)},n.onerror=function(){},n.src=e},loadAudio:function(t,e){var n=document.createElement("audio");n.autoplay=!1,this.res[t]=n,n.src=null,n.preload="auto",n.onerror=function(){},n.onstalled=function(){};var i=this,s=function(){i.playing[t]=0;for(var n=0;n<i.ns;n++)i.sounds[n][t]=new Audio(e);i.loadedCount++,i.handleProgress(i.loadedCount,i.resCount),i._clean(this),this.removeEventListener&&this.removeEventListener("canplaythrough",s,!1),i.checkComplete()};n.addEventListener("canplaythrough",s,!1),n.src=e,null!=n.load&&n.load()},checkComplete:function(){this.loadedCount===this.resCount&&this.handleComplete()},complete:function(t){this.handleComplete=t},progress:function(t){this.handleProgress=t},playSound:function(t){this.sounds[this.playing[t]][t].play(),++this.playing[t],this.playing[t]>=this.ns&&(this.playing[t]=0)},_handleLoad:function(t,e){this._clean(t),this.res[e]=t,this.loadedCount++,this.handleProgress&&this.handleProgress(this.loadedCount,this.resCount),this.checkComplete()},_getTypeByExtension:function(t){switch(t){case"jpeg":case"jpg":case"gif":case"png":case"webp":case"bmp":return"img";case"ogg":case"mp3":case"wav":return"audio"}},_clean:function(t){t.onload=null,t.onstalled=null,t.onprogress=null,t.onerror=null}}),t.TWEEN=i.extend({statics:{ctor:function(){void 0===Date.now&&(Date.now=function(){return(new Date).valueOf()}),this._tweens=[]},REVISION:"14",getAll:function(){return this._tweens},removeAll:function(){this._tweens=[]},add:function(t){this._tweens.push(t)},remove:function(t){var e=this._tweens.indexOf(t);-1!==e&&this._tweens.splice(e,1)},update:function(t){if(0===this._tweens.length)return!1;var e=0;for(t=void 0!==t?t:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():Date.now();e<this._tweens.length;)this._tweens[e].update(t)?e++:this._tweens.splice(e,1);return!0},Tween:function(e){var n=e,i={},s={},a={},r=1e3,o=0,h=!1,c=!1,l=!1,u=0,f=null,d=t.TWEEN.Easing.Linear.None,m=t.TWEEN.Interpolation.Linear,v=[],p=null,w=!1,g=null,y=null,E=null;for(var x in e)i[x]=parseFloat(e[x],10);this.to=function(t,e){return void 0!==e&&(r=e),s=t,this},this.start=function(e){t.TWEEN.add(this),c=!0,w=!1,f=void 0!==e?e:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():Date.now(),f+=u;for(var r in s){if(s[r]instanceof Array){if(0===s[r].length)continue;s[r]=[n[r]].concat(s[r])}i[r]=n[r],i[r]instanceof Array==!1&&(i[r]*=1),a[r]=i[r]||0}return this},this.stop=function(){return c?(t.TWEEN.remove(this),c=!1,null!==E&&E.call(n),this.stopChainedTweens(),this):this},this.stopChainedTweens=function(){for(var t=0,e=v.length;e>t;t++)v[t].stop()},this.delay=function(t){return u=t,this},this.repeat=function(t){return o=t,this},this.yoyo=function(t){return h=t,this},this.easing=function(t){return d=t,this},this.interpolation=function(t){return m=t,this},this.chain=function(){return v=arguments,this},this.onStart=function(t){return p=t,this},this.onUpdate=function(t){return g=t,this},this.onComplete=function(t){return y=t,this},this.onStop=function(t){return E=t,this},this.update=function(t){var e;if(f>t)return!0;w===!1&&(null!==p&&p.call(n),w=!0);var c=(t-f)/r;c=c>1?1:c;var E=d(c);for(e in s){var x=i[e]||0,C=s[e];C instanceof Array?n[e]=m(C,E):("string"==typeof C&&(C=x+parseFloat(C,10)),"number"==typeof C&&(n[e]=x+(C-x)*E))}if(null!==g&&g.call(n,E),1==c){if(o>0){isFinite(o)&&o--;for(e in a){if("string"==typeof s[e]&&(a[e]=a[e]+parseFloat(s[e],10)),h){var b=a[e];a[e]=s[e],s[e]=b}i[e]=a[e]}return h&&(l=!l),f=t+u,!0}null!==y&&y.call(n);for(var _=0,M=v.length;M>_;_++)v[_].start(t);return!1}return!0}},Easing:{Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){var e,n=.1,i=.4;return 0===t?0:1===t?1:(!n||1>n?(n=1,e=i/4):e=i*Math.asin(1/n)/(2*Math.PI),-(n*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/i)))},Out:function(t){var e,n=.1,i=.4;return 0===t?0:1===t?1:(!n||1>n?(n=1,e=i/4):e=i*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*t)*Math.sin(2*(t-e)*Math.PI/i)+1)},InOut:function(t){var e,n=.1,i=.4;return 0===t?0:1===t?1:(!n||1>n?(n=1,e=i/4):e=i*Math.asin(1/n)/(2*Math.PI),(t*=2)<1?-.5*n*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/i):n*Math.pow(2,-10*(t-=1))*Math.sin(2*(t-e)*Math.PI/i)*.5+1)}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?.5*t*t*((e+1)*t-e):.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(e){return 1-t.TWEEN.Easing.Bounce.Out(1-e)},Out:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(e){return.5>e?.5*t.TWEEN.Easing.Bounce.In(2*e):.5*t.TWEEN.Easing.Bounce.Out(2*e-1)+.5}}},Interpolation:{Linear:function(e,n){var i=e.length-1,s=i*n,a=Math.floor(s),r=t.TWEEN.Interpolation.Utils.Linear;return 0>n?r(e[0],e[1],s):n>1?r(e[i],e[i-1],i-s):r(e[a],e[a+1>i?i:a+1],s-a)},Bezier:function(e,n){var o,i=0,s=e.length-1,a=Math.pow,r=t.TWEEN.Interpolation.Utils.Bernstein;for(o=0;s>=o;o++)i+=a(1-n,s-o)*a(n,o)*e[o]*r(s,o);return i},CatmullRom:function(e,n){var i=e.length-1,s=i*n,a=Math.floor(s),r=t.TWEEN.Interpolation.Utils.CatmullRom;return e[0]===e[i]?(0>n&&(a=Math.floor(s=i*(1+n))),r(e[(a-1+i)%i],e[a],e[(a+1)%i],e[(a+2)%i],s-a)):0>n?e[0]-(r(e[0],e[0],e[1],e[1],-s)-e[0]):n>1?e[i]-(r(e[i],e[i],e[i-1],e[i-1],s-i)-e[i]):r(e[a?a-1:0],e[a],e[a+1>i?i:a+1],e[a+2>i?i:a+2],s-a)},Utils:{Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(e,n){var i=t.TWEEN.Interpolation.Utils.Factorial;return i(e)/i(n)/i(e-n)},Factorial:function(t){var n,e=1;if(a[t])return a[t];for(n=t;n>1;n--)e*=n;return a[t]=e},CatmullRom:function(t,e,n,i,s){var a=.5*(n-t),r=.5*(i-e),o=s*s,h=s*o;return(2*e-2*n+a+r)*h+(-3*e+3*n-2*a-r)*o+a*s+e}}}}}),t.Sprite=t.DisplayObject.extend({ctor:function(e){this._super(),this.option=e,this.currentFrameIndex=0,this.animationFrameIndex=0,this.currentAnimation="walk",this._rect=[0,0,10,10],this.img=this.option.imgs[0];var n=this;this.loop=t.RAF.requestInterval(function(){var t=n.option,e=t.animations[n.currentAnimation].frames,i=e.length;n.animationFrameIndex++,n.animationFrameIndex>i-1&&(n.animationFrameIndex=0),n._rect=t.frames[e[n.animationFrameIndex]],n._rect.length>4&&(n.img=t.imgs[n._rect[4]])},1e3/this.option.framerate)},draw:function(t){t.drawImage(this.img,this._rect[0],this._rect[1],this._rect[2],this._rect[3],0,0,this._rect[2],this._rect[3])}}),t.RAF=i.extend({statics:{ctor:function(){var t=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}(),e=function(e,n){function a(){var r=(new Date).getTime(),o=r-i;o>=n&&(e.call(),i=(new Date).getTime()),s.value=t(a)}if(!(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame&&window.mozCancelRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame))return window.setInterval(e,n);var i=(new Date).getTime(),s=new Object;return s.value=t(a),s},n=function(t){window.cancelAnimationFrame?window.cancelAnimationFrame(t.value):window.webkitCancelAnimationFrame?window.webkitCancelAnimationFrame(t.value):window.webkitCancelRequestAnimationFrame?window.webkitCancelRequestAnimationFrame(t.value):window.mozCancelRequestAnimationFrame?window.mozCancelRequestAnimationFrame(t.value):window.oCancelRequestAnimationFrame?window.oCancelRequestAnimationFrame(t.value):window.msCancelRequestAnimationFrame?window.msCancelRequestAnimationFrame(t.value):clearInterval(t)};this.requestInterval=e,this.clearRequestInterval=n}}}),t.UID=i.extend({statics:{_nextID:0,get:function(){return this._nextID++}}}),e.Vector2=i.extend({ctor:function(t,e){this.x=t||0,this.y=e||0},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n}}),t.Shape.Circle=t.DisplayObject.extend({ctor:function(t,e,n){this._super(),this.r=t||1,this.color=e||"black",this.isHollow=n},draw:function(t){t.beginPath(),t.arc(0,0,this.r,0,2*Math.PI),this.isHollow?(t.strokeStyle=this.color,t.stroke()):(t.fillStyle=this.color,t.fill())},clone:function(){var e=new t.Shape.Circle(this.r,this.color,this.isHollow);return this.cloneProps(e),e}}),e.Ball=t.Shape.Circle.extend({ctor:function(t,n,i,s){this._super(i,s),this.x=t,this.y=n,this.vx=e.Util.random(-4,4),this.vy=e.Util.random(-4,4)}}),e.Util=i.extend({statics:{randomColor:function(){var t=["F6626E"];return"#"+t[Math.floor(Math.random()*t.length)]},each:function(t,e){for(var n=t.length-1;n>-1;n--){e(t[n],n)}},random:function(t,e){return t+Math.floor(Math.random()*(e-t+1))}}}),e.Game=i.extend({statics:{init:function(){this.Stage=new t.Stage("#ourCanvas");var i=e.Data.store.get("level");i||e.Data.store.set("level",1),this.level=e.Data.store.get("level"),this.loop=setInterval(function(){e.Game.tick()},15),e.MainPanel.init()},tick:function(){e.Game.gp&&e.Game.gp.tick(),this.Stage.update(),t.TWEEN.update()},gotoGamePanel:function(){e.MainPanel.fade(),e.GamePanel.init()}}}),e.SmallBall=t.Shape.Circle.extend({ctor:function(t,n,i,s,a){this._super(i,a),this.x=t,this.y=n;var r=e.Util.random(0,360)*Math.PI/180;this.vx=s*Math.sin(r),this.vy=s*Math.cos(r)},tick:function(){this.x+=this.vx,this.y+=this.vy,(this.x<this.r||this.x+this.r>e.Game.Stage.canvas.width)&&(this.vx*=-1),(this.y<this.r||this.y+this.r>e.Game.Stage.canvas.height)&&(this.vy*=-1)}}),t.UI.Button=t.Container.extend({ctor:function(t,e,n,i){this._super(),this.up=t,this.down=e,this.over=n,this.disable=i,this.down.visible=!1,this.over&&(this.over.visible=!1),this.add(this.up,this.down,this.over,this.disable),this.on("mousedown",function(){this.down.visible=!0,this.up.visible=!1,this.over&&(this.over.visible=!1)}),this.on("mouseup",function(){this.down.visible=!1,this.up.visible=!0,this.over&&(this.over.visible=!1)}),this.over&&this.hover(function(){this.down.visible=!1,this.up.visible=!1,this.over.visible=!0},function(){this.down.visible=!1,this.up.visible=!0,this.over.visible=!1})}}),t.UI.ShapeButton=t.UI.Button.extend({ctor:function(e,n){var i=new t.Container;i.add(e,n);var s=i.clone();s.x++,s.y++;var a=i.clone();a.x--,a.y--,this._super(i,s,a)}}),new e.Main}()}(this);