<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
</head>
<body>
        
     <img src="img/apple2.png" style="display:none;" />
    <div style="text-align:center;">
    <canvas id="myCanvas" width="578" height="500" style="border:1px solid #ccc;"></canvas>
        
        </div>
    <div style="text-align:center;">
               <div> created by <a href="http://weibo.com/iamleizhang">当耐特</a>   </div>
        </div>
    <script>
        !function () { var n = !1, e = /xyz/.test(function () { }) ? /\b_super\b/ : /.*/, i = function () { }; i.extend = function (t) { function i() { !n && this.ctor && this.ctor.apply(this, arguments) } var r, a, p, o = this.prototype; n = !0, r = new this, n = !1; for (p in t) "statics" != p && (r[p] = "function" == typeof t[p] && "function" == typeof o[p] && e.test(t[p]) ? function (t, n) { return function () { var i, e = this._super; return this._super = o[t], i = n.apply(this, arguments), this._super = e, i } }(p, t[p]) : t[p]); for (a in this) this.hasOwnProperty(a) && "extend" != a && (i[a] = this[a]); if (i.prototype = r, t.statics) for (p in t.statics) t.statics.hasOwnProperty(p) && (i[p] = t.statics[p], "ctor" == p && i[p]()); return i.prototype.constructor = i, i.extend = arguments.callee, i.implement = function (t) { for (var n in t) r[n] = t[n] }, i }, function () { var t = {}; t.Main = i.extend({ ctor: function () { window.onload = function () { function a(t) { t.x = t.x * e / Math.abs(i.z - t.z), t.y = t.y * e / Math.abs(i.z - t.z) } function p(t, n) { var e = t.p1.x, i = t.p1.y, o = t.p2.x, r = t.p2.y, a = t.p3.x, p = t.p3.y, y = n.p1.x, s = n.p1.y, x = n.p2.x, c = n.p2.y, h = n.p3.x, u = n.p3.y, f = ((y - x) * (i - p) - (y - h) * (i - r)) / ((e - o) * (i - p) - (e - a) * (i - r)), l = ((y - x) * (e - a) - (y - h) * (e - o)) / ((i - r) * (e - a) - (i - p) * (e - o)), v = y - f * e - l * i, m = ((s - c) * (i - p) - (s - u) * (i - r)) / ((e - o) * (i - p) - (e - a) * (i - r)), z = ((s - c) * (e - a) - (s - u) * (e - o)) / ((i - r) * (e - a) - (i - p) * (e - o)), M = s - m * e - z * i; return [f, m, l, z, v, M] } function y(t, n, e) { var n = n * Math.PI / 180; if ("y" == e) { var i = t.x * Math.cos(n) + t.z * Math.sin(n), o = t.z * Math.cos(n) - t.x * Math.sin(n); return { x: i, y: t.y, z: o } } if ("x" == e) { var r = t.z * Math.sin(n) + t.y * Math.cos(n), o = t.z * Math.cos(n) - t.y * Math.sin(n); return { x: t.x, y: r, z: o } } if ("z" == e) { var i = t.y * Math.sin(n) + t.x * Math.cos(n), r = t.y * Math.cos(n) - t.x * Math.sin(n); return { x: i, y: r, z: t.z } } } var t = document.getElementById("myCanvas"), n = t.getContext("2d"), e = 400, i = { x: 0, y: 0, z: 400 }, o = { p1: { x: -64, y: -64, z: 0 }, p2: { x: 64, y: -64, z: 0 }, p3: { x: 64, y: 64, z: 0 }, p4: { x: -64, y: 64, z: 0 } }; n.translate(t.width / 2, t.height / 2), n.beginPath(), n.moveTo(o.p1.x, o.p1.y), n.lineTo(o.p2.x, o.p2.y), n.lineTo(o.p3.x, o.p3.y), n.closePath(), n.stroke(); var r = 1; setInterval(function () { n.clearRect(-1 * t.width / 2, -1 * t.height / 2, t.width, t.height); var e = y(o.p1, r, "y"), i = y(o.p2, r, "y"), s = y(o.p3, r, "y"), x = y(o.p4, r, "y"); r++, a(e), a(i), a(s), a(x); var c = p(o, { p1: { x: e.x, y: e.y }, p2: { x: i.x, y: i.y }, p3: { x: s.x, y: s.y } }), h = p({ p1: o.p1, p2: o.p3, p3: o.p4 }, { p1: { x: e.x, y: e.y }, p2: { x: s.x, y: s.y }, p3: { x: x.x, y: x.y } }); n.save(), n.beginPath(), n.moveTo(e.x, e.y), n.lineTo(i.x, i.y), n.lineTo(s.x, s.y), n.closePath(), n.clip(), n.transform.apply(n, c), n.drawImage(document.querySelector("img"), -64, -64), n.restore(), n.save(), n.beginPath(), n.moveTo(e.x, e.y), n.lineTo(s.x, s.y), n.lineTo(x.x, x.y), n.closePath(), n.clip(), n.transform.apply(n, h), n.drawImage(document.querySelector("img"), -64, -64), n.restore() }, 15) } } }), new t.Main }() }(this);
    </script>
</body>
</html>
