function update(){bh.show($("#opts input")[0].value,$("#opts input")[1].value,$("#opts input")[2].value,$("#opts input")[3].value)}var fdSlider=function(){function tt(n){function fu(n){n=!!n,n!=g&&(g=n,lt(bt()))}function hr(n){if(!kt||n){try{t(v,"focus",lr),t(v,"blur",ar),h?t(v,"keypress",ei):(t(v,"keydown",ei),t(v,"keypress",vr)),t(a,"mouseover",yr),t(a,"mouseout",pr),t(a,"mousedown",ni),t(a,"touchstart",ni),l&&(window.addEventListener&&!window.devicePixelRatio?window.removeEventListener("DOMMouseScroll",st,!1):(t(document,"mousewheel",st),t(window,"mousewheel",st)))}catch(i){}clearTimeout(rt),u(a,"fd-slider-focused"),u(a,"fd-slider-active"),f(a,"fd-slider-disabled"),a.setAttribute("aria-disabled",!0),r.disabled=kt=!0,n||ut("disable")}}function cr(n){(kt||n)&&(i(v,"focus",lr),i(v,"blur",ar),h?i(v,"keypress",ei):(i(v,"keydown",ei),i(v,"keypress",vr)),i(a,"touchstart",ni),i(a,"mousedown",ni),i(a,"mouseover",yr),i(a,"mouseout",pr),u(a,"fd-slider-disabled"),a.setAttribute("aria-disabled",!1),r.disabled=kt=pt=!1,n||ut("enable"))}function eu(){clearTimeout(rt),gt=ct=v=a=rt=null,ut("destroy"),li=null}function fi(){br();try{var n=a.offsetWidth,t=a.offsetHeight,i=v.offsetWidth,u=v.offsetHeight,e=ct.offsetHeight,o=ct.offsetWidth,f=y?t-u:n-i;ft=f/gi,yt=Math.max(it?di(ki(w)):Math.abs((w-nt)/d)*ft,0),vt=Math.min(it?di(ki(k)):Math.abs((k-nt)/d)*ft,Math.floor(y?t-u:n-i)),ur=n,rr=t,lt(ht||tr?bt():tt=="select"?r.selectedIndex:parseFloat(r.value))}catch(s){}ut("redraw")}function ut(n){var u,i,f,t;if(ht){if(n.match(/^(blur|focus|change)$/i))if(typeof document.createEventObject!="undefined")try{t=document.createEventObject(),r.fireEvent("on"+n.toLowerCase(),t)}catch(e){}else typeof document.createEvent!="undefined"&&(t=document.createEvent("HTMLEvents"),t.initEvent(n,!0,!0),r.dispatchEvent(t))}else if(li.hasOwnProperty(n))for(u={disabled:kt,elem:r,value:tt=="select"?r.options[r.selectedIndex].value:r.value},i=0;f=li[n][i];i++)f.call(r,u)}function lr(){return f(a,"fd-slider-focused"),o.onfocus&&(g=!0,lt(bt())),l&&(i(window,"DOMMouseScroll",st),i(document,"mousewheel",st),h||i(window,"mousewheel",st)),ut("focus"),!0}function ar(){u(a,"fd-slider-focused"),l&&(t(document,"mousewheel",st),t(window,"DOMMouseScroll",st),h||t(window,"mousewheel",st)),ot=!0,ut("blur")}function st(n){var t,i;if(ot)return n=n||window.event,t=0,n.wheelDelta?(t=n.wheelDelta/120,h&&window.opera.version()<9.2&&(t=-t)):n.detail&&(t=-n.detail/3),y&&(t=-t),t&&(i=bt(),i+=t<0?-d:d,g=!0,lt(ri(i))),e(n)}function vr(n){return(n=n||window.event,n.keyCode>=33&&n.keyCode<=40||!ot||n.keyCode==45||n.keyCode==46)?e(n):!0}function ei(n){var t,i;if(!ot||(n=n||window.event,t=n.keyCode!=null?n.keyCode:n.charCode,t<33||t>40&&t!=45&&t!=46))return!0;i=bt(),t==37||t==40||t==46||t==34?i-=n.ctrlKey||t==34?+ui:+d:t==39||t==38||t==45||t==33?i+=n.ctrlKey||t==33?+ui:+d:t==35?i=k:t==36&&(i=w),g=!0,lt(ri(i)),ut("update"),c(n)}function yr(){f(a,"fd-slider-hover")}function pr(){u(a,"fd-slider-hover")}function ni(n){var u;if(n=n||window.event,c(n),n.target?u=n.target:n.srcElement&&(u=n.srcElement),u.nodeType==3&&(u=u.parentNode),n.touches){if(n.targetTouches&&n.targetTouches.length!=1)return!1;n=n.touches[0],pt=!0}if(clearTimeout(rt),rt=null,ot=!1,g=!0,u.className.search("fd-slider-handle")!=-1)pi=y?n.clientY:n.clientX,sr=parseInt(y?v.offsetTop:v.offsetLeft)||0,ti(n),pt?(i(document,"touchmove",ti),i(document,"touchend",oi),t(a,"mousedown",ni)):(i(document,"mousemove",ti),i(document,"mouseup",oi)),f(a,"fd-slider-active"),f(document.body,"fd-slider-drag-"+(y?"vertical":"horizontal"));else{br();var r=0,o=0,s=0;document.documentElement&&document.documentElement.scrollTop?(s=document.documentElement.scrollTop,o=document.documentElement.scrollLeft):document.body&&(s=document.body.scrollTop,o=document.body.scrollLeft),n.pageX?r=y?n.pageY:n.pageX:n.clientX&&(r=y?n.clientY+s:n.clientX+o),r-=y?or+Math.round(v.offsetHeight/2):er+Math.round(v.offsetWidth/2),r=bi(r),nr=="tween"?(f(a,"fd-slider-active"),ou(r)):nr=="timed"?(f(a,"fd-slider-active"),i(document,pt?"touchend":"mouseup",wr),dt=r,kr()):hi(r)}return e(n)}function wr(n){return n=n||window.event,c(n),t(document,pt?"touchend":"mouseup",wr),u(a,"fd-slider-active"),clearTimeout(rt),rt=null,ot=!0,e(n)}function oi(n){return n=n||window.event,c(n),pt?(t(document,"touchmove",ti),t(document,"touchend",oi)):(t(document,"mousemove",ti),t(document,"mouseup",oi)),ot=!0,u(document.body,"fd-slider-drag-"+(y?"vertical":"horizontal")),u(a,"fd-slider-active"),e(n)}function ti(n){if(n=n||window.event,c(n),n.touches){if(n.targetTouches&&n.targetTouches.length!=1)return!1;n=n.touches[0]}return hi(bi(sr+(y?n.clientY-pi:n.clientX-pi))),!1}function ii(n){var t=bt();g=!0,t+=n*d,lt(ri(t))}function br(){var t=0,i=0,n=a;try{while(n.offsetParent)t+=n.offsetLeft,i+=n.offsetTop,n=n.offsetParent}catch(r){}er=t,or=i}function kr(){var n=parseInt(y?v.offsetTop:v.offsetLeft,10);n=Math.round(dt<n?Math.max(dt,Math.floor(n-ft)):Math.min(dt,Math.ceil(n+ft))),hi(bi(n)),n!=dt?rt=setTimeout(kr,gi>20?50:100):(ot=!0,u(a,"fd-slider-active"),ut("finalise"))}function ou(n){ot=!1,ai=parseInt(n,10),vi=parseInt(y?v.offsetTop:v.offsetLeft,10),fr=ai-vi,uu=20,yi=0,rt||(rt=setTimeout(wi,20))}function si(n){return isNaN(n)||n===""||typeof n=="undefined"?(g=!1,at):n<Math.min(w,k)?(g=!1,Math.min(w,k)):n>Math.max(w,k)?(g=!1,Math.max(w,k)):(g=!0,n)}function bt(){return ri(tt=="input"?parseFloat(r.value):r.selectedIndex)}function ri(n){return isNaN(n)||n===""||typeof n=="undefined"?at:Math.min(Math.max(n,Math.min(w,k)),Math.max(w,k))}function hi(n){var t=ri(it?su(hu(n)):y?et-Math.round(n/ft)*d:nt+Math.round(n/ft)*d);v.style[y?"top":"left"]=(n||0)+"px",gr(),dr(tt=="select"||d==1?Math.round(t):t)}function lt(n){var i=!1,t;typeof n!="undefined"&&!isNaN(n)&&n!==""||tt!="input"||ht||tr?t=si(n):(t=at,i=!0,g=!1),v.style[y?"top":"left"]=(it?di(ki(t)):y?Math.round((et-t)/d*ft):Math.round((t-nt)/d*ft))+"px",gr(),dr(i?"":t)}function bi(n){if(it)return Math.max(Math.min(vt,n),yt);var t=n%ft;return t&&t>=ft/2?n+=ft-t:n-=t,n<Math.min(Math.abs(yt),Math.abs(vt))?n=Math.min(Math.abs(yt),Math.abs(vt)):n>Math.max(Math.abs(yt),Math.abs(vt))&&(n=Math.max(Math.abs(yt),Math.abs(vt))),Math.min(Math.max(n,0),vt)}function su(n){var i=0,r=nt,u,t;for(t in it)it.hasOwnProperty(t)&&(n>=i&&n<=+t&&(u=r+(n-i)*(+it[t]-r)/(+t-i)),i=+t,r=+it[t]);return u}function ki(n){var r=0,i=nt,u=0,t;for(t in it)it.hasOwnProperty(t)&&(n>=i&&n<=+it[t]&&(u=r+(n-i)*(+t-r)/(+it[t]-i)),r=+t,i=+it[t]);return u}function di(n){return(a[y?"offsetHeight":"offsetWidth"]-v[y?"offsetHeight":"offsetWidth"])/100*n}function hu(n){return n/((a[y?"offsetHeight":"offsetWidth"]-a[v?"offsetHeight":"offsetWidth"])/100)}function dr(n){if(ut("update"),g?u(a,"fd-slider-no-value"):f(a,"fd-slider-no-value"),tt=="select")try{if(n=parseInt(n,10),r.selectedIndex===n)return;r.options[n].selected=!0}catch(t){}else{if(n!=""&&(n=(nt+Math.round((n-nt)/d)*d).toFixed(tu)),r.value===n)return;r.value=n}ci(),ut("change")}function cu(n,t){w>k?(n=Math.min(nt,Math.max(n,t)),t=Math.max(et,Math.min(n,t)),w=Math.max(n,t),k=Math.min(n,t)):(n=Math.max(nt,Math.min(n,t)),t=Math.min(et,Math.max(n,t)),w=Math.min(n,t),k=Math.max(n,t)),at<Math.min(w,k)?at=Math.min(w,k):at>Math.max(w,k)&&(at=Math.max(w,k)),v.setAttribute("aria-valuemin",w),v.setAttribute("aria-valuemax",k),si(tt=="input"?parseFloat(r.value):r.selectedIndex),fi()}function gr(){s||(y?wt.style.height=ct.offsetHeight-v.offsetTop+"px":wt.style.width=v.offsetLeft+"px")}function lu(){for(var n=!1,u=document.getElementsByTagName("label"),t,i=0;t=u[i];i++)if(t.htmlFor&&t.htmlFor==r.id||t.getAttribute("for")==r.id){n=t;break}return n&&!n.id&&(n.id=r.id+"_label"),n}function ci(){v.setAttribute("aria-valuenow",tt=="select"?r.options[r.selectedIndex].value:r.value),v.setAttribute("aria-valuetext",tt=="select"?r.options[r.selectedIndex].text?r.options[r.selectedIndex].text:r.options[r.selectedIndex].value:r.value)}function au(){g=!0,lt(tt=="input"?parseFloat(r.value):r.selectedIndex),ci()}function fu(n){g=!!n}var r=n.inp,kt=!1,tt=r.tagName.toLowerCase(),nt=+n.min,et=+n.max,w=+n.min,k=+n.max,nu=Math.abs(et-nt),d=tt=="select"?1:+n.step,ui=n.maxStep?+n.maxStep:d*2,tu=n.precision||0,gi=Math.ceil(nu/d),it=n.scale||!1,iu=!!n.hideInput,nr=n.animation||"",y=!!n.vertical,li=n.callbacks||{},ru=n.classNames||"",ht=!!n.html5Shim,at=et<nt?nt:nt+(et-nt)/2,tr=ht||!!n.forceValue,ir=ht&&y&&"inpHeight"in n?n.inpHeight:!1,rt=null,ot=!0,rr=0,ur=0,ai=0,vi=0,fr=0,uu=0,yi=0,er=0,or=0,vt=0,yt=0,sr=0,dt=0,pi=0,ft=0,g=!1,pt=!1,a,gt,v,wt,ct,wi;return et<nt&&(d=-Math.abs(d),ui=-Math.abs(ui)),it&&(it[100]=et),wi=function(){yi++;var i=fr,n=20,t=yi,r=vi,f=Math.ceil(t==n?r+i:i*(-Math.pow(2,-10*t/n)+1)+r);hi(t==n?ai:f),t!=n?(ut("move"),rt=setTimeout(wi,20)):(clearTimeout(rt),rt=null,ot=!0,u(a,"fd-slider-focused"),u(a,"fd-slider-active"),ut("finalise"))},function(){ht||iu?f(r,"fd-form-element-hidden"):i(r,"change",au),ht&&(r.stepUp=function(n){ii(n||1)},r.stepDown=function(n){ii(n||-1)}),a=document.createElement("span"),a.className="fd-slider"+(y?"-vertical ":" ")+(ht?"":" fd-slider-no-value ")+ru,a.id="fd-slider-"+r.id,y&&ir&&(a.style.height=ir+"px"),gt=document.createElement("span"),gt.className="fd-slider-inner",ct=document.createElement("span"),ct.className="fd-slider-bar",s||(wt=document.createElement("span"),wt.className="fd-slider-range"),b?(v=document.createElement("span"),v.tabIndex=0):(v=document.createElement("a"),v.setAttribute("href","#")),v.className="fd-slider-handle",v.appendChild(document.createTextNode(String.fromCharCode(160))),a.appendChild(gt),s||a.appendChild(wt),a.appendChild(ct),a.appendChild(v),r.parentNode.insertBefore(a,r);/*@cc_on@if(@_win32)v.unselectable="on",s||(wt.unselectable="on"),ct.unselectable="on",gt.unselectable="on",a.unselectable="on";@end@*/a.setAttribute("role","application"),v.setAttribute("role","slider"),v.setAttribute("aria-valuemin",tt=="select"?r.options[0].value:nt),v.setAttribute("aria-valuemax",tt=="select"?r.options[r.options.length-1].value:et);var n=lu();if(n){v.setAttribute("aria-labelledby",n.id),v.id="fd-slider-handle-"+r.id;/*@if(@_win32)n.setAttribute("htmlFor",v.id);@else@*/n.setAttribute("for",v.id);/*@end@*/}document.getElementById(p)&&v.setAttribute("aria-describedby",p),r.getAttribute("disabled")==!0?hr(!0):cr(!0),o.onvalue&&(g=!0,si(tt=="input"?parseFloat(r.value):r.selectedIndex)),ci(),ut("create"),fi()}(),{onResize:function(){(a.offsetHeight!=rr||a.offsetWidth!=ur)&&fi()},destroy:function(){eu()},reset:function(){lt(tt=="input"?parseFloat(r.value):r.selectedIndex)},stepUp:function(n){ii(Math.abs(n)||1)},stepDown:function(n){ii(-Math.abs(n)||-1)},increment:function(n){ii(n)},disable:function(){hr()},enable:function(){cr()},setRange:function(n,t){cu(n,t)},getValueSet:function(){return!!g},setValueSet:function(n){fu(n)},ieCheckValue:function(){o.onvalue&&(g=!0,si(tt=="input"?parseFloat(r.value):r.selectedIndex),ci(),fi())}}}var n={},it=0,l=!0,b=!0,p="fd-slider-describedby",o={onfocus:!0,onvalue:!0},s=!1,k="jump",h=Object.prototype.toString.call(window.opera)==="[object Opera]",a=/^([-]{0,1}[0-9]+(\.[0-9]+){0,1})$/,w=/^([0-9]+(\.[0-9]+){0,1})$/,rt=function(n){if(typeof n!="string"||n=="")return{};try{if(typeof JSON=="object"&&JSON.parse)return window.JSON.parse(n);if(/mousewheelenabled|fullaria|describedby|norangebar|html5animation|varsetrules/.test(n.toLowerCase())){var t=Function(["var document,top,self,window,parent,Number,Date,Object,Function,","Array,String,Math,RegExp,Image,ActiveXObject;","return (",n.replace(/<\!--.+-->/gim,"").replace(/\bfunction\b/g,"function-"),");"].join(""));return t()}}catch(i){}return{err:"Could not parse the JSON object"}},d=function(n){if(typeof n=="object")for(key in n){value=n[key];switch(key.toLowerCase()){case"mousewheelenabled":l=!!value;break;case"fullaria":b=!!value;break;case"describedby":p=String(value);break;case"norangebar":s=!!value;break;case"html5animation":k=String(value).search(/^(jump|tween|timed)$/i)!=-1?String(value).toLowerCase():"jump";break;case"varsetrules":"onfocus"in value&&(o.onfocus=!!value.onfocus),"onvalue"in value&&(o.onvalue=!!value.onvalue)}}},i=function(n,t,i){n.attachEvent?(n["e"+t+i]=i,n[t+i]=function(){n["e"+t+i](window.event)},n.attachEvent("on"+t,n[t+i])):n.addEventListener(t,i,!0)},t=function(n,t,i){try{n.detachEvent?(n.detachEvent("on"+t,n[t+i]),n[t+i]=null):n.removeEventListener(t,i,!0)}catch(r){}},e=function(n){n=n||window.event,n.stopPropagation&&(n.stopPropagation(),n.preventDefault());/*@if(@_win32)n.cancelBubble=!0,n.returnValue=!1;@end@*/return!1},c=function(n){if(n=n||window.event,n.preventDefault){n.preventDefault();return}n.returnValue=!1},f=function(n,t){new RegExp("(^|\\s)"+t+"(\\s|$)").test(n.className)||(n.className+=(n.className?" ":"")+t)},u=function(n,t){n.className=t?n.className.replace(new RegExp("(^|\\s)"+t+"(\\s|$)")," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""):""},ut=function(){var t={};for(id in n)t[id]=n[id].getValueSet();return t},ft=function(t,i){t in n&&n[t].setValueSet(!!i)},et=function(t){if(!t||!t.inp||!t.inp.tagName||t.inp.tagName.search(/^input|select/i)==-1)return!1;if(t.html5Shim=!1,t.inp.tagName.toLowerCase()=="select"){if(t.inp.options.length<2)return!1;t.min=0,t.max=t.inp.options.length-1,t.step=1,t.precision=0,t.scale=!1,t.forceValue=!0}else{if(String(t.inp.type).search(/^text$/i)==-1)return!1;t.min=t.min&&String(t.min).search(a)!=-1?+t.min:0,t.max=t.max&&String(t.max).search(a)!=-1?+t.max:100,t.step=t.step&&String(t.step).search(w)!=-1?t.step:1,t.precision=t.precision&&String(t.precision).search(/^[0-9]+$/)!=-1?t.precision:String(t.step).search(/\.([0-9]+)$/)!=-1?String(t.step).match(/\.([0-9]+)$/)[1].length:0,t.scale=t.scale||!1,t.forceValue="forceValue"in t?!!t.forceValue:!1}return t.maxStep=t.maxStep&&String(t.maxStep).search(w)!=-1?+t.maxStep:+t.step*2,t.classNames=t.classNames||"",t.callbacks=t.callbacks||!1,y(t.inp.id),n[t.inp.id]=new tt(t),!0},r=function(n,t){return n.getAttribute(t)||""},v=function(){for(var f=document.getElementsByTagName("input"),i,t,u=0;t=f[u];u++)if(t.tagName.toLowerCase()=="input"&&t.type.toLowerCase()=="text"&&(r(t,"min")&&r(t,"min").search(a)!=-1||r(t,"max")&&r(t,"max").search(a)!=-1||r(t,"step")&&r(t,"step").search(/^(any|([0-9]+(\.[0-9]+){0,1}))$/i)!=-1)){if(t.id&&document.getElementById("fd-slider-"+t.id))continue;else t.id&&!document.getElementById("fd-slider-"+t.id)&&y(t.id);t.id||(t.id="fd-slider-form-elem-"+it++),i={inp:t,callbacks:[],animation:k,vertical:r(t,"data-fd-slider-vertical")?!0:!!(t.offsetHeight>t.offsetWidth),classNames:r(t,"data-fd-slider-vertical"),html5Shim:!0},i.vertical&&!r(t,"data-fd-slider-vertical")&&(i.inpHeight=t.offsetHeight),i.min=r(t,"min")||0,i.max=r(t,"max")||100,i.step=r(t,"step").search(/^any$/i)!=-1?i.max-i.min:r(t,"step").search(w)!=-1?t.getAttribute("step"):1,i.precision=String(i.step).search(/\.([0-9]+)$/)!=-1?String(i.step).match(/\.([0-9]+)$/)[1].length:0,i.maxStep=i.step*2,y(i.inp.id),n[i.inp.id]=new tt(i)}return!0},y=function(t){return t in n?(n[t].destroy(),delete n[t],!0):!1},g=function(){for(slider in n)n[slider].destroy();n=[]},ot=function(){g(),n=null},nt=function(){for(slider in n)n[slider].onResize()},st=function(){t(window,"load",v),v()},ht=function(){t(window,"load",v)};i(window,"load",v),i(window,"resize",nt),i(window,"unload",ot),function(){var t=document.getElementsByTagName("script"),i=String(t[t.length-1].innerHTML).replace(/[\n\r\s\t]+/g," ").replace(/^\s+/,"").replace(/\s+$/,""),n=rt(i);typeof n!="object"||"err"in n||d(n)}();/*@if(@_jscript_version<9)f(document.documentElement,"oldie");@end@*/return{createSlider:function(n){et(n)},destroyAll:function(){g()},destroySlider:function(n){return y(n)},redrawAll:function(){nt()},increment:function(t,i){if(!(t in n))return!1;n[t].increment(i)},stepUp:function(t,i){if(!(t in n))return!1;n[t].stepUp(Math.abs(i)||1)},stepDown:function(t,i){if(!(t in n))return!1;n[t].stepDown(-Math.abs(i)||-1)},setRange:function(t,i,r){if(!(t in n))return!1;n[t].setRange(i,r)},addEvent:i,removeEvent:t,stopEvent:e,updateSlider:function(t){if(!(t in n))return!1;n[t].reset()},onDomReady:function(){st()},disable:function(t){if(!(t in n))return!1;n[t].disable()},enable:function(t){if(!(t in n))return!1;n[t].enable()},getValueSet:function(){return ut()},setValueSet:function(n,t){ft(n,t)},setGlobalVariables:function(n){d(n)},removeOnload:function(){ht()}}}(),BurningHeart=function(){this.interval_id=null,this.palette=null,this.canvas=null,this.stop=function(){this.interval_id!==null&&clearInterval(this.interval_id)},this.show=function(n,t,i,r){var u,f,e,o,s;if(this.stop(),this.heartsize=n,this.palette===null)for(this.palette=[],u=0;u<64;u++)this.palette[u]=[u*4,0,0],this.palette[u+64]=[255,u*4,0],this.palette[u+128]=[255,255,u*4],this.palette[u+192]=[255,255,255];if(this.bg_color_r=0,this.bg_color_g=0,this.bg_color_b=0,this.bg_color_a=0,this.bg_color_string="rgba("+this.bg_color_r+","+this.bg_color_g+","+this.bg_color_b+","+this.bg_alpha+")",this.speed_msec=t||10,this.counter++,this.canvas=document.createElement("canvas"),this.canvas.getContext){f=this.canvas.getContext("2d"),f.font=this.font_string,this.canvas.width=this.heartsize*40,this.canvas.height=this.heartsize*40,this.fire_decay=i,this.image=f.getImageData(0,0,this.canvas.width,this.canvas.height),this.image_flame=f.getImageData(0,0,this.canvas.width,this.canvas.height),f.strokeStyle="#ffffff",f.lineWidth=r;var c=this.heartsize*20,l=this.heartsize*20,h=this,a=function(n){var t=n/Math.PI,i=h.heartsize*16*Math.pow(Math.sin(t),3),r=h.heartsize*(13*Math.cos(t)-5*Math.cos(2*t)-2*Math.cos(3*t)-Math.cos(4*t));return[i,r]};for(e=10;e<30;e+=.5)o=a(e),f.lineTo(c+o[0],l-o[1]),f.stroke();this.image_src=f.getImageData(0,0,this.canvas.width,this.canvas.height),f.putImageData(this.image,0,0),s=this,this.interval_id=setInterval(function(){s.burn()},this.speed_msec)}else el.innerHTML="Canvas element is not supported"},this.burn=function(){for(var h=this.canvas.getContext("2d"),f=this.canvas.width*this.canvas.height*4,t,n=0;n<f;n+=4)this.image_src.data[n]==255&&(this.image_flame.data[n]=Math.floor(Math.random()*256));for(t=this.canvas.width*4,n=0;n<f-t;n+=4){var o=n%t,c=this.image_flame.data[(o==0?n+t:n)-4],l=this.image_flame.data[(o==t-4?n-t:n)+4],s=this.image_flame.data[n+t],r=Math.floor((c+l+s+s)/4);r>0&&(r-=this.fire_decay),r<0&&(r=0),this.image_flame.data[n]=r}for(n=0;n<f;n+=4)if(this.image_flame.data[n]!=0){var u=this.image_flame.data[n],e=this.palette,i=1-u/85;i<0&&(i=0),i>this.bg_color_a&&(i=this.bg_color_a),this.image.data[n]=Math.min(255,e[u][0]+Math.floor(this.bg_color_r*i)),this.image.data[n+1]=Math.min(255,e[u][1]+Math.floor(this.bg_color_g*i)),this.image.data[n+2]=Math.min(255,e[u][2]+Math.floor(this.bg_color_b*i)),this.image.data[n+3]=Math.max(this.bg_color_a,Math.min(3*u,255))}else this.image.data[n]=this.bg_color_r,this.image.data[n+1]=this.bg_color_g,this.image.data[n+2]=this.bg_color_b,this.image.data[n+3]=this.bg_color_a;h.putImageData(this.image,0,0)}},bh=new BurningHeart,mainCanvas,mainCtx,params,hash;bh.show(6),mainCanvas=document.getElementById("mainCanvas"),mainCtx=mainCanvas.getContext("2d"),mainCtx.fillStyle="#FFC1C1",mainCtx.font="140px Georgia",mainCtx.textAlign="center",mainCtx.textBaseline="bottom",setInterval(function(){mainCtx.clearRect(0,0,mainCanvas.width,mainCanvas.height),mainCtx.fillText("L",200,200),mainCtx.fillText("V",400,200),mainCtx.fillText("E",500,200),mainCtx.drawImage(bh.canvas,210,30)},15),params={},hash=/^#\?(.*)/.exec(location.hash),hash&&($("#share").prop("checked",!0),$.each(hash[1].split(/&/),function(n,t){var i=t.split(/=/);params[i[0]]=i[i.length-1]})),$("#opts input[min], #opts select").each(function(){var n=params[this.name];n!==undefined&&(this.value=n),this.onchange=update})