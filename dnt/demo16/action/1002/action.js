try{objPage.AddJSOnce("jsCanvasHelper","action/CanvasHelper.js")}catch(e){}(function(e){var d,a,b,j="action/1002/";function h(){d=document.getElementById("canvasMove");a=new Stage(d);a.removeAllChildren();for(var o=new CanvasHelper(b),e=o.searchRects(),g=0;g<e.length;g++){var h=new Bitmap(b);f(h,e[g]);a.addChild(h);var n=(e[g][1].y+e[g][0].y)/2-80,m=(e[g][1].y+e[g][0].y)/2,k=h.x,l=0,i=300;if(h.x>160)i=-300;var j=Tween.get(h,{loop:"true"}).to({x:k+i},1e4);(function(a,d){var b=Tween.get(h,{loop:"true"}).to({y:n},500,Ease.quadOut).to({y:m},500,Ease.quadIn).call(function(){a++;if(a>6){c();d.loop=false;b.loop=false}})})(l,j)}Ticker.addListener(a);e.length=0}function f(b,a){b.sourceRect=new Rectangle(a[0].x,a[0].y,a[1].x-a[0].x,a[1].y-a[0].y);b.regX=Math.round((a[1].x-a[0].x)/2);b.regY=Math.round((a[1].y-a[0].y)/2);b.x=Math.round((a[1].x+a[0].x)/2);b.y=Math.round((a[1].y+a[0].y)/2)}function i(){if(bolDo)return;try{document.createElement("canvas").getContext("2d");bolDo=true;b=document.getElementById("canvas");document.getElementById("canvasMove").style.display="block";document.getElementById("canvas").style.display="none";desenho.setEnd();h()}catch(a){objPage.ShowMessage("游览器版本较低<br/>不支持特效功能")}}function c(){try{bolDo=false;a.removeAllChildren();document.getElementById("canvasMove").style.display="none";document.getElementById("canvas").style.display="block";desenho.setDrawStart()}catch(b){}}function g(){if(bolDo)return;objPage.ShowConfirm("确认清除画板",0,"objPage.InitBoard(true);objPage.SetLineColor(intOldCol);")}e.DoAction=i;e.EndAction=c;if(document.getElementById("draw_reset"))document.getElementById("draw_reset").onclick=g})(window)