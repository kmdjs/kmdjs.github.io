try{objPage.AddJSOnce("jsCanvasHelper","action/CanvasHelper.js")}catch(e){}(function(e){var d,a,k,b,j="action/1003/";function h(){d=document.getElementById("canvasMove");a=new Stage(d);a.removeAllChildren();for(var l=new CanvasHelper(b),g=l.searchRects(),i=0;i<g.length;i++){var e=new Bitmap(b);f(e,g[i]);a.addChild(e);var j=0,h=14;e.skewX=-h;var k=Tween.get(e,{loop:true}).to({scaleY:.9},450,Ease.sineInOut).to({scaleY:1},450,Ease.sineInOut);(function(a,d){var b=Tween.get(e,{loop:true}).to({skewX:h},900,Ease.sineInOut).to({skewX:-h},900,Ease.sineInOut).call(function(){a++;if(a>4){a=0;c();d.loop=false;b.loop=false}})})(j,k)}Ticker.addListener(a);g.length=0}function f(b,a){b.sourceRect=new Rectangle(a[0].x,a[0].y,a[1].x-a[0].x,a[1].y-a[0].y);b.regX=Math.round((a[1].x-a[0].x)/2);b.regY=Math.round(a[1].y-a[0].y);b.x=Math.round((a[1].x+a[0].x)/2);b.y=Math.round((a[1].y+a[0].y)/2)+Math.round((a[1].y-a[0].y)/2)}function i(){if(bolDo)return;try{document.createElement("canvas").getContext("2d");bolDo=true;b=document.getElementById("canvas");document.getElementById("canvasMove").style.display="block";document.getElementById("canvas").style.display="none";desenho.setEnd();h()}catch(a){objPage.ShowMessage("游览器版本较低<br/>不支持特效功能")}}function c(){try{bolDo=false;a.removeAllChildren();document.getElementById("canvasMove").style.display="none";document.getElementById("canvas").style.display="block";desenho.setDrawStart()}catch(b){}}function g(){if(bolDo)return;objPage.ShowConfirm("确认清除画板",0,"objPage.InitBoard(true);objPage.SetLineColor(intOldCol);")}e.DoAction=i;e.EndAction=c;if(document.getElementById("draw_reset"))document.getElementById("draw_reset").onclick=g})(window)