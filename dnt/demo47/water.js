var requirejs,require,define;(function(global){function isFunction(e){return ostring.call(e)==="[object Function]"}function isArray(e){return ostring.call(e)==="[object Array]"}function each(e,t){if(e){var n;for(n=0;n<e.length;n+=1)if(t(e[n],n,e))break}}function eachReverse(e,t){if(e){var n;for(n=e.length-1;n>-1;n-=1)if(t(e[n],n,e))break}}function hasProp(e,t){return e.hasOwnProperty(t)}function eachProp(e,t){var n;for(n in e)if(e.hasOwnProperty(n)&&t(e[n],n))break}function mixin(e,t,n){t&&eachProp(t,function(t,r){if(n||!hasProp(e,r))e[r]=t})}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeContextModuleFunc(e,t,n){return function(){var r=aps.call(arguments,0),i;return n&&isFunction(i=r[r.length-1])&&(i.__requireJsBuild=!0),r.push(t),e.apply(null,r)}}function addRequireMethods(e,t,n){each([["toUrl"],["undef"],["defined","requireDefined"],["specified","requireSpecified"]],function(r){e[r[0]]=makeContextModuleFunc(t[r[1]||r[0]],n)})}function makeError(e,t,n,r){var i=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return i.requireType=e,i.requireModules=r,n&&(i.originalError=n),i}function newContext(e){function m(e){var t,n;for(t=0;e[t];t+=1){n=e[t];if(n===".")e.splice(t,1),t-=1;else if(n===".."){if(t===1&&(e[2]===".."||e[0]===".."))break;t>0&&(e.splice(t-1,2),t-=2)}}}function g(e,n,r){var i=n&&n.split("/"),s=t.map,o=s&&s["*"],u,a,f,l,c,h,p,d;e&&e.charAt(0)==="."&&(n?(t.pkgs[n]?i=[n]:i=i.slice(0,i.length-1),e=i.concat(e.split("/")),m(e),a=t.pkgs[u=e[0]],e=e.join("/"),a&&e===u+"/"+a.main&&(e=u)):e.indexOf("./")===0&&(e=e.substring(2)));if(r&&(i||o)&&s){l=e.split("/");for(c=l.length;c>0;c-=1){p=l.slice(0,c).join("/");if(i)for(h=i.length;h>0;h-=1){f=s[i.slice(0,h).join("/")];if(f){f=f[p];if(f){d=f;break}}}!d&&o&&o[p]&&(d=o[p]);if(d){l.splice(0,c,d),e=l.join("/");break}}}return e}function y(e){isBrowser&&each(scripts(),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===p.contextName)return t.parentNode.removeChild(t),!0})}function b(e){var n=t.paths[e];if(n&&isArray(n)&&n.length>1)return y(e),n.shift(),p.undef(e),p.require([e]),!0}function w(e,t,n,r){var i=e?e.indexOf("!"):-1,u=null,l=t?t.name:null,c=e,h=!0,d="",v,m,y;return e||(h=!1,e="_@r"+(a+=1)),i!==-1&&(u=e.substring(0,i),e=e.substring(i+1,e.length)),u&&(u=g(u,l,r),m=s[u]),e&&(u?m&&m.normalize?d=m.normalize(e,function(e){return g(e,l,r)}):d=g(e,l,r):(d=g(e,l,r),v=o[d],v||(v=p.nameToUrl(e,null,t),o[d]=v))),y=u&&!m&&!n?"_unnormalized"+(f+=1):"",{prefix:u,name:d,parentMap:t,unnormalized:!!y,url:v,originalName:c,isDefine:h,id:(u?u+"!"+d:d)+y}}function E(e){var t=e.id,r=n[t];return r||(r=n[t]=new p.Module(e)),r}function S(e,t,r){var i=e.id,o=n[i];hasProp(s,i)&&(!o||o.defineEmitComplete)?t==="defined"&&r(s[i]):E(e).on(t,r)}function x(e,t){var r=e.requireModules,i=!1;t?t(e):(each(r,function(t){var r=n[t];r&&(r.error=e,r.events.error&&(i=!0,r.emit("error",e)))}),i||req.onError(e))}function T(){globalDefQueue.length&&(apsp.apply(i,[i.length-1,0].concat(globalDefQueue)),globalDefQueue=[])}function N(e,t,n){var r=e&&e.map,i=makeContextModuleFunc(n||p.require,r,t);return addRequireMethods(i,p,r),i.isBrowser=isBrowser,i}function C(e){delete n[e],each(l,function(t,n){if(t.map.id===e)return l.splice(n,1),t.defined||(p.waitCount-=1),!0})}function k(e,t){var r=e.map.id,i=e.depMaps,s;if(!e.inited)return;return t[r]?e:(t[r]=!0,each(i,function(e){var i=e.id,o=n[i];if(!o)return;return!o.inited||!o.enabled?(s=null,delete t[r],!0):s=k(o,t)}),s)}function L(e,t,r){var i=e.map.id,o=e.depMaps;if(!e.inited||!e.map.isDefine)return;return t[i]?s[i]:(t[i]=e,each(o,function(s){var o=s.id,u=n[o],a;if(d[o])return;if(u){if(!u.inited||!u.enabled){r[i]=!0;return}a=L(u,t,r),r[o]||e.defineDepById(o,a)}}),e.check(!0),s[i])}function A(e){e.check()}function O(){var e=t.waitSeconds*1e3,r=e&&p.startTime+e<(new Date).getTime(),i=[],s=!1,o=!0,u,a,f,h;if(c)return;c=!0,eachProp(n,function(e){u=e.map,a=u.id;if(!e.enabled)return;if(!e.error)if(!e.inited&&r)b(a)?(h=!0,s=!0):(i.push(a),y(a));else if(!e.inited&&e.fetched&&u.isDefine){s=!0;if(!u.prefix)return o=!1}});if(r&&i.length)return f=makeError("timeout","Load timeout for modules: "+i,null,i),f.contextName=p.contextName,x(f);o&&(each(l,function(e){if(e.defined)return;var t=k(e,{}),n={};t&&(L(t,n,{}),eachProp(n,A))}),eachProp(n,A)),(!r||h)&&s&&(isBrowser||isWebWorker)&&!v&&(v=setTimeout(function(){v=0,O()},50)),c=!1}function M(e){E(w(e[0],null,!0)).init(e[1],e[2])}function _(e,t,n,r){e.detachEvent&&!isOpera?r&&e.detachEvent(r,t):e.removeEventListener(n,t,!1)}function D(e){var t=e.currentTarget||e.srcElement;return _(t,p.onScriptLoad,"load","onreadystatechange"),_(t,p.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}var t={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},shim:{}},n={},r={},i=[],s={},o={},u={},a=1,f=1,l=[],c,h,p,d,v;return d={require:function(e){return N(e)},exports:function(e){e.usingExports=!0;if(e.map.isDefine)return e.exports=s[e.map.id]={}},module:function(e){return e.module={id:e.map.id,uri:e.map.url,config:function(){return t.config&&t.config[e.map.id]||{}},exports:s[e.map.id]}}},h=function(e){this.events=r[e.id]||{},this.map=e,this.shim=t.shim[e.id],this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},h.prototype={init:function(e,t,n,r){r=r||{};if(this.inited)return;this.factory=t,n?this.on("error",n):this.events.error&&(n=bind(this,function(e){this.emit("error",e)})),each(e,bind(this,function(e,t){typeof e=="string"&&(e=w(e,this.map.isDefine?this.map:this.map.parentMap,!1,!0),this.depMaps.push(e));var r=d[e.id];if(r){this.depExports[t]=r(this);return}this.depCount+=1,S(e,"defined",bind(this,function(e){this.defineDep(t,e),this.check()})),n&&S(e,"error",n)})),this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check()},defineDepById:function(e,t){var n;return each(this.depMaps,function(t,r){if(t.id===e)return n=r,!0}),this.defineDep(n,t)},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(this.fetched)return;this.fetched=!0,p.startTime=(new Date).getTime();var e=this.map;e.prefix?this.callPlugin():this.shim?N(this,!0)(this.shim.deps||[],bind(this,function(){this.load()})):this.load()},load:function(){var e=this.map.url;u[e]||(u[e]=!0,p.load(this.map.id,e))},check:function(e){if(!this.enabled)return;var t=this.map.id,r=this.depExports,i=this.exports,o=this.factory,u,a;if(!this.inited)this.fetch();else if(this.error)this.emit("error",this.error);else if(!this.defining){this.defining=!0;if(this.depCount<1&&!this.defined){if(isFunction(o)){if(this.events.error)try{i=p.execCb(t,o,r,i)}catch(f){u=f}else i=p.execCb(t,o,r,i);this.map.isDefine&&(a=this.module,a&&a.exports!==undefined&&a.exports!==this.exports?i=a.exports:i===undefined&&this.usingExports&&(i=this.exports));if(u)return u.requireMap=this.map,u.requireModules=[this.map.id],u.requireType="define",x(this.error=u)}else i=o;this.exports=i,this.map.isDefine&&!this.ignore&&(s[t]=i,req.onResourceLoad&&req.onResourceLoad(p,this.map,this.depMaps)),delete n[t],this.defined=!0,p.waitCount-=1,p.waitCount===0&&(l=[])}this.defining=!1,e||this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}},callPlugin:function(){var e=this.map,r=e.id,i=w(e.prefix,null,!1,!0);S(i,"defined",bind(this,function(i){var s=this.map.name,o=this.map.parentMap?this.map.parentMap.name:null,u,a,f;if(this.map.unnormalized){i.normalize&&(s=i.normalize(s,function(e){return g(e,o,!0)})||""),a=w(e.prefix+"!"+s),S(a,"defined",bind(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),f=n[a.id],f&&(this.events.error&&f.on("error",bind(this,function(e){this.emit("error",e)})),f.enable());return}u=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),u.error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[r],eachProp(n,function(e){e.map.id.indexOf(r+"_unnormalized")===0&&C(e.map.id)}),x(e)}),u.fromText=function(e,t){var n=useInteractive;n&&(useInteractive=!1),req.exec(t),n&&(useInteractive=!0),p.completeLoad(e)},i.load(e.name,N(e.parentMap,!0,function(e,t){return p.require(e,t)}),u,t)})),p.enable(i,this),this.pluginMaps[i.id]=i},enable:function(){this.enabled=!0,this.waitPushed||(l.push(this),p.waitCount+=1,this.waitPushed=!0),each(this.depMaps,bind(this,function(e){var t=e.id,r=n[t];!d[t]&&r&&!r.enabled&&p.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=n[e.id];t&&!t.enabled&&p.enable(e,this)})),this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),e==="error"&&delete this.events[e]}},p={config:t,contextName:e,registry:n,defined:s,urlMap:o,urlFetched:u,waitCount:0,defQueue:i,Module:h,makeModuleMap:w,configure:function(e){e.baseUrl&&e.baseUrl.charAt(e.baseUrl.length-1)!=="/"&&(e.baseUrl+="/");var n=t.paths,r=t.pkgs,i=t.shim,s=t.map||{};mixin(t,e,!0),mixin(n,e.paths,!0),t.paths=n,e.map&&(mixin(s,e.map,!0),t.map=s),e.shim&&(eachProp(e.shim,function(e,t){isArray(e)&&(e={deps:e}),e.exports&&!e.exports.__buildReady&&(e.exports=p.makeShimExports(e.exports)),i[t]=e}),t.shim=i),e.packages&&(each(e.packages,function(e){var t;e=typeof e=="string"?{name:e}:e,t=e.location,r[e.name]={name:e.name,location:t||e.name,main:(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}}),t.pkgs=r),(e.deps||e.callback)&&p.require(e.deps||[],e.callback)},makeShimExports:function(e){var t;return typeof e=="string"?(t=function(){return getGlobal(e)},t.exports=e,t):function(){return e.apply(global,arguments)}},requireDefined:function(e,t){return hasProp(s,w(e,t,!1,!0).id)},requireSpecified:function(e,t){return e=w(e,t,!1,!0).id,hasProp(s,e)||hasProp(n,e)},require:function(t,n,r,o){var u,a,f,l,c;if(typeof t=="string")return isFunction(n)?x(makeError("requireargs","Invalid require call"),r):req.get?req.get(p,t,n):(u=t,o=n,f=w(u,o,!1,!0),a=f.id,hasProp(s,a)?s[a]:x(makeError("notloaded",'Module name "'+a+'" has not been loaded yet for context: '+e)));r&&!isFunction(r)&&(o=r,r=undefined),n&&!isFunction(n)&&(o=n,n=undefined),T();while(i.length){c=i.shift();if(c[0]===null)return x(makeError("mismatch","Mismatched anonymous define() module: "+c[c.length-1]));M(c)}return l=E(w(null,o)),l.init(t,n,r,{enabled:!0}),O(),p.require},undef:function(e){var t=w(e,null,!0),i=n[e];delete s[e],delete o[e],delete u[t.url],delete r[e],i&&(i.events.defined&&(r[e]=i.events),C(e))},enable:function(e,t){var r=n[e.id];r&&E(e).enable()},completeLoad:function(e){var r=t.shim[e]||{},o=r.exports&&r.exports.exports,u,a,f;T();while(i.length){a=i.shift();if(a[0]===null){a[0]=e;if(u)break;u=!0}else a[0]===e&&(u=!0);M(a)}f=n[e];if(!u&&!s[e]&&f&&!f.inited){if(t.enforceDefine&&(!o||!getGlobal(o))){if(b(e))return;return x(makeError("nodefine","No define call for "+e,null,[e]))}M([e,r.deps||[],r.exports])}O()},toUrl:function(e,t){var n=e.lastIndexOf("."),r=null;return n!==-1&&(r=e.substring(n,e.length),e=e.substring(0,n)),p.nameToUrl(e,r,t)},nameToUrl:function(e,n,r){var i,s,o,u,a,f,l,c,h;e=g(e,r&&r.id,!0);if(req.jsExtRegExp.test(e))c=e+(n||"");else{i=t.paths,s=t.pkgs,a=e.split("/");for(f=a.length;f>0;f-=1){l=a.slice(0,f).join("/"),o=s[l],h=i[l];if(h){isArray(h)&&(h=h[0]),a.splice(0,f,h);break}if(o){e===o.name?u=o.location+"/"+o.main:u=o.location,a.splice(0,f,u);break}}c=a.join("/")+(n||".js"),c=(c.charAt(0)==="/"||c.match(/^[\w\+\.\-]+:/)?"":t.baseUrl)+c}return t.urlArgs?c+((c.indexOf("?")===-1?"?":"&")+t.urlArgs):c},load:function(e,t){req.load(p,e,t)},execCb:function(e,t,n,r){return t.apply(r,n)},onScriptLoad:function(e){if(e.type==="load"||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=D(e);p.completeLoad(t.id)}},onScriptError:function(e){var t=D(e);if(!b(t.id))return x(makeError("scripterror","Script error",e,[t.id]))}}}function getInteractiveScript(){return interactiveScript&&interactiveScript.readyState==="interactive"?interactiveScript:(eachReverse(scripts(),function(e){if(e.readyState==="interactive")return interactiveScript=e}),interactiveScript)}var version="2.0.1",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,cjsRequireRegExp=/require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,ostring=Object.prototype.toString,ap=Array.prototype,aps=ap.slice,apsp=ap.splice,isBrowser=typeof window!="undefined"&&!!navigator&&!!document,isWebWorker=!isBrowser&&typeof importScripts!="undefined",readyRegExp=isBrowser&&navigator.platform==="PLAYSTATION 3"?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera=typeof opera!="undefined"&&opera.toString()==="[object Opera]",contexts={},cfg={},globalDefQueue=[],useInteractive=!1,req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath;if(typeof define!="undefined")return;if(typeof requirejs!="undefined"){if(isFunction(requirejs))return;cfg=requirejs,requirejs=undefined}typeof require!="undefined"&&!isFunction(require)&&(cfg=require,require=undefined),req=requirejs=function(e,t,n,r){var i=defContextName,s,o;return!isArray(e)&&typeof e!="string"&&(o=e,isArray(t)?(e=t,t=n,n=r):e=[]),o&&o.context&&(i=o.context),s=contexts[i],s||(s=contexts[i]=req.s.newContext(i)),o&&s.configure(o),s.require(e,t,n)},req.config=function(e){return req(e)},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),addRequireMethods(req,contexts[defContextName]),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=function(e){throw e},req.load=function(e,t,n){var r=e&&e.config||{},i;if(isBrowser)return i=r.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script"),i.type=r.scriptType||"text/javascript",i.charset="utf-8",i.setAttribute("data-requirecontext",e.contextName),i.setAttribute("data-requiremodule",t),i.attachEvent&&!(i.attachEvent.toString&&i.attachEvent.toString().indexOf("[native code")<0)&&!isOpera?(useInteractive=!0,i.attachEvent("onreadystatechange",e.onScriptLoad)):(i.addEventListener("load",e.onScriptLoad,!1),i.addEventListener("error",e.onScriptError,!1)),i.src=n,currentlyAddingScript=i,baseElement?head.insertBefore(i,baseElement):head.appendChild(i),currentlyAddingScript=null,i;isWebWorker&&(importScripts(n),e.completeLoad(t))},isBrowser&&eachReverse(scripts(),function(e){head||(head=e.parentNode),dataMain=e.getAttribute("data-main");if(dataMain)return cfg.baseUrl||(src=dataMain.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath,dataMain=mainScript.replace(jsSuffixRegExp,"")),cfg.deps=cfg.deps?cfg.deps.concat(dataMain):[dataMain],!0}),define=function(e,t,n){var r,i;typeof e!="string"&&(n=t,t=e,e=null),isArray(t)||(n=t,t=[]),!t.length&&isFunction(n)&&n.length&&(n.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(e,n){t.push(n)}),t=(n.length===1?["require"]:["require","exports","module"]).concat(t)),useInteractive&&(r=currentlyAddingScript||getInteractiveScript(),r&&(e||(e=r.getAttribute("data-requiremodule")),i=contexts[r.getAttribute("data-requirecontext")])),(i?i.defQueue:globalDefQueue).push([e,t,n])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)})(this),define("requireLib",function(){}),define("SCJ",[],function(){var e={},t=0;return e.getId=function(){return t++},e.create=function(t,n){return e["create"+t.charAt(0).toUpperCase()+t.substr(1)](n)},e}),define("canvas/render",["SCJ"],function(e){var t={};return!function(){var e=function(e,t,n){this.initialize(e,t,n)},n=e.prototype;n.type=null,n.target=null,n.currentTarget=null,n.eventPhase=0,n.bubbles=!1,n.cancelable=!1,n.timeStamp=0,n.defaultPrevented=!1,n.propagationStopped=!1,n.immediatePropagationStopped=!1,n.removed=!1,n.initialize=function(e,t,n){this.type=e,this.bubbles=t,this.cancelable=n,this.timeStamp=(new Date).getTime()},n.preventDefault=function(){this.defaultPrevented=!0},n.stopPropagation=function(){this.propagationStopped=!0},n.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},n.remove=function(){this.removed=!0},n.clone=function(){return new e(this.type,this.bubbles,this.cancelable)},n.toString=function(){return"[Event (type="+this.type+")]"},t.Event=e}(),!function(){var e=function(){},n=e.prototype;e.initialize=function(e){e.addEventListener=n.addEventListener,e.on=n.on,e.removeEventListener=e.off=n.removeEventListener,e.removeAllEventListeners=n.removeAllEventListeners,e.hasEventListener=n.hasEventListener,e.dispatchEvent=n.dispatchEvent,e._dispatchEvent=n._dispatchEvent,e.willTrigger=n.willTrigger},n._listeners=null,n._captureListeners=null,n.initialize=function(){},n.addEventListener=function(e,t,n){var r;r=n?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var i=r[e];return i&&this.removeEventListener(e,t,n),i=r[e],i?i.push(t):r[e]=[t],t},n.on=function(e,t,n,r,i,s){return t.handleEvent&&(n=n||t,t=t.handleEvent),n=n||this,this.addEventListener(e,function(e){t.call(n,e,i),r&&e.remove()},s)},n.removeEventListener=function(e,t,n){var r=n?this._captureListeners:this._listeners;if(r){var i=r[e];if(i)for(var s=0,o=i.length;o>s;s++)if(i[s]==t){1==o?delete r[e]:i.splice(s,1);break}}},n.off=n.removeEventListener,n.removeAllEventListeners=function(e){e?(this._listeners&&delete this._listeners[e],this._captureListeners&&delete this._captureListeners[e]):this._listeners=this._captureListeners=null},n.dispatchEvent=function(e,n){if("string"==typeof e){var r=this._listeners;if(!r||!r[e])return!1;e=new t.Event(e)}if(e.target=n||this,e.bubbles&&this.parent){for(var i=this,s=[i];i.parent;)s.push(i=i.parent);var o,u=s.length;for(o=u-1;o>=0&&!e.propagationStopped;o--)s[o]._dispatchEvent(e,1+(0==o));for(o=1;u>o&&!e.propagationStopped;o++)s[o]._dispatchEvent(e,3)}else this._dispatchEvent(e,2);return e.defaultPrevented},n.hasEventListener=function(e){var t=this._listeners,n=this._captureListeners;return!!(t&&t[e]||n&&n[e])},n.willTrigger=function(e){for(var t=this;t;){if(t.hasEventListener(e))return!0;t=t.parent}return!1},n.toString=function(){return"[EventDispatcher]"},n._dispatchEvent=function(e,t){var n,r=1==t?this._captureListeners:this._listeners;if(e&&r){var i=r[e.type];if(!i||!(n=i.length))return;e.currentTarget=this,e.eventPhase=t,e.removed=!1,i=i.slice();for(var s=0;n>s&&!e.immediatePropagationStopped;s++){var o=i[s];o.handleEvent?o.handleEvent(e):o(e),e.removed&&(this.off(e.type,o,1==t),e.removed=!1)}}},t.EventDispatcher=e}(),!function(){t.indexOf=function(e,t){for(var n=0,r=e.length;r>n;n++)if(t===e[n])return n;return-1}}(),!function(){var e=function(){throw"UID cannot be instantiated"};e._nextID=0,e.get=function(){return e._nextID++},t.UID=e}(),!function(){var e=function(){throw"Ticker cannot be instantiated."};e.RAF_SYNCHED="synched",e.RAF="raf",e.TIMEOUT="timeout",e.useRAF=!1,e.timingMode=null,e.maxDelta=0,e.removeEventListener=null,e.removeAllEventListeners=null,e.dispatchEvent=null,e.hasEventListener=null,e._listeners=null,t.EventDispatcher.initialize(e),e._addEventListener=e.addEventListener,e.addEventListener=function(){return!e._inited&&e.init(),e._addEventListener.apply(e,arguments)},e._paused=!1,e._inited=!1,e._startTime=0,e._pausedTime=0,e._ticks=0,e._pausedTicks=0,e._interval=50,e._lastTime=0,e._times=null,e._tickTimes=null,e._timerId=null,e._raf=!0,e.init=function(){e._inited||(e._inited=!0,e._times=[],e._tickTimes=[],e._startTime=e._getTime(),e._times.push(e._lastTime=0),e.setInterval(e._interval))},e.reset=function(){if(e._raf){var t=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame;t&&t(e._timerId)}else clearTimeout(e._timerId);e.removeAllEventListeners("tick")},e.setInterval=function(t){e._interval=t,e._inited&&e._setupTick()},e.getInterval=function(){return e._interval},e.setFPS=function(t){e.setInterval(1e3/t)},e.getFPS=function(){return 1e3/e._interval},e.getMeasuredTickTime=function(t){var n=0,r=e._tickTimes;if(r.length<1)return-1;t=Math.min(r.length,t||0|e.getFPS());for(var i=0;t>i;i++)n+=r[i];return n/t},e.getMeasuredFPS=function(t){var n=e._times;return n.length<2?-1:(t=Math.min(n.length-1,t||0|e.getFPS()),1e3/((n[0]-n[t])/t))},e.setPaused=function(t){e._paused=t},e.getPaused=function(){return e._paused},e.getTime=function(t){return e._getTime()-e._startTime-(t?e._pausedTime:0)},e.getEventTime=function(t){return(e._lastTime||e._startTime)-(t?e._pausedTime:0)},e.getTicks=function(t){return e._ticks-(t?e._pausedTicks:0)},e._handleSynch=function(){var t=e._getTime()-e._startTime;e._timerId=null,e._setupTick(),t-e._lastTime>=.97*(e._interval-1)&&e._tick()},e._handleRAF=function(){e._timerId=null,e._setupTick(),e._tick()},e._handleTimeout=function(){e._timerId=null,e._setupTick(),e._tick()},e._setupTick=function(){if(null==e._timerId){var t=e.timingMode||e.useRAF&&e.RAF_SYNCHED;if(t==e.RAF_SYNCHED||t==e.RAF){var n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(n)return e._timerId=n(t==e.RAF?e._handleRAF:e._handleSynch),e._raf=!0,void 0}e._raf=!1,e._timerId=setTimeout(e._handleTimeout,e._interval)}},e._tick=function(){var n=e._getTime()-e._startTime,r=n-e._lastTime,i=e._paused;if(e._ticks++,i&&(e._pausedTicks++,e._pausedTime+=r),e._lastTime=n,e.hasEventListener("tick")){var s=new t.Event("tick"),o=e.maxDelta;s.delta=o&&r>o?o:r,s.paused=i,s.time=n,s.runTime=n-e._pausedTime,e.dispatchEvent(s)}for(e._tickTimes.unshift(e._getTime()-n);e._tickTimes.length>100;)e._tickTimes.pop();for(e._times.unshift(n);e._times.length>100;)e._times.pop()};var n=window.performance&&(performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow);e._getTime=function(){return n&&n.call(performance)||(new Date).getTime()},t.Ticker=e}(),!function(){var e=function(e,t,n,r,i,s,o,u,a,f){this.initialize(e,t,n,r,i,s,o,u,a,f)},n=e.prototype=new t.Event;n.stageX=0,n.stageY=0,n.rawX=0,n.rawY=0,n.nativeEvent=null,n.pointerID=0,n.primary=!1,n.addEventListener=null,n.removeEventListener=null,n.removeAllEventListeners=null,n.dispatchEvent=null,n.hasEventListener=null,n._listeners=null,t.EventDispatcher.initialize(n),n._get_localX=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).x},n._get_localY=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).y};try{Object.defineProperties(n,{localX:{get:n._get_localX},localY:{get:n._get_localY}})}catch(r){}n.Event_initialize=n.initialize,n.initialize=function(e,t,n,r,i,s,o,u,a,f){this.Event_initialize(e,t,n),this.stageX=r,this.stageY=i,this.nativeEvent=s,this.pointerID=o,this.primary=u,this.rawX=null==a?r:a,this.rawY=null==f?i:f},n.clone=function(){return new e(this.type,this.bubbles,this.cancelable,this.stageX,this.stageY,this.target,this.nativeEvent,this.pointerID,this.primary,this.rawX,this.rawY)},n.toString=function(){return"[MouseEvent (type="+this.type+" stageX="+this.stageX+" stageY="+this.stageY+")]"},t.MouseEvent=e}(),!function(){var e=function(e,t,n,r,i,s){this.initialize(e,t,n,r,i,s)},n=e.prototype;e.identity=null,e.DEG_TO_RAD=Math.PI/180,n.a=1,n.b=0,n.c=0,n.d=1,n.tx=0,n.ty=0,n.alpha=1,n.shadow=null,n.compositeOperation=null,n.initialize=function(e,t,n,r,i,s){return this.a=null==e?1:e,this.b=t||0,this.c=n||0,this.d=null==r?1:r,this.tx=i||0,this.ty=s||0,this},n.prepend=function(e,t,n,r,i,s){var o=this.tx;if(1!=e||0!=t||0!=n||1!=r){var u=this.a,a=this.c;this.a=u*e+this.b*n,this.b=u*t+this.b*r,this.c=a*e+this.d*n,this.d=a*t+this.d*r}return this.tx=o*e+this.ty*n+i,this.ty=o*t+this.ty*r+s,this},n.append=function(e,t,n,r,i,s){var o=this.a,u=this.b,a=this.c,f=this.d;return this.a=e*o+t*a,this.b=e*u+t*f,this.c=n*o+r*a,this.d=n*u+r*f,this.tx=i*o+s*a+this.tx,this.ty=i*u+s*f+this.ty,this},n.prependMatrix=function(e){return this.prepend(e.a,e.b,e.c,e.d,e.tx,e.ty),this.prependProperties(e.alpha,e.shadow,e.compositeOperation),this},n.appendMatrix=function(e){return this.append(e.a,e.b,e.c,e.d,e.tx,e.ty),this.appendProperties(e.alpha,e.shadow,e.compositeOperation),this},n.prependTransform=function(t,n,r,i,s,o,u,f,l){if(s%360)var c=s*e.DEG_TO_RAD,h=Math.cos(c),p=Math.sin(c);else h=1,p=0;return(f||l)&&(this.tx-=f,this.ty-=l),o||u?(o*=e.DEG_TO_RAD,u*=e.DEG_TO_RAD,this.prepend(h*r,p*r,-p*i,h*i,0,0),this.prepend(Math.cos(u),Math.sin(u),-Math.sin(o),Math.cos(o),t,n)):this.prepend(h*r,p*r,-p*i,h*i,t,n),this},n.appendTransform=function(t,n,r,i,s,o,u,f,l){if(s%360)var c=s*e.DEG_TO_RAD,h=Math.cos(c),p=Math.sin(c);else h=1,p=0;return o||u?(o*=e.DEG_TO_RAD,u*=e.DEG_TO_RAD,this.append(Math.cos(u),Math.sin(u),-Math.sin(o),Math.cos(o),t,n),this.append(h*r,p*r,-p*i,h*i,0,0)):this.append(h*r,p*r,-p*i,h*i,t,n),(f||l)&&(this.tx-=f*this.a+l*this.c,this.ty-=f*this.b+l*this.d),this},n.rotate=function(e){var t=Math.cos(e),n=Math.sin(e),r=this.a,i=this.c,s=this.tx;return this.a=r*t-this.b*n,this.b=r*n+this.b*t,this.c=i*t-this.d*n,this.d=i*n+this.d*t,this.tx=s*t-this.ty*n,this.ty=s*n+this.ty*t,this},n.skew=function(t,n){return t*=e.DEG_TO_RAD,n*=e.DEG_TO_RAD,this.append(Math.cos(n),Math.sin(n),-Math.sin(t),Math.cos(t),0,0),this},n.scale=function(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this},n.translate=function(e,t){return this.tx+=e,this.ty+=t,this},n.identity=function(){return this.alpha=this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.shadow=this.compositeOperation=null,this},n.invert=function(){var e=this.a,t=this.b,n=this.c,r=this.d,i=this.tx,s=e*r-t*n;return this.a=r/s,this.b=-t/s,this.c=-n/s,this.d=e/s,this.tx=(n*this.ty-r*i)/s,this.ty=-(e*this.ty-t*i)/s,this},n.isIdentity=function(){return 0==this.tx&&0==this.ty&&1==this.a&&0==this.b&&0==this.c&&1==this.d},n.transformPoint=function(e,t,n){return n=n||{},n.x=e*this.a+t*this.c+this.tx,n.y=e*this.b+t*this.d+this.ty,n},n.decompose=function(t){null==t&&(t={}),t.x=this.tx,t.y=this.ty,t.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),t.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var n=Math.atan2(-this.c,this.d),r=Math.atan2(this.b,this.a);return n==r?(t.rotation=r/e.DEG_TO_RAD,this.a<0&&this.d>=0&&(t.rotation+=t.rotation<=0?180:-180),t.skewX=t.skewY=0):(t.skewX=n/e.DEG_TO_RAD,t.skewY=r/e.DEG_TO_RAD),t},n.reinitialize=function(e,t,n,r,i,s,o,u,a){return this.initialize(e,t,n,r,i,s),this.alpha=null==o?1:o,this.shadow=u,this.compositeOperation=a,this},n.copy=function(e){return this.reinitialize(e.a,e.b,e.c,e.d,e.tx,e.ty,e.alpha,e.shadow,e.compositeOperation)},n.appendProperties=function(e,t,n){return this.alpha*=e,this.shadow=t||this.shadow,this.compositeOperation=n||this.compositeOperation,this},n.prependProperties=function(e,t,n){return this.alpha*=e,this.shadow=this.shadow||t,this.compositeOperation=this.compositeOperation||n,this},n.clone=function(){return(new e).copy(this)},n.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"},e.identity=new e,t.Matrix2D=e}(),!function(){var e=function(e,t){this.initialize(e,t)},n=e.prototype;n.x=0,n.y=0,n.initialize=function(e,t){return this.x=null==e?0:e,this.y=null==t?0:t,this},n.copy=function(e){return this.initialize(e.x,e.y)},n.clone=function(){return new e(this.x,this.y)},n.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"},t.Point=e}(),!function(){var e=function(e,t,n,r){this.initialize(e,t,n,r)},n=e.prototype;n.x=0,n.y=0,n.width=0,n.height=0,n.initialize=function(e,t,n,r){return this.x=e||0,this.y=t||0,this.width=n||0,this.height=r||0,this},n.copy=function(e){return this.initialize(e.x,e.y,e.width,e.height)},n.clone=function(){return new e(this.x,this.y,this.width,this.height)},n.toString=function(){return"[Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")]"},t.Rectangle=e}(),!function(){var e=function(e,t,n,r,i,s,o){this.initialize(e,t,n,r,i,s,o)},n=e.prototype;n.target=null,n.overLabel=null,n.outLabel=null,n.downLabel=null,n.play=!1,n._isPressed=!1,n._isOver=!1,n.initialize=function(e,t,n,r,i,s,o){e.addEventListener&&(this.target=e,e.cursor="pointer",this.overLabel=null==n?"over":n,this.outLabel=null==t?"out":t,this.downLabel=null==r?"down":r,this.play=i,this.setEnabled(!0),this.handleEvent({}),s&&(o&&(s.actionsEnabled=!1,s.gotoAndStop&&s.gotoAndStop(o)),e.hitArea=s))},n.setEnabled=function(e){var t=this.target;e?(t.addEventListener("rollover",this),t.addEventListener("rollout",this),t.addEventListener("mousedown",this),t.addEventListener("pressup",this)):(t.removeEventListener("rollover",this),t.removeEventListener("rollout",this),t.removeEventListener("mousedown",this),t.removeEventListener("pressup",this))},n.toString=function(){return"[ButtonHelper]"},n.handleEvent=function(e){var t,n=this.target,r=e.type;"mousedown"==r?(this._isPressed=!0,t=this.downLabel):"pressup"==r?(this._isPressed=!1,t=this._isOver?this.overLabel:this.outLabel):"rollover"==r?(this._isOver=!0,t=this._isPressed?this.downLabel:this.overLabel):(this._isOver=!1,t=this._isPressed?this.overLabel:this.outLabel),this.play?n.gotoAndPlay&&n.gotoAndPlay(t):n.gotoAndStop&&n.gotoAndStop(t)},t.ButtonHelper=e}(),!function(){var e=function(e,t,n,r){this.initialize(e,t,n,r)},n=e.prototype;e.identity=null,n.color=null,n.offsetX=0,n.offsetY=0,n.blur=0,n.initialize=function(e,t,n,r){this.color=e,this.offsetX=t,this.offsetY=n,this.blur=r},n.toString=function(){return"[Shadow]"},n.clone=function(){return new e(this.color,this.offsetX,this.offsetY,this.blur)},e.identity=new e("transparent",0,0,0),t.Shadow=e}(),!function(){var e=function(e){this.initialize(e)},n=e.prototype=new t.EventDispatcher;n.complete=!0,n.framerate=0,n._animations=null,n._frames=null,n._images=null,n._data=null,n._loadCount=0,n._frameHeight=0,n._frameWidth=0,n._numFrames=0,n._regX=0,n._regY=0,n.initialize=function(e){var n,r,i,s;if(null!=e){if(this.framerate=e.framerate||0,e.images&&(r=e.images.length)>0)for(s=this._images=[],n=0;r>n;n++){var o=e.images[n];if("string"==typeof o){var u=o;o=document.createElement("img"),o.src=u}s.push(o),o.getContext||o.complete||(this._loadCount++,this.complete=!1,function(e){o.onload=function(){e._handleImageLoad()}}(this))}if(null!=e.frames)if(e.frames instanceof Array)for(this._frames=[],s=e.frames,n=0,r=s.length;r>n;n++){var a=s[n];this._frames.push({image:this._images[a[4]?a[4]:0],rect:new t.Rectangle(a[0],a[1],a[2],a[3]),regX:a[5]||0,regY:a[6]||0})}else i=e.frames,this._frameWidth=i.width,this._frameHeight=i.height,this._regX=i.regX||0,this._regY=i.regY||0,this._numFrames=i.count,0==this._loadCount&&this._calculateFrames();if(this._animations=[],null!=(i=e.animations)){this._data={};var f;for(f in i){var l={name:f},c=i[f];if("number"==typeof c)s=l.frames=[c];else if(c instanceof Array)if(1==c.length)l.frames=[c[0]];else for(l.speed=c[3],l.next=c[2],s=l.frames=[],n=c[0];n<=c[1];n++)s.push(n);else{l.speed=c.speed,l.next=c.next;var h=c.frames;s=l.frames="number"==typeof h?[h]:h.slice(0)}(l.next===!0||void 0===l.next)&&(l.next=f),(l.next===!1||s.length<2&&l.next==f)&&(l.next=null),l.speed||(l.speed=1),this._animations.push(f),this._data[f]=l}}}},n.getNumFrames=function(e){if(null==e)return this._frames?this._frames.length:this._numFrames;var t=this._data[e];return null==t?0:t.frames.length},n.getAnimations=function(){return this._animations.slice(0)},n.getAnimation=function(e){return this._data[e]},n.getFrame=function(e){var t;return this._frames&&(t=this._frames[e])?t:null},n.getFrameBounds=function(e,n){var r=this.getFrame(e);return r?(n||new t.Rectangle).initialize(-r.regX,-r.regY,r.rect.width,r.rect.height):null},n.toString=function(){return"[SpriteSheet]"},n.clone=function(){var t=new e;return t.complete=this.complete,t._animations=this._animations,t._frames=this._frames,t._images=this._images,t._data=this._data,t._frameHeight=this._frameHeight,t._frameWidth=this._frameWidth,t._numFrames=this._numFrames,t._loadCount=this._loadCount,t},n._handleImageLoad=function(){0==--this._loadCount&&(this._calculateFrames(),this.complete=!0,this.dispatchEvent("complete"))},n._calculateFrames=function(){if(!this._frames&&0!=this._frameWidth){this._frames=[];for(var e=0,n=this._frameWidth,r=this._frameHeight,i=0,s=this._images;i<s.length;i++){for(var o=s[i],u=0|o.width/n,a=0|o.height/r,f=this._numFrames>0?Math.min(this._numFrames-e,u*a):u*a,l=0;f>l;l++)this._frames.push({image:o,rect:new t.Rectangle(l%u*n,(0|l/u)*r,n,r),regX:this._regX,regY:this._regY});e+=f}this._numFrames=e}},t.SpriteSheet=e}(),!function(){function e(e,t,n){this.f=e,this.params=t,this.path=null==n?!0:n}e.prototype.exec=function(e){this.f.apply(e,this.params)};var n=function(){this.initialize()},r=n.prototype;n.getRGB=function(e,t,n,r){return null!=e&&null==n&&(r=t,n=255&e,t=255&e>>8,e=255&e>>16),null==r?"rgb("+e+","+t+","+n+")":"rgba("+e+","+t+","+n+","+r+")"},n.getHSL=function(e,t,n,r){return null==r?"hsl("+e%360+","+t+"%,"+n+"%)":"hsla("+e%360+","+t+"%,"+n+"%,"+r+")"},n.Command=e,n.BASE_64={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63},n.STROKE_CAPS_MAP=["butt","round","square"],n.STROKE_JOINTS_MAP=["miter","round","bevel"];var i=t.createCanvas?t.createCanvas():document.createElement("canvas");if(i.getContext){var s=n._ctx=i.getContext("2d");n.beginCmd=new e(s.beginPath,[],!1),n.fillCmd=new e(s.fill,[],!1),n.strokeCmd=new e(s.stroke,[],!1),i.width=i.height=1}r._strokeInstructions=null,r._strokeStyleInstructions=null,r._strokeIgnoreScale=!1,r._fillInstructions=null,r._fillMatrix=null,r._instructions=null,r._oldInstructions=null,r._activeInstructions=null,r._active=!1,r._dirty=!1,r.initialize=function(){this.clear(),this._ctx=n._ctx},r.isEmpty=function(){return!(this._instructions.length||this._oldInstructions.length||this._activeInstructions.length)},r.draw=function(e){this._dirty&&this._updateInstructions();for(var t=this._instructions,n=0,r=t.length;r>n;n++)t[n].exec(e)},r.drawAsPath=function(e){this._dirty&&this._updateInstructions();for(var t,n=this._instructions,r=0,i=n.length;i>r;r++)((t=n[r]).path||0==r)&&t.exec(e)},r.moveTo=function(t,n){return this._activeInstructions.push(new e(this._ctx.moveTo,[t,n])),this},r.lineTo=function(t,n){return this._dirty=this._active=!0,this._activeInstructions.push(new e(this._ctx.lineTo,[t,n])),this},r.arcTo=function(t,n,r,i,s){return this._dirty=this._active=!0,this._activeInstructions.push(new e(this._ctx.arcTo,[t,n,r,i,s])),this},r.arc=function(t,n,r,i,s,o){return this._dirty=this._active=!0,null==o&&(o=!1),this._activeInstructions.push(new e(this._ctx.arc,[t,n,r,i,s,o])),this},r.quadraticCurveTo=function(t,n,r,i){return this._dirty=this._active=!0,this._activeInstructions.push(new e(this._ctx.quadraticCurveTo,[t,n,r,i])),this},r.bezierCurveTo=function(t,n,r,i,s,o){return this._dirty=this._active=!0,this._activeInstructions.push(new e(this._ctx.bezierCurveTo,[t,n,r,i,s,o])),this},r.rect=function(t,n,r,i){return this._dirty=this._active=!0,this._activeInstructions.push(new e(this._ctx.rect,[t,n,r,i])),this},r.closePath=function(){return this._active&&(this._dirty=!0,this._activeInstructions.push(new e(this._ctx.closePath,[]))),this},r.clear=function(){return this._instructions=[],this._oldInstructions=[],this._activeInstructions=[],this._strokeStyleInstructions=this._strokeInstructions=this._fillInstructions=this._fillMatrix=null,this._active=this._dirty=this._strokeIgnoreScale=!1,this},r.beginFill=function(t){return this._active&&this._newPath(),this._fillInstructions=t?[new e(this._setProp,["fillStyle",t],!1)]:null,this._fillMatrix=null,this},r.beginLinearGradientFill=function(t,n,r,i,s,o){this._active&&this._newPath();for(var u=this._ctx.createLinearGradient(r,i,s,o),f=0,l=t.length;l>f;f++)u.addColorStop(n[f],t[f]);return this._fillInstructions=[new e(this._setProp,["fillStyle",u],!1)],this._fillMatrix=null,this},r.beginRadialGradientFill=function(t,n,r,i,s,o,u,f){this._active&&this._newPath();for(var l=this._ctx.createRadialGradient(r,i,s,o,u,f),c=0,h=t.length;h>c;c++)l.addColorStop(n[c],t[c]);return this._fillInstructions=[new e(this._setProp,["fillStyle",l],!1)],this._fillMatrix=null,this},r.beginBitmapFill=function(t,n,r){this._active&&this._newPath(),n=n||"";var i=this._ctx.createPattern(t,n);return this._fillInstructions=[new e(this._setProp,["fillStyle",i],!1)],this._fillMatrix=r?[r.a,r.b,r.c,r.d,r.tx,r.ty]:null,this},r.endFill=function(){return this.beginFill()},r.setStrokeStyle=function(t,r,i,s,o){return this._active&&this._newPath(),this._strokeStyleInstructions=[new e(this._setProp,["lineWidth",null==t?"1":t],!1),new e(this._setProp,["lineCap",null==r?"butt":isNaN(r)?r:n.STROKE_CAPS_MAP[r]],!1),new e(this._setProp,["lineJoin",null==i?"miter":isNaN(i)?i:n.STROKE_JOINTS_MAP[i]],!1),new e(this._setProp,["miterLimit",null==s?"10":s],!1)],this._strokeIgnoreScale=o,this},r.beginStroke=function(t){return this._active&&this._newPath(),this._strokeInstructions=t?[new e(this._setProp,["strokeStyle",t],!1)]:null,this},r.beginLinearGradientStroke=function(t,n,r,i,s,o){this._active&&this._newPath();for(var u=this._ctx.createLinearGradient(r,i,s,o),f=0,l=t.length;l>f;f++)u.addColorStop(n[f],t[f]);return this._strokeInstructions=[new e(this._setProp,["strokeStyle",u],!1)],this},r.beginRadialGradientStroke=function(t,n,r,i,s,o,u,f){this._active&&this._newPath();for(var l=this._ctx.createRadialGradient(r,i,s,o,u,f),c=0,h=t.length;h>c;c++)l.addColorStop(n[c],t[c]);return this._strokeInstructions=[new e(this._setProp,["strokeStyle",l],!1)],this},r.beginBitmapStroke=function(t,n){this._active&&this._newPath(),n=n||"";var r=this._ctx.createPattern(t,n);return this._strokeInstructions=[new e(this._setProp,["strokeStyle",r],!1)],this},r.endStroke=function(){return this.beginStroke(),this},r.curveTo=r.quadraticCurveTo,r.drawRect=r.rect,r.drawRoundRect=function(e,t,n,r,i){return this.drawRoundRectComplex(e,t,n,r,i,i,i,i),this},r.drawRoundRectComplex=function(t,n,r,i,s,o,u,f){var l=(i>r?r:i)/2,c=0,h=0,p=0,d=0;0>s&&(s*=c=-1),s>l&&(s=l),0>o&&(o*=h=-1),o>l&&(o=l),0>u&&(u*=p=-1),u>l&&(u=l),0>f&&(f*=d=-1),f>l&&(f=l),this._dirty=this._active=!0;var v=this._ctx.arcTo,m=this._ctx.lineTo;return this._activeInstructions.push(new e(this._ctx.moveTo,[t+r-o,n]),new e(v,[t+r+o*h,n-o*h,t+r,n+o,o]),new e(m,[t+r,n+i-u]),new e(v,[t+r+u*p,n+i+u*p,t+r-u,n+i,u]),new e(m,[t+f,n+i]),new e(v,[t-f*d,n+i+f*d,t,n+i-f,f]),new e(m,[t,n+s]),new e(v,[t-s*c,n-s*c,t+s,n,s]),new e(this._ctx.closePath)),this},r.drawCircle=function(e,t,n){return this.arc(e,t,n,0,2*Math.PI),this},r.drawEllipse=function(t,n,r,i){this._dirty=this._active=!0;var s=.5522848,o=r/2*s,u=i/2*s,f=t+r,l=n+i,c=t+r/2,h=n+i/2;return this._activeInstructions.push(new e(this._ctx.moveTo,[t,h]),new e(this._ctx.bezierCurveTo,[t,h-u,c-o,n,c,n]),new e(this._ctx.bezierCurveTo,[c+o,n,f,h-u,f,h]),new e(this._ctx.bezierCurveTo,[f,h+u,c+o,l,c,l]),new e(this._ctx.bezierCurveTo,[c-o,l,t,h+u,t,h])),this},r.inject=function(t,n){return this._dirty=this._active=!0,this._activeInstructions.push(new e(t,[n])),this},r.drawPolyStar=function(t,n,r,i,s,o){this._dirty=this._active=!0,null==s&&(s=0),s=1-s,null==o?o=0:o/=180/Math.PI;var u=Math.PI/i;this._activeInstructions.push(new e(this._ctx.moveTo,[t+Math.cos(o)*r,n+Math.sin(o)*r]));for(var f=0;i>f;f++)o+=u,1!=s&&this._activeInstructions.push(new e(this._ctx.lineTo,[t+Math.cos(o)*r*s,n+Math.sin(o)*r*s])),o+=u,this._activeInstructions.push(new e(this._ctx.lineTo,[t+Math.cos(o)*r,n+Math.sin(o)*r]));return this},r.decodePath=function(e){for(var t=[this.moveTo,this.lineTo,this.quadraticCurveTo,this.bezierCurveTo,this.closePath],r=[2,2,4,6,0],i=0,s=e.length,o=[],u=0,a=0,f=n.BASE_64;s>i;){var l=e.charAt(i),c=f[l],h=c>>3,p=t[h];if(!p||3&c)throw"bad path data (@"+i+"): "+l;var d=r[h];h||(u=a=0),o.length=0,i++;for(var v=(1&c>>2)+2,m=0;d>m;m++){var g=f[e.charAt(i)],y=g>>5?-1:1;g=(31&g)<<6|f[e.charAt(i+1)],3==v&&(g=g<<6|f[e.charAt(i+2)]),g=y*g/10,m%2?u=g+=u:a=g+=a,o[m]=g,i+=v}p.apply(this,o)}return this},r.clone=function(){var e=new n;return e._instructions=this._instructions.slice(),e._activeInstructions=this._activeInstructions.slice(),e._oldInstructions=this._oldInstructions.slice(),this._fillInstructions&&(e._fillInstructions=this._fillInstructions.slice()),this._strokeInstructions&&(e._strokeInstructions=this._strokeInstructions.slice()),this._strokeStyleInstructions&&(e._strokeStyleInstructions=this._strokeStyleInstructions.slice()),e._active=this._active,e._dirty=this._dirty,e._fillMatrix=this._fillMatrix,e._strokeIgnoreScale=this._strokeIgnoreScale,e},r.toString=function(){return"[Graphics]"},r.mt=r.moveTo,r.lt=r.lineTo,r.at=r.arcTo,r.bt=r.bezierCurveTo,r.qt=r.quadraticCurveTo,r.a=r.arc,r.r=r.rect,r.cp=r.closePath,r.c=r.clear,r.f=r.beginFill,r.lf=r.beginLinearGradientFill,r.rf=r.beginRadialGradientFill,r.bf=r.beginBitmapFill,r.ef=r.endFill,r.ss=r.setStrokeStyle,r.s=r.beginStroke,r.ls=r.beginLinearGradientStroke,r.rs=r.beginRadialGradientStroke,r.bs=r.beginBitmapStroke,r.es=r.endStroke,r.dr=r.drawRect,r.rr=r.drawRoundRect,r.rc=r.drawRoundRectComplex,r.dc=r.drawCircle,r.de=r.drawEllipse,r.dp=r.drawPolyStar,r.p=r.decodePath,r._updateInstructions=function(){this._instructions=this._oldInstructions.slice(),this._instructions.push(n.beginCmd),this._appendInstructions(this._fillInstructions),this._appendInstructions(this._strokeInstructions),this._appendInstructions(this._strokeInstructions&&this._strokeStyleInstructions),this._appendInstructions(this._activeInstructions),this._fillInstructions&&this._appendDraw(n.fillCmd,this._fillMatrix),this._strokeInstructions&&this._appendDraw(n.strokeCmd,this._strokeIgnoreScale&&[1,0,0,1,0,0])},r._appendInstructions=function(e){e&&this._instructions.push.apply(this._instructions,e)},r._appendDraw=function(t,n){n?this._instructions.push(new e(this._ctx.save,[],!1),new e(this._ctx.transform,n,!1),t,new e(this._ctx.restore,[],!1)):this._instructions.push(t)},r._newPath=function(){this._dirty&&this._updateInstructions(),this._oldInstructions=this._instructions,this._activeInstructions=[],this._active=this._dirty=!1},r._setProp=function(e,t){this[e]=t},t.Graphics=n}(),!function(){var e=function(){this.initialize()},n=e.prototype=new t.EventDispatcher;e._MOUSE_EVENTS=["click","dblclick","mousedown","mouseout","mouseover","pressmove","pressup","rollout","rollover"],e.suppressCrossDomainErrors=!1;var r=t.createCanvas?t.createCanvas():document.createElement("canvas");r.getContext&&(e._hitTestCanvas=r,e._hitTestContext=r.getContext("2d"),r.width=r.height=1),e._nextCacheID=1,n.alpha=1,n.cacheCanvas=null,n.id=-1,n.mouseEnabled=!0,n.tickEnabled=!0,n.name=null,n.parent=null,n.regX=0,n.regY=0,n.rotation=0,n.scaleX=1,n.scaleY=1,n.skewX=0,n.skewY=0,n.shadow=null,n.visible=!0,n.x=0,n.y=0,n.compositeOperation=null,n.snapToPixel=!1,n.filters=null,n.cacheID=0,n.mask=null,n.hitArea=null,n.cursor=null,n._cacheOffsetX=0,n._cacheOffsetY=0,n._cacheScale=1,n._cacheDataURLID=0,n._cacheDataURL=null,n._matrix=null,n._rectangle=null,n._bounds=null,n.initialize=function(){this.id=t.UID.get(),this._matrix=new t.Matrix2D,this._rectangle=new t.Rectangle},n.isVisible=function(){return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY)},n.draw=function(e,t){var n=this.cacheCanvas;if(t||!n)return!1;var r,i=this._cacheScale,s=this._cacheOffsetX,o=this._cacheOffsetY;return(r=this._applyFilterBounds(s,o,0,0))&&(s=r.x,o=r.y),e.drawImage(n,s,o,n.width/i,n.height/i),!0},n.updateContext=function(e){var n,r=this.mask,i=this;r&&r.graphics&&!r.graphics.isEmpty()&&(n=r.getMatrix(r._matrix),e.transform(n.a,n.b,n.c,n.d,n.tx,n.ty),r.graphics.drawAsPath(e),e.clip(),n.invert(),e.transform(n.a,n.b,n.c,n.d,n.tx,n.ty)),n=i._matrix.identity().appendTransform(i.x,i.y,i.scaleX,i.scaleY,i.rotation,i.skewX,i.skewY,i.regX,i.regY),t.Stage._snapToPixelEnabled&&i.snapToPixel?e.transform(n.a,n.b,n.c,n.d,0|n.tx+.5,0|n.ty+.5):e.transform(n.a,n.b,n.c,n.d,n.tx,n.ty),e.globalAlpha*=i.alpha,i.compositeOperation&&(e.globalCompositeOperation=i.compositeOperation),i.shadow&&this._applyShadow(e,i.shadow)},n.cache=function(e,n,r,i,s){s=s||1,this.cacheCanvas||(this.cacheCanvas=t.createCanvas?t.createCanvas():document.createElement("canvas")),this._cacheWidth=r,this._cacheHeight=i,this._cacheOffsetX=e,this._cacheOffsetY=n,this._cacheScale=s,this.updateCache()},n.updateCache=function(t){var n,r=this.cacheCanvas,i=this._cacheScale,s=this._cacheOffsetX*i,o=this._cacheOffsetY*i,u=this._cacheWidth,f=this._cacheHeight;if(!r)throw"cache() must be called before updateCache()";var l=r.getContext("2d");(n=this._applyFilterBounds(s,o,u,f))&&(s=n.x,o=n.y,u=n.width,f=n.height),u=Math.ceil(u*i),f=Math.ceil(f*i),u!=r.width||f!=r.height?(r.width=u,r.height=f):t||l.clearRect(0,0,u+1,f+1),l.save(),l.globalCompositeOperation=t,l.setTransform(i,0,0,i,-s,-o),this.draw(l,!0),this._applyFilters(),l.restore(),this.cacheID=e._nextCacheID++},n.uncache=function(){this._cacheDataURL=this.cacheCanvas=null,this.cacheID=this._cacheOffsetX=this._cacheOffsetY=0,this._cacheScale=1},n.getCacheDataURL=function(){return this.cacheCanvas?(this.cacheID!=this._cacheDataURLID&&(this._cacheDataURL=this.cacheCanvas.toDataURL()),this._cacheDataURL):null},n.getStage=function(){for(var e=this;e.parent;)e=e.parent;return e instanceof t.Stage?e:null},n.localToGlobal=function(e,n){var r=this.getConcatenatedMatrix(this._matrix);return null==r?null:(r.append(1,0,0,1,e,n),new t.Point(r.tx,r.ty))},n.globalToLocal=function(e,n){var r=this.getConcatenatedMatrix(this._matrix);return null==r?null:(r.invert(),r.append(1,0,0,1,e,n),new t.Point(r.tx,r.ty))},n.localToLocal=function(e,t,n){var r=this.localToGlobal(e,t);return n.globalToLocal(r.x,r.y)},n.setTransform=function(e,t,n,r,i,s,o,u,a){return this.x=e||0,this.y=t||0,this.scaleX=null==n?1:n,this.scaleY=null==r?1:r,this.rotation=i||0,this.skewX=s||0,this.skewY=o||0,this.regX=u||0,this.regY=a||0,this},n.getMatrix=function(e){var n=this;return(e?e.identity():new t.Matrix2D).appendTransform(n.x,n.y,n.scaleX,n.scaleY,n.rotation,n.skewX,n.skewY,n.regX,n.regY).appendProperties(n.alpha,n.shadow,n.compositeOperation)},n.getConcatenatedMatrix=function(e){e?e.identity():e=new t.Matrix2D;for(var n=this;null!=n;)e.prependTransform(n.x,n.y,n.scaleX,n.scaleY,n.rotation,n.skewX,n.skewY,n.regX,n.regY).prependProperties(n.alpha,n.shadow,n.compositeOperation),n=n.parent;return e},n.hitTest=function(t,n){var r=e._hitTestContext;r.setTransform(1,0,0,1,-t,-n),this.draw(r);var i=this._testHit(r);return r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,2,2),i},n.set=function(e){for(var t in e)this[t]=e[t];return this},n.getBounds=function(){if(this._bounds)return this._rectangle.copy(this._bounds);var e=this.cacheCanvas;if(e){var t=this._cacheScale;return this._rectangle.initialize(this._cacheOffsetX,this._cacheOffsetY,e.width/t,e.height/t)}return null},n.getTransformedBounds=function(){return this._getBounds()},n.setBounds=function(e,n,r,i){null==e&&(this._bounds=e),this._bounds=(this._bounds||new t.Rectangle).initialize(e,n,r,i)},n.clone=function(){var t=new e;return this.cloneProps(t),t},n.toString=function(){return"[DisplayObject (name="+this.name+")]"},n.cloneProps=function(e){e.alpha=this.alpha,e.name=this.name,e.regX=this.regX,e.regY=this.regY,e.rotation=this.rotation,e.scaleX=this.scaleX,e.scaleY=this.scaleY,e.shadow=this.shadow,e.skewX=this.skewX,e.skewY=this.skewY,e.visible=this.visible,e.x=this.x,e.y=this.y,e._bounds=this._bounds,e.mouseEnabled=this.mouseEnabled,e.compositeOperation=this.compositeOperation},n._applyShadow=function(e,t){t=t||Shadow.identity,e.shadowColor=t.color,e.shadowOffsetX=t.offsetX,e.shadowOffsetY=t.offsetY,e.shadowBlur=t.blur},n._tick=function(e){var n=this._listeners;if(n&&n.tick){var r=new t.Event("tick");r.params=e,this._dispatchEvent(r,this,2)}},n._testHit=function(t){try{var n=t.getImageData(0,0,1,1).data[3]>1}catch(r){if(!e.suppressCrossDomainErrors)throw"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images."}return n},n._applyFilters=function(){if(this.filters&&0!=this.filters.length&&this.cacheCanvas)for(var e=this.filters.length,t=this.cacheCanvas.getContext("2d"),n=this.cacheCanvas.width,r=this.cacheCanvas.height,i=0;e>i;i++)this.filters[i].applyFilter(t,0,0,n,r)},n._applyFilterBounds=function(e,t,n,r){var i,s,o=this.filters;if(!o||!(s=o.length))return null;for(var u=0;s>u;u++){var a=this.filters[u],f=a.getBounds&&a.getBounds();f&&(i||(i=this._rectangle.initialize(e,t,n,r)),i.x+=f.x,i.y+=f.y,i.width+=f.width,i.height+=f.height)}return i},n._getBounds=function(e,t){return this._transformBounds(this.getBounds(),e,t)},n._transformBounds=function(e,t,n){if(!e)return e;var r=e.x,i=e.y,s=e.width,o=e.height,u=n?this._matrix.identity():this.getMatrix(this._matrix);(r||i)&&u.appendTransform(0,0,1,1,0,0,0,-r,-i),t&&u.prependMatrix(t);var a=s*u.a,f=s*u.b,l=o*u.c,c=o*u.d,h=u.tx,p=u.ty,d=h,v=h,m=p,g=p;return(r=a+h)<d?d=r:r>v&&(v=r),(r=a+l+h)<d?d=r:r>v&&(v=r),(r=l+h)<d?d=r:r>v&&(v=r),(i=f+p)<m?m=i:i>g&&(g=i),(i=f+c+p)<m?m=i:i>g&&(g=i),(i=c+p)<m?m=i:i>g&&(g=i),e.initialize(d,m,v-d,g-m)},n._hasMouseEventListener=function(){for(var t=e._MOUSE_EVENTS,n=0,r=t.length;r>n;n++)if(this.hasEventListener(t[n]))return!0;return!!this.cursor},t.DisplayObject=e}(),!function(){var e=function(){this.initialize()},n=e.prototype=new t.DisplayObject;n.children=null,n.mouseChildren=!0,n.tickChildren=!0,n.DisplayObject_initialize=n.initialize,n.initialize=function(){this.DisplayObject_initialize(),this.children=[]},n.isVisible=function(){var e=this.cacheCanvas||this.children.length;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&e)},n.DisplayObject_draw=n.draw,n.draw=function(e,t){if(this.DisplayObject_draw(e,t))return!0;for(var n=this.children.slice(0),r=0,i=n.length;i>r;r++){var s=n[r];s.isVisible()&&(e.save(),s.updateContext(e),s.draw(e),e.restore())}return!0},n.addChild=function(e){if(null==e)return e;var t=arguments.length;if(t>1){for(var n=0;t>n;n++)this.addChild(arguments[n]);return arguments[t-1]}return e.parent&&e.parent.removeChild(e),e.parent=this,this.children.push(e),e},n.addChildAt=function(e,t){var n=arguments.length,r=arguments[n-1];if(0>r||r>this.children.length)return arguments[n-2];if(n>2){for(var i=0;n-1>i;i++)this.addChildAt(arguments[i],r+i);return arguments[n-2]}return e.parent&&e.parent.removeChild(e),e.parent=this,this.children.splice(t,0,e),e},n.removeChild=function(e){var n=arguments.length;if(n>1){for(var r=!0,i=0;n>i;i++)r=r&&this.removeChild(arguments[i]);return r}return this.removeChildAt(t.indexOf(this.children,e))},n.removeChildAt=function(e){var t=arguments.length;if(t>1){for(var n=[],r=0;t>r;r++)n[r]=arguments[r];n.sort(function(e,t){return t-e});for(var i=!0,r=0;t>r;r++)i=i&&this.removeChildAt(n[r]);return i}if(0>e||e>this.children.length-1)return!1;var s=this.children[e];return s&&(s.parent=null),this.children.splice(e,1),!0},n.removeAllChildren=function(){for(var e=this.children;e.length;)e.pop().parent=null},n.getChildAt=function(e){return this.children[e]},n.getChildByName=function(e){for(var t=this.children,n=0,r=t.length;r>n;n++)if(t[n].name==e)return t[n];return null},n.sortChildren=function(e){this.children.sort(e)},n.getChildIndex=function(e){return t.indexOf(this.children,e)},n.getNumChildren=function(){return this.children.length},n.swapChildrenAt=function(e,t){var n=this.children,r=n[e],i=n[t];r&&i&&(n[e]=i,n[t]=r)},n.swapChildren=function(e,t){for(var n,r,i=this.children,s=0,o=i.length;o>s&&(i[s]==e&&(n=s),i[s]==t&&(r=s),null==n||null==r);s++);s!=o&&(i[n]=t,i[r]=e)},n.setChildIndex=function(e,t){var n=this.children,r=n.length;if(!(e.parent!=this||0>t||t>=r)){for(var i=0;r>i&&n[i]!=e;i++);i!=r&&i!=t&&(n.splice(i,1),n.splice(t,0,e))}},n.contains=function(e){for(;e;){if(e==this)return!0;e=e.parent}return!1},n.hitTest=function(e,t){return null!=this.getObjectUnderPoint(e,t)},n.getObjectsUnderPoint=function(e,t){var n=[],r=this.localToGlobal(e,t);return this._getObjectsUnderPoint(r.x,r.y,n),n},n.getObjectUnderPoint=function(e,t){var n=this.localToGlobal(e,t);return this._getObjectsUnderPoint(n.x,n.y)},n.DisplayObject_getBounds=n.getBounds,n.getBounds=function(){return this._getBounds(null,!0)},n.getTransformedBounds=function(){return this._getBounds()},n.clone=function(t){var n=new e;if(this.cloneProps(n),t)for(var r=n.children=[],i=0,s=this.children.length;s>i;i++){var o=this.children[i].clone(t);o.parent=n,r.push(o)}return n},n.toString=function(){return"[Container (name="+this.name+")]"},n.DisplayObject__tick=n._tick,n._tick=function(e){if(this.tickChildren)for(var t=this.children.length-1;t>=0;t--){var n=this.children[t];n.tickEnabled&&n._tick&&n._tick(e)}this.DisplayObject__tick(e)},n._getObjectsUnderPoint=function(n,r,i,s,o){var u=t.DisplayObject._hitTestContext,f=this._matrix;o=o||s&&this._hasMouseEventListener();for(var l=this.children,c=l.length,h=c-1;h>=0;h--){var p=l[h],d=p.hitArea;if(p.visible&&(d||p.isVisible())&&(!s||p.mouseEnabled))if(!d&&p instanceof e){var v=p._getObjectsUnderPoint(n,r,i,s,o);if(!i&&v)return s&&!this.mouseChildren?this:v}else{if(!o&&!p._hasMouseEventListener())continue;if(p.getConcatenatedMatrix(f),d&&(f.appendTransform(d.x,d.y,d.scaleX,d.scaleY,d.rotation,d.skewX,d.skewY,d.regX,d.regY),f.alpha=d.alpha),u.globalAlpha=f.alpha,u.setTransform(f.a,f.b,f.c,f.d,f.tx-n,f.ty-r),(d||p).draw(u),!this._testHit(u))continue;if(u.setTransform(1,0,0,1,0,0),u.clearRect(0,0,2,2),!i)return s&&!this.mouseChildren?this:p;i.push(p)}}return null},n._getBounds=function(e,t){var n=this.DisplayObject_getBounds();if(n)return this._transformBounds(n,e,t);var r,i,s,o,u=t?this._matrix.identity():this.getMatrix(this._matrix);e&&u.prependMatrix(e);for(var a=this.children.length,f=0;a>f;f++){var l=this.children[f];if(l.visible&&(n=l._getBounds(u))){var c=n.x,h=n.y,p=c+n.width,d=h+n.height;(r>c||null==r)&&(r=c),(p>i||null==i)&&(i=p),(s>h||null==s)&&(s=h),(d>o||null==o)&&(o=d)}}return null==i?null:this._rectangle.initialize(r,s,i-r,o-s)},t.Container=e}(),!function(){var e=function(e){this.initialize(e)},n=e.prototype=new t.Container;e._snapToPixelEnabled=!1,n.autoClear=!0,n.canvas=null,n.mouseX=0,n.mouseY=0,n.snapToPixelEnabled=!1,n.mouseInBounds=!1,n.tickOnUpdate=!0,n.mouseMoveOutside=!1,n.nextStage=null,n._pointerData=null,n._pointerCount=0,n._primaryPointerID=null,n._mouseOverIntervalID=null,n.Container_initialize=n.initialize,n.initialize=function(e){this.Container_initialize(),this.canvas="string"==typeof e?document.getElementById(e):e,this._pointerData={},this.enableDOMEvents(!0)},n.update=function(){if(this.canvas){this.tickOnUpdate&&(this.dispatchEvent("tickstart"),this.tickEnabled&&this._tick(arguments.length?arguments:null),this.dispatchEvent("tickend")),this.dispatchEvent("drawstart"),e._snapToPixelEnabled=this.snapToPixelEnabled,this.autoClear&&this.clear();var t=this.canvas.getContext("2d");t.save(),this.updateContext(t),this.draw(t,!1),t.restore(),this.dispatchEvent("drawend")}},n.handleEvent=function(e){"tick"==e.type&&this.update(e)},n.clear=function(){if(this.canvas){var e=this.canvas.getContext("2d");e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)}},n.toDataURL=function(e,t){t||(t="image/png");var n,r=this.canvas.getContext("2d"),i=this.canvas.width,s=this.canvas.height;if(e){n=r.getImageData(0,0,i,s);var o=r.globalCompositeOperation;r.globalCompositeOperation="destination-over",r.fillStyle=e,r.fillRect(0,0,i,s)}var u=this.canvas.toDataURL(t);return e&&(r.clearRect(0,0,i+1,s+1),r.putImageData(n,0,0),r.globalCompositeOperation=o),u},n.enableMouseOver=function(e){if(this._mouseOverIntervalID&&(clearInterval(this._mouseOverIntervalID),this._mouseOverIntervalID=null,0==e&&this._testMouseOver(!0)),null==e)e=20;else if(0>=e)return;var t=this;this._mouseOverIntervalID=setInterval(function(){t._testMouseOver()},1e3/Math.min(50,e))},n.enableDOMEvents=function(e){null==e&&(e=!0);var t,n,r=this._eventListeners;if(!e&&r){for(t in r)n=r[t],n.t.removeEventListener(t,n.f,!1);this._eventListeners=null}else if(e&&!r&&this.canvas){var i=window.addEventListener?window:document,s=this;r=this._eventListeners={},r.mouseup={t:i,f:function(e){s._handleMouseUp(e)}},r.mousemove={t:i,f:function(e){s._handleMouseMove(e)}},r.dblclick={t:this.canvas,f:function(e){s._handleDoubleClick(e)}},r.mousedown={t:this.canvas,f:function(e){s._handleMouseDown(e)}};for(t in r)n=r[t],n.t.addEventListener(t,n.f,!1)}},n.clone=function(){var t=new e(null);return this.cloneProps(t),t},n.toString=function(){return"[Stage (name="+this.name+")]"},n._getElementRect=function(e){var t;try{t=e.getBoundingClientRect()}catch(n){t={top:e.offsetTop,left:e.offsetLeft,width:e.offsetWidth,height:e.offsetHeight}}var r=(window.pageXOffset||document.scrollLeft||0)-(document.clientLeft||document.body.clientLeft||0),i=(window.pageYOffset||document.scrollTop||0)-(document.clientTop||document.body.clientTop||0),s=window.getComputedStyle?getComputedStyle(e):e.currentStyle,o=parseInt(s.paddingLeft)+parseInt(s.borderLeftWidth),u=parseInt(s.paddingTop)+parseInt(s.borderTopWidth),a=parseInt(s.paddingRight)+parseInt(s.borderRightWidth),f=parseInt(s.paddingBottom)+parseInt(s.borderBottomWidth);return{left:t.left+r+o,right:t.right+r-a,top:t.top+i+u,bottom:t.bottom+i-f}},n._getPointerData=function(e){var t=this._pointerData[e];return t||(t=this._pointerData[e]={x:0,y:0},null==this._primaryPointerID&&(this._primaryPointerID=e),(null==this._primaryPointerID||-1==this._primaryPointerID)&&(this._primaryPointerID=e)),t},n._handleMouseMove=function(e){e||(e=window.event),this._handlePointerMove(-1,e,e.pageX,e.pageY)},n._handlePointerMove=function(e,n,r,i){if(this.canvas){var s=this._getPointerData(e),o=s.inBounds;if(this._updatePointerPosition(e,n,r,i),o||s.inBounds||this.mouseMoveOutside){-1==e&&s.inBounds==!o&&this._dispatchMouseEvent(this,o?"mouseleave":"mouseenter",!1,e,s,n),this._dispatchMouseEvent(this,"stagemousemove",!1,e,s,n),this._dispatchMouseEvent(s.target,"pressmove",!0,e,s,n);var u=s.event;u&&u.hasEventListener("mousemove")&&u.dispatchEvent(new t.MouseEvent("mousemove",!1,!1,s.x,s.y,n,e,e==this._primaryPointerID,s.rawX,s.rawY),s.target),this.nextStage&&this.nextStage._handlePointerMove(e,n,r,i)}}},n._updatePointerPosition=function(e,t,n,r){var i=this._getElementRect(this.canvas);n-=i.left,r-=i.top;var s=this.canvas.width,o=this.canvas.height;n/=(i.right-i.left)/s,r/=(i.bottom-i.top)/o;var u=this._getPointerData(e);(u.inBounds=n>=0&&r>=0&&s-1>=n&&o-1>=r)?(u.x=n,u.y=r):this.mouseMoveOutside&&(u.x=0>n?0:n>s-1?s-1:n,u.y=0>r?0:r>o-1?o-1:r),u.posEvtObj=t,u.rawX=n,u.rawY=r,e==this._primaryPointerID&&(this.mouseX=u.x,this.mouseY=u.y,this.mouseInBounds=u.inBounds)},n._handleMouseUp=function(e){this._handlePointerUp(-1,e,!1)},n._handlePointerUp=function(e,n,r){var i=this._getPointerData(e);this._dispatchMouseEvent(this,"stagemouseup",!1,e,i,n);var s=i.target;s&&(this._getObjectsUnderPoint(i.x,i.y,null,!0)==s&&this._dispatchMouseEvent(s,"click",!0,e,i,n),this._dispatchMouseEvent(s,"pressup",!0,e,i,n));var o=i.event;o&&o.hasEventListener("mouseup")&&o.dispatchEvent(new t.MouseEvent("mouseup",!1,!1,i.x,i.y,n,e,e==this._primaryPointerID,i.rawX,i.rawY),s),r?(e==this._primaryPointerID&&(this._primaryPointerID=null),delete this._pointerData[e]):i.event=i.target=null,this.nextStage&&this.nextStage._handlePointerUp(e,n,r)},n._handleMouseDown=function(e){this._handlePointerDown(-1,e,e.pageX,e.pageY)},n._handlePointerDown=function(e,t,n,r){null!=r&&this._updatePointerPosition(e,t,n,r);var i=this._getPointerData(e);this._dispatchMouseEvent(this,"stagemousedown",!1,e,i,t),i.target=this._getObjectsUnderPoint(i.x,i.y,null,!0),i.event=this._dispatchMouseEvent(i.target,"mousedown",!0,e,i,t),this.nextStage&&this.nextStage._handlePointerDown(e,t,n,r)},n._testMouseOver=function(e){if(-1==this._primaryPointerID&&(e||this.mouseX!=this._mouseOverX||this.mouseY!=this._mouseOverY||!this.mouseInBounds)){var t,n,r,i,s=this._getPointerData(-1),o=s.posEvtObj,u=-1,a="";(e||this.mouseInBounds&&o&&o.target==this.canvas)&&(t=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,!0),this._mouseOverX=this.mouseX,this._mouseOverY=this.mouseY);var f=this._mouseOverTarget||[],l=f[f.length-1],c=this._mouseOverTarget=[];for(n=t;n;)c.unshift(n),null!=n.cursor&&(a=n.cursor),n=n.parent;for(this.canvas.style.cursor=a,r=0,i=c.length;i>r&&c[r]==f[r];r++)u=r;for(l!=t&&this._dispatchMouseEvent(l,"mouseout",!0,-1,s,o),r=f.length-1;r>u;r--)this._dispatchMouseEvent(f[r],"rollout",!1,-1,s,o);for(r=c.length-1;r>u;r--)this._dispatchMouseEvent(c[r],"rollover",!1,-1,s,o);l!=t&&this._dispatchMouseEvent(t,"mouseover",!0,-1,s,o)}},n._handleDoubleClick=function(e){var t=this._getPointerData(-1),n=this._getObjectsUnderPoint(t.x,t.y,null,!0);this._dispatchMouseEvent(n,"dblclick",!0,-1,t,e),this.nextStage&&this.nextStage._handleDoubleClick(e)},n._dispatchMouseEvent=function(e,n,r,i,s,o){if(e&&(r||e.hasEventListener(n))){var u=new t.MouseEvent(n,r,!1,s.x,s.y,o,i,i==this._primaryPointerID,s.rawX,s.rawY);return e.dispatchEvent(u),u}},t.Stage=e}(),!function(){var e=function(e){this.initialize(e)},n=e.prototype=new t.DisplayObject;n.image=null,n.snapToPixel=!0,n.sourceRect=null,n.DisplayObject_initialize=n.initialize,n.initialize=function(e){this.DisplayObject_initialize(),"string"==typeof e?(this.image=document.createElement("img"),this.image.src=e):this.image=e},n.isVisible=function(){var e=this.cacheCanvas||this.image&&(this.image.complete||this.image.getContext||this.image.readyState>=2);return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&e)},n.DisplayObject_draw=n.draw,n.draw=function(e,t){if(this.DisplayObject_draw(e,t))return!0;var n=this.sourceRect;return n?e.drawImage(this.image,n.x,n.y,n.width,n.height,0,0,n.width,n.height):e.drawImage(this.image,0,0),!0},n.DisplayObject_getBounds=n.getBounds,n.getBounds=function(){var e=this.DisplayObject_getBounds();if(e)return e;var t=this.sourceRect||this.image,n=this.image&&(this.image.complete||this.image.getContext||this.image.readyState>=2);return n?this._rectangle.initialize(0,0,t.width,t.height):null},n.clone=function(){var t=new e(this.image);return this.sourceRect&&(t.sourceRect=this.sourceRect.clone()),this.cloneProps(t),t},n.toString=function(){return"[Bitmap (name="+this.name+")]"},t.Bitmap=e}(),!function(){var e=function(e,t){this.initialize(e,t)},n=e.prototype=new t.DisplayObject;n.currentFrame=0,n.currentAnimation=null,n.paused=!0,n.spriteSheet=null,n.snapToPixel=!0,n.offset=0,n.currentAnimationFrame=0,n.framerate=0,n._advanceCount=0,n._animation=null,n._currentFrame=null,n.DisplayObject_initialize=n.initialize,n.initialize=function(e,t){this.DisplayObject_initialize(),this.spriteSheet=e,t&&this.gotoAndPlay(t)},n.isVisible=function(){var e=this.cacheCanvas||this.spriteSheet.complete;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&e)},n.DisplayObject_draw=n.draw,n.draw=function(e,t){if(this.DisplayObject_draw(e,t))return!0;this._normalizeFrame();var n=this.spriteSheet.getFrame(0|this._currentFrame);if(!n)return!1;var r=n.rect;return e.drawImage(n.image,r.x,r.y,r.width,r.height,-n.regX,-n.regY,r.width,r.height),!0},n.play=function(){this.paused=!1},n.stop=function(){this.paused=!0},n.gotoAndPlay=function(e){this.paused=!1,this._goto(e)},n.gotoAndStop=function(e){this.paused=!0,this._goto(e)},n.advance=function(e){var t=this._animation&&this._animation.speed||1,n=this.framerate||this.spriteSheet.framerate,r=n&&null!=e?e/(1e3/n):1;this._animation?this.currentAnimationFrame+=r*t:this._currentFrame+=r*t,this._normalizeFrame()},n.DisplayObject_getBounds=n.getBounds,n.getBounds=function(){return this.DisplayObject_getBounds()||this.spriteSheet.getFrameBounds(this.currentFrame,this._rectangle)},n.clone=function(){var t=new e(this.spriteSheet);return this.cloneProps(t),t},n.toString=function(){return"[Sprite (name="+this.name+")]"},n.DisplayObject__tick=n._tick,n._tick=function(e){this.paused||this.advance(e&&e[0]&&e[0].delta),this.DisplayObject__tick(e)},n._normalizeFrame=function(){var e,t=this._animation,n=this.paused,r=this._currentFrame,i=this.currentAnimationFrame;if(t)if(e=t.frames.length,(0|i)>=e){var s=t.next;if(!this._dispatchAnimationEnd(t,r,n,s,e-1)){if(s)return this._goto(s,i-e);this.paused=!0,i=this.currentAnimationFrame=t.frames.length-1,this._currentFrame=t.frames[i]}}else this._currentFrame=t.frames[0|i];else if(e=this.spriteSheet.getNumFrames(),r>=e&&!this._dispatchAnimationEnd(t,r,n,e-1)&&(this._currentFrame-=e)>=e)return this._normalizeFrame();this.currentFrame=0|this._currentFrame},n._dispatchAnimationEnd=function(e,n,r,i,s){var o=e?e.name:null;if(this.hasEventListener("animationend")){var u=new t.Event("animationend");u.name=o,u.next=i,this.dispatchEvent(u)}var a=this._animation!=e||this._currentFrame!=n;return a||r||!this.paused||(this.currentAnimationFrame=s,a=!0),a},n.DisplayObject_cloneProps=n.cloneProps,n.cloneProps=function(e){this.DisplayObject_cloneProps(e),e.currentFrame=this.currentFrame,e._currentFrame=this._currentFrame,e.currentAnimation=this.currentAnimation,e.paused=this.paused,e._animation=this._animation,e.currentAnimationFrame=this.currentAnimationFrame,e.framerate=this.framerate},n._goto=function(e,t){if(isNaN(e)){var n=this.spriteSheet.getAnimation(e);n&&(this.currentAnimationFrame=t||0,this._animation=n,this.currentAnimation=e,this._normalizeFrame())}else this.currentAnimationFrame=0,this.currentAnimation=this._animation=null,this._currentFrame=e,this._normalizeFrame()},t.Sprite=e}(),!function(){var e="BitmapAnimation is deprecated in favour of Sprite. See VERSIONS file for info on changes.";if(!t.Sprite)throw e;(t.BitmapAnimation=function(t){console.log(e),this.initialize(t)}).prototype=new t.Sprite}(),!function(){var e=function(e){this.initialize(e)},n=e.prototype=new t.DisplayObject;n.graphics=null,n.DisplayObject_initialize=n.initialize,n.initialize=function(e){this.DisplayObject_initialize(),this.graphics=e?e:new t.Graphics},n.isVisible=function(){var e=this.cacheCanvas||this.graphics&&!this.graphics.isEmpty();return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&e)},n.DisplayObject_draw=n.draw,n.draw=function(e,t){return this.DisplayObject_draw(e,t)?!0:(this.graphics.draw(e),!0)},n.clone=function(t){var n=new e(t&&this.graphics?this.graphics.clone():this.graphics);return this.cloneProps(n),n},n.toString=function(){return"[Shape (name="+this.name+")]"},t.Shape=e}(),!function(){var e=function(e,t,n){this.initialize(e,t,n)},n=e.prototype=new t.DisplayObject,r=t.createCanvas?t.createCanvas():document.createElement("canvas");r.getContext&&(e._workingContext=r.getContext("2d"),r.width=r.height=1),e.H_OFFSETS={start:0,left:0,center:-0.5,end:-1,right:-1},e.V_OFFSETS={top:0,hanging:-0.01,middle:-0.4,alphabetic:-0.8,ideographic:-0.85,bottom:-1},n.text="",n.font=null,n.color=null,n.textAlign="left",n.textBaseline="top",n.maxWidth=null,n.outline=0,n.lineHeight=0,n.lineWidth=null,n.DisplayObject_initialize=n.initialize,n.initialize=function(e,t,n){this.DisplayObject_initialize(),this.text=e,this.font=t,this.color=n},n.isVisible=function(){var e=this.cacheCanvas||null!=this.text&&""!==this.text;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&e)},n.DisplayObject_draw=n.draw,n.draw=function(e,t){if(this.DisplayObject_draw(e,t))return!0;var n=this.color||"#000";return this.outline?(e.strokeStyle=n,e.lineWidth=1*this.outline):e.fillStyle=n,this._drawText(this._prepContext(e)),!0},n.getMeasuredWidth=function(){return this._prepContext(e._workingContext).measureText(this.text).width},n.getMeasuredLineHeight=function(){return 1.2*this._prepContext(e._workingContext).measureText("M").width},n.getMeasuredHeight=function(){return this._drawText(null,{}).height},n.DisplayObject_getBounds=n.getBounds,n.getBounds=function(){var t=this.DisplayObject_getBounds();if(t)return t;if(null==this.text||""==this.text)return null;var n=this._drawText(null,{}),r=this.maxWidth&&this.maxWidth<n.width?this.maxWidth:n.width,i=r*e.H_OFFSETS[this.textAlign||"left"],s=this.lineHeight||this.getMeasuredLineHeight(),o=s*e.V_OFFSETS[this.textBaseline||"top"];return this._rectangle.initialize(i,o,r,n.height)},n.clone=function(){var t=new e(this.text,this.font,this.color);return this.cloneProps(t),t},n.toString=function(){return"[Text (text="+(this.text.length>20?this.text.substr(0,17)+"...":this.text)+")]"},n.DisplayObject_cloneProps=n.cloneProps,n.cloneProps=function(e){this.DisplayObject_cloneProps(e),e.textAlign=this.textAlign,e.textBaseline=this.textBaseline,e.maxWidth=this.maxWidth,e.outline=this.outline,e.lineHeight=this.lineHeight,e.lineWidth=this.lineWidth},n._prepContext=function(e){return e.font=this.font,e.textAlign=this.textAlign||"left",e.textBaseline=this.textBaseline||"top",e},n._drawText=function(t,n){var r=!!t;r||(t=this._prepContext(e._workingContext));for(var i=this.lineHeight||this.getMeasuredLineHeight(),s=0,o=0,u=String(this.text).split(/(?:\r\n|\r|\n)/),f=0,l=u.length;l>f;f++){var c=u[f],h=null;if(null!=this.lineWidth&&(h=t.measureText(c).width)>this.lineWidth){var p=c.split(/(\s)/);c=p[0],h=t.measureText(c).width;for(var d=1,v=p.length;v>d;d+=2){var m=t.measureText(p[d]+p[d+1]).width;h+m>this.lineWidth?(r&&this._drawTextLine(t,c,o*i),h>s&&(s=h),c=p[d+1],h=t.measureText(c).width,o++):(c+=p[d]+p[d+1],h+=m)}}r&&this._drawTextLine(t,c,o*i),n&&null==h&&(h=t.measureText(c).width),h>s&&(s=h),o++}return n&&(n.count=o,n.width=s,n.height=o*i),n},n._drawTextLine=function(e,t,n){this.outline?e.strokeText(t,0,n,this.maxWidth||65535):e.fillText(t,0,n,this.maxWidth||65535)},t.Text=e}(),!function(){function e(e,t){this.initialize(e,t)}var n=e.prototype=new t.DisplayObject;n.text="",n.spriteSheet=null,n.lineHeight=0,n.letterSpacing=0,n.spaceWidth=0,n.DisplayObject_initialize=n.initialize,n.initialize=function(e,t){this.DisplayObject_initialize(),this.text=e,this.spriteSheet=t},n.DisplayObject_draw=n.draw,n.draw=function(e,t){return this.DisplayObject_draw(e,t)?!0:(this._drawText(e),void 0)},n.isVisible=function(){var e=this.cacheCanvas||this.spriteSheet&&this.spriteSheet.complete&&this.text;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&e)},n.getBounds=function(){var e=this._rectangle;return this._drawText(null,e),e.width?e:null},n._getFrame=function(e,t){var n,r=t.getAnimation(e);return r||(e!=(n=e.toUpperCase())||e!=(n=e.toLowerCase())||(n=null),n&&(r=t.getAnimation(n))),r&&t.getFrame(r.frames[0])},n._getLineHeight=function(e){var t=this._getFrame("1",e)||this._getFrame("T",e)||this._getFrame("L",e)||e.getFrame(0);return t?t.rect.height:1},n._getSpaceWidth=function(e){var t=this._getFrame("1",e)||this._getFrame("l",e)||this._getFrame("e",e)||this._getFrame("a",e)||e.getFrame(0);return t?t.rect.width:1},n._drawText=function(e,t){var n,r,i,s=0,o=0,u=this.spaceWidth,a=this.lineHeight,f=this.spriteSheet,l=!!this._getFrame(" ",f);l||0!=u||(u=this._getSpaceWidth(f)),0==a&&(a=this._getLineHeight(f));for(var c=0,h=0,p=this.text.length;p>h;h++){var d=this.text.charAt(h);if(l||" "!=d)if("\n"!=d&&"\r"!=d){var v=this._getFrame(d,f);if(v){var m=v.rect;i=v.regX,n=m.width,e&&e.drawImage(v.image,m.x,m.y,n,r=m.height,s-i,o-v.regY,n,r),s+=n+this.letterSpacing}}else"\r"==d&&"\n"==this.text.charAt(h+1)&&h++,s-i>c&&(c=s-i),s=0,o+=a;else s+=u}s-i>c&&(c=s-i),t&&(t.width=c-this.letterSpacing,t.height=o+a)},t.BitmapText=e}(),!function(){var e=function(){throw"SpriteSheetUtils cannot be instantiated"},n=t.createCanvas?t.createCanvas():document.createElement("canvas");n.getContext&&(e._workingCanvas=n,e._workingContext=n.getContext("2d"),n.width=n.height=1),e.addFlippedFrames=function(t,n,r,i){if(n||r||i){var s=0;n&&e._flip(t,++s,!0,!1),r&&e._flip(t,++s,!1,!0),i&&e._flip(t,++s,!0,!0)}},e.extractFrame=function(t,n){isNaN(n)&&(n=t.getAnimation(n).frames[0]);var r=t.getFrame(n);if(!r)return null;var i=r.rect,s=e._workingCanvas;s.width=i.width,s.height=i.height,e._workingContext.drawImage(r.image,i.x,i.y,i.width,i.height,0,0,i.width,i.height);var o=document.createElement("img");return o.src=s.toDataURL("image/png"),o},e.mergeAlpha=function(e,n,r){r||(r=t.createCanvas?t.createCanvas():document.createElement("canvas")),r.width=Math.max(n.width,e.width),r.height=Math.max(n.height,e.height);var i=r.getContext("2d");return i.save(),i.drawImage(e,0,0),i.globalCompositeOperation="destination-in",i.drawImage(n,0,0),i.restore(),r},e._flip=function(t,n,r,i){for(var s=t._images,o=e._workingCanvas,u=e._workingContext,f=s.length/n,l=0;f>l;l++){var c=s[l];c.__tmp=l,u.setTransform(1,0,0,1,0,0),u.clearRect(0,0,o.width+1,o.height+1),o.width=c.width,o.height=c.height,u.setTransform(r?-1:1,0,0,i?-1:1,r?c.width:0,i?c.height:0),u.drawImage(c,0,0);var h=document.createElement("img");h.src=o.toDataURL("image/png"),h.width=c.width,h.height=c.height,s.push(h)}var p=t._frames,d=p.length/n;for(l=0;d>l;l++){c=p[l];var v=c.rect.clone();h=s[c.image.__tmp+f*n];var m={image:h,rect:v,regX:c.regX,regY:c.regY};r&&(v.x=h.width-v.x-v.width,m.regX=v.width-c.regX),i&&(v.y=h.height-v.y-v.height,m.regY=v.height-c.regY),p.push(m)}var g="_"+(r?"h":"")+(i?"v":""),y=t._animations,b=t._data,w=y.length/n;for(l=0;w>l;l++){var E=y[l];c=b[E];var S={name:E+g,speed:c.speed,next:c.next,frames:[]};c.next&&(S.next+=g),p=c.frames;for(var x=0,T=p.length;T>x;x++)S.frames.push(p[x]+d*n);b[S.name]=S,y.push(S.name)}},t.SpriteSheetUtils=e}(),!function(){var e=function(){this.initialize()},n=e.prototype=new t.EventDispatcher;e.ERR_DIMENSIONS="frame dimensions exceed max spritesheet dimensions",e.ERR_RUNNING="a build is already running",n.maxWidth=2048,n.maxHeight=2048,n.spriteSheet=null,n.scale=1,n.padding=1,n.timeSlice=.3,n.progress=-1,n._frames=null,n._animations=null,n._data=null,n._nextFrameIndex=0,n._index=0,n._timerID=null,n._scale=1,n.initialize=function(){this._frames=[],this._animations={}},n.addFrame=function(t,n,r,i,s,o){if(this._data)throw e.ERR_RUNNING;var u=n||t.bounds||t.nominalBounds;return!u&&t.getBounds&&(u=t.getBounds()),u?(r=r||1,this._frames.push({source:t,sourceRect:u,scale:r,funct:i,params:s,scope:o,index:this._frames.length,height:u.height*r})-1):null},n.addAnimation=function(t,n,r,i){if(this._data)throw e.ERR_RUNNING;this._animations[t]={frames:n,next:r,frequency:i}},n.addMovieClip=function(t,n,r){if(this._data)throw e.ERR_RUNNING;var i=t.frameBounds,s=n||t.bounds||t.nominalBounds;if(!s&&t.getBounds&&(s=t.getBounds()),!s&&!i)return null;for(var o=this._frames.length,u=t.timeline.duration,f=0;u>f;f++){var l=i&&i[f]?i[f]:s;this.addFrame(t,l,r,function(e){var t=this.actionsEnabled;this.actionsEnabled=!1,this.gotoAndStop(e),this.actionsEnabled=t},[f],t)}var c=t.timeline._labels,h=[];for(var p in c)h.push({index:c[p],label:p});if(h.length){h.sort(function(e,t){return e.index-t.index});for(var f=0,d=h.length;d>f;f++){for(var v=h[f].label,m=o+h[f].index,g=o+(f==d-1?u:h[f+1].index),y=[],b=m;g>b;b++)y.push(b);this.addAnimation(v,y,!0)}}},n.build=function(){if(this._data)throw e.ERR_RUNNING;for(this._startBuild();this._drawNext(););return this._endBuild(),this.spriteSheet},n.buildAsync=function(t){if(this._data)throw e.ERR_RUNNING;this.timeSlice=t,this._startBuild();var n=this;this._timerID=setTimeout(function(){n._run()},50-50*Math.max(.01,Math.min(.99,this.timeSlice||.3)))},n.stopAsync=function(){clearTimeout(this._timerID),this._data=null},n.clone=function(){throw"SpriteSheetBuilder cannot be cloned."},n.toString=function(){return"[SpriteSheetBuilder]"},n._startBuild=function(){var n=this.padding||0;this.progress=0,this.spriteSheet=null,this._index=0,this._scale=this.scale;var r=[];this._data={images:[],frames:r,animations:this._animations};var i=this._frames.slice();if(i.sort(function(e,t){return e.height<=t.height?-1:1}),i[i.length-1].height+2*n>this.maxHeight)throw e.ERR_DIMENSIONS;for(var s=0,o=0,u=0;i.length;){var f=this._fillRow(i,s,u,r,n);if(f.w>o&&(o=f.w),s+=f.h,!f.h||!i.length){var l=t.createCanvas?t.createCanvas():document.createElement("canvas");l.width=this._getSize(o,this.maxWidth),l.height=this._getSize(s,this.maxHeight),this._data.images[u]=l,f.h||(o=s=0,u++)}}},n._getSize=function(e,t){for(var n=4;Math.pow(2,++n)<e;);return Math.min(t,Math.pow(2,n))},n._fillRow=function(n,r,i,s,o){var u=this.maxWidth,f=this.maxHeight;r+=o;for(var l=f-r,c=o,h=0,p=n.length-1;p>=0;p--){var d=n[p],v=this._scale*d.scale,m=d.sourceRect,g=d.source,y=Math.floor(v*m.x-o),b=Math.floor(v*m.y-o),w=Math.ceil(v*m.height+2*o),E=Math.ceil(v*m.width+2*o);if(E>u)throw e.ERR_DIMENSIONS;w>l||c+E>u||(d.img=i,d.rect=new t.Rectangle(c,r,E,w),h=h||w,n.splice(p,1),s[d.index]=[c,r,E,w,i,Math.round(-y+v*g.regX-o),Math.round(-b+v*g.regY-o)],c+=E)}return{w:c,h:h}},n._endBuild=function(){this.spriteSheet=new t.SpriteSheet(this._data),this._data=null,this.progress=1,this.dispatchEvent("complete")},n._run=function(){for(var e=50*Math.max(.01,Math.min(.99,this.timeSlice||.3)),n=(new Date).getTime()+e,r=!1;n>(new Date).getTime();)if(!this._drawNext()){r=!0;break}if(r)this._endBuild();else{var i=this;this._timerID=setTimeout(function(){i._run()},50-e)}var s=this.progress=this._index/this._frames.length;if(this.hasEventListener("progress")){var o=new t.Event("progress");o.progress=s,this.dispatchEvent(o)}},n._drawNext=function(){var e=this._frames[this._index],t=e.scale*this._scale,n=e.rect,r=e.sourceRect,i=this._data.images[e.img],s=i.getContext("2d");return e.funct&&e.funct.apply(e.scope,e.params),s.save(),s.beginPath(),s.rect(n.x,n.y,n.width,n.height),s.clip(),s.translate(Math.ceil(n.x-r.x*t),Math.ceil(n.y-r.y*t)),s.scale(t,t),e.source.draw(s),s.restore(),++this._index<this._frames.length},t.SpriteSheetBuilder=e}(),!function(){var e=function(e){this.initialize(e)},n=e.prototype=new t.DisplayObject;n.htmlElement=null,n._oldMtx=null,n._visible=!1,n.DisplayObject_initialize=n.initialize,n.initialize=function(e){"string"==typeof e&&(e=document.getElementById(e)),this.DisplayObject_initialize(),this.mouseEnabled=!1,this.htmlElement=e;var t=e.style;t.position="absolute",t.transformOrigin=t.WebkitTransformOrigin=t.msTransformOrigin=t.MozTransformOrigin=t.OTransformOrigin="0% 0%"},n.isVisible=function(){return null!=this.htmlElement},n.draw=function(){return this.visible&&(this._visible=!0),!0},n.cache=function(){},n.uncache=function(){},n.updateCache=function(){},n.hitTest=function(){},n.localToGlobal=function(){},n.globalToLocal=function(){},n.localToLocal=function(){},n.clone=function(){throw"DOMElement cannot be cloned."},n.toString=function(){return"[DOMElement (name="+this.name+")]"},n.DisplayObject__tick=n._tick,n._tick=function(e){var t=this.getStage();this._visible=!1,t&&t.on("drawend",this._handleDrawEnd,this,!0),this.DisplayObject__tick(e)},n._handleDrawEnd=function(){var e=this.htmlElement;if(e){var t=e.style,n=this._visible?"visible":"hidden";if(n!=t.visibility&&(t.visibility=n),this._visible){var r=this.getConcatenatedMatrix(this._matrix),i=this._oldMtx,s=1e4;if(i&&i.alpha==r.alpha||(t.opacity=""+(0|r.alpha*s)/s,i&&(i.alpha=r.alpha)),!i||i.tx!=r.tx||i.ty!=r.ty||i.a!=r.a||i.b!=r.b||i.c!=r.c||i.d!=r.d){var o="matrix("+(0|r.a*s)/s+","+(0|r.b*s)/s+","+(0|r.c*s)/s+","+(0|r.d*s)/s+","+(0|r.tx+.5);t.transform=t.WebkitTransform=t.OTransform=t.msTransform=o+","+(0|r.ty+.5)+")",t.MozTransform=o+"px,"+(0|r.ty+.5)+"px)",this._oldMtx=i?i.copy(r):r.clone()}}}},t.DOMElement=e}(),!function(){var e=function(){this.initialize()},n=e.prototype;n.initialize=function(){},n.getBounds=function(){return null},n.applyFilter=function(){},n.toString=function(){return"[Filter]"},n.clone=function(){return new e},t.Filter=e}(),!function(){var e=function(e,t,n){this.initialize(e,t,n)},n=e.prototype=new t.Filter;n.initialize=function(e,t,n){(isNaN(e)||0>e)&&(e=0),this.blurX=0|e,(isNaN(t)||0>t)&&(t=0),this.blurY=0|t,(isNaN(n)||1>n)&&(n=1),this.quality=0|n},n.blurX=0,n.blurY=0,n.quality=1,n.mul_table=[1,171,205,293,57,373,79,137,241,27,391,357,41,19,283,265,497,469,443,421,25,191,365,349,335,161,155,149,9,278,269,261,505,245,475,231,449,437,213,415,405,395,193,377,369,361,353,345,169,331,325,319,313,307,301,37,145,285,281,69,271,267,263,259,509,501,493,243,479,118,465,459,113,446,55,435,429,423,209,413,51,403,199,393,97,3,379,375,371,367,363,359,355,351,347,43,85,337,333,165,327,323,5,317,157,311,77,305,303,75,297,294,73,289,287,71,141,279,277,275,68,135,67,133,33,262,260,129,511,507,503,499,495,491,61,121,481,477,237,235,467,232,115,457,227,451,7,445,221,439,218,433,215,427,425,211,419,417,207,411,409,203,202,401,399,396,197,49,389,387,385,383,95,189,47,187,93,185,23,183,91,181,45,179,89,177,11,175,87,173,345,343,341,339,337,21,167,83,331,329,327,163,81,323,321,319,159,79,315,313,39,155,309,307,153,305,303,151,75,299,149,37,295,147,73,291,145,289,287,143,285,71,141,281,35,279,139,69,275,137,273,17,271,135,269,267,133,265,33,263,131,261,130,259,129,257,1],n.shg_table=[0,9,10,11,9,12,10,11,12,9,13,13,10,9,13,13,14,14,14,14,10,13,14,14,14,13,13,13,9,14,14,14,15,14,15,14,15,15,14,15,15,15,14,15,15,15,15,15,14,15,15,15,15,15,15,12,14,15,15,13,15,15,15,15,16,16,16,15,16,14,16,16,14,16,13,16,16,16,15,16,13,16,15,16,14,9,16,16,16,16,16,16,16,16,16,13,14,16,16,15,16,16,10,16,15,16,14,16,16,14,16,16,14,16,16,14,15,16,16,16,14,15,14,15,13,16,16,15,17,17,17,17,17,17,14,15,17,17,16,16,17,16,15,17,16,17,11,17,16,17,16,17,16,17,17,16,17,17,16,17,17,16,16,17,17,17,16,14,17,17,17,17,15,16,14,16,15,16,13,16,15,16,14,16,15,16,12,16,15,16,17,17,17,17,17,13,16,15,17,17,17,16,15,17,17,17,16,15,17,17,14,16,17,17,16,17,17,16,15,17,16,14,17,16,15,17,16,17,17,16,17,15,16,17,14,17,16,15,17,16,17,13,17,16,17,17,16,17,14,17,16,17,16,17,16,17,9],n.getBounds=function(){var e=.5*Math.pow(this.quality,.6);return new t.Rectangle(-this.blurX*e,-this.blurY*e,2*this.blurX*e,2*this.blurY*e)},n.applyFilter=function(e,t,n,r,i,s,o,u){s=s||e,null==o&&(o=t),null==u&&(u=n);try{var a=e.getImageData(t,n,r,i)}catch(f){return!1}var l=this.blurX/2;if(isNaN(l)||0>l)return!1;l|=0;var c=this.blurY/2;if(isNaN(c)||0>c)return!1;if(c|=0,0==l&&0==c)return!1;var h=this.quality;(isNaN(h)||1>h)&&(h=1),h|=0,h>3&&(h=3),1>h&&(h=1);var t,n,p,d,v,m,g,y,b,w,E,S,x,T,N,C=a.data,k=l+l+1,L=c+c+1,A=r-1,O=i-1,M=l+1,_=c+1,D={r:0,b:0,g:0,a:0,next:null},P=D;for(p=1;k>p;p++)P=P.next={r:0,b:0,g:0,a:0,next:null};P.next=D;var H={r:0,b:0,g:0,a:0,next:null},B=H;for(p=1;L>p;p++)B=B.next={r:0,b:0,g:0,a:0,next:null};B.next=H;for(var j=null;h-->0;){g=m=0;var F=this.mul_table[l],I=this.shg_table[l];for(n=i;--n>-1;){for(y=M*(S=C[m]),b=M*(x=C[m+1]),w=M*(T=C[m+2]),E=M*(N=C[m+3]),P=D,p=M;--p>-1;)P.r=S,P.g=x,P.b=T,P.a=N,P=P.next;for(p=1;M>p;p++)d=m+((p>A?A:p)<<2),y+=P.r=C[d],b+=P.g=C[d+1],w+=P.b=C[d+2],E+=P.a=C[d+3],P=P.next;for(j=D,t=0;r>t;t++)C[m++]=y*F>>>I,C[m++]=b*F>>>I,C[m++]=w*F>>>I,C[m++]=E*F>>>I,d=g+((d=t+l+1)<A?d:A)<<2,y-=j.r-(j.r=C[d]),b-=j.g-(j.g=C[d+1]),w-=j.b-(j.b=C[d+2]),E-=j.a-(j.a=C[d+3]),j=j.next;g+=r}for(F=this.mul_table[c],I=this.shg_table[c],t=0;r>t;t++){for(m=t<<2,y=_*(S=C[m]),b=_*(x=C[m+1]),w=_*(T=C[m+2]),E=_*(N=C[m+3]),B=H,p=0;_>p;p++)B.r=S,B.g=x,B.b=T,B.a=N,B=B.next;for(v=r,p=1;c>=p;p++)m=v+t<<2,y+=B.r=C[m],b+=B.g=C[m+1],w+=B.b=C[m+2],E+=B.a=C[m+3],B=B.next,O>p&&(v+=r);if(m=t,j=H,h>0)for(n=0;i>n;n++)d=m<<2,C[d+3]=N=E*F>>>I,N>0?(C[d]=y*F>>>I,C[d+1]=b*F>>>I,C[d+2]=w*F>>>I):C[d]=C[d+1]=C[d+2]=0,d=t+((d=n+_)<O?d:O)*r<<2,y-=j.r-(j.r=C[d]),b-=j.g-(j.g=C[d+1]),w-=j.b-(j.b=C[d+2]),E-=j.a-(j.a=C[d+3]),j=j.next,m+=r;else for(n=0;i>n;n++)d=m<<2,C[d+3]=N=E*F>>>I,N>0?(N=255/N,C[d]=(y*F>>>I)*N,C[d+1]=(b*F>>>I)*N,C[d+2]=(w*F>>>I)*N):C[d]=C[d+1]=C[d+2]=0,d=t+((d=n+_)<O?d:O)*r<<2,y-=j.r-(j.r=C[d]),b-=j.g-(j.g=C[d+1]),w-=j.b-(j.b=C[d+2]),E-=j.a-(j.a=C[d+3]),j=j.next,m+=r}}return s.putImageData(a,o,u),!0},n.clone=function(){return new e(this.blurX,this.blurY,this.quality)},n.toString=function(){return"[BlurFilter]"},t.BlurFilter=e}(),!function(){var e=function(e){this.initialize(e)},n=e.prototype=new t.Filter;n.initialize=function(e){this.alphaMap=e},n.alphaMap=null,n._alphaMap=null,n._mapData=null,n.applyFilter=function(e,t,n,r,i,s,o,u){if(!this.alphaMap)return!0;if(!this._prepAlphaMap())return!1;s=s||e,null==o&&(o=t),null==u&&(u=n);try{var a=e.getImageData(t,n,r,i)}catch(f){return!1}for(var l=a.data,c=this._mapData,h=l.length,p=0;h>p;p+=4)l[p+3]=c[p]||0;return s.putImageData(a,o,u),!0},n.clone=function(){return new e(this.alphaMap)},n.toString=function(){return"[AlphaMapFilter]"},n._prepAlphaMap=function(){if(!this.alphaMap)return!1;if(this.alphaMap==this._alphaMap&&this._mapData)return!0;this._mapData=null;var e,n=this._alphaMap=this.alphaMap,r=n;n instanceof HTMLCanvasElement?e=r.getContext("2d"):(r=t.createCanvas?t.createCanvas():document.createElement("canvas"),r.width=n.width,r.height=n.height,e=r.getContext("2d"),e.drawImage(n,0,0));try{var i=e.getImageData(0,0,n.width,n.height)}catch(s){return!1}return this._mapData=i.data,!0},t.AlphaMapFilter=e}(),!function(){var e=function(e){this.initialize(e)},n=e.prototype=new t.Filter;n.initialize=function(e){this.mask=e},n.mask=null,n.applyFilter=function(e,t,n,r,i,s,o,u){return this.mask?(s=s||e,null==o&&(o=t),null==u&&(u=n),s.save(),s.globalCompositeOperation="destination-in",s.drawImage(this.mask,o,u),s.restore(),!0):!0},n.clone=function(){return new e(this.mask)},n.toString=function(){return"[AlphaMaskFilter]"},t.AlphaMaskFilter=e}(),!function(){var e=function(e,t,n,r,i,s,o,u){this.initialize(e,t,n,r,i,s,o,u)},n=e.prototype=new t.Filter;n.redMultiplier=1,n.greenMultiplier=1,n.blueMultiplier=1,n.alphaMultiplier=1,n.redOffset=0,n.greenOffset=0,n.blueOffset=0,n.alphaOffset=0,n.initialize=function(e,t,n,r,i,s,o,u){this.redMultiplier=null!=e?e:1,this.greenMultiplier=null!=t?t:1,this.blueMultiplier=null!=n?n:1,this.alphaMultiplier=null!=r?r:1,this.redOffset=i||0,this.greenOffset=s||0,this.blueOffset=o||0,this.alphaOffset=u||0},n.applyFilter=function(e,t,n,r,i,s,o,u){s=s||e,null==o&&(o=t),null==u&&(u=n);try{var a=e.getImageData(t,n,r,i)}catch(f){return!1}for(var l=a.data,c=l.length,h=0;c>h;h+=4)l[h]=l[h]*this.redMultiplier+this.redOffset,l[h+1]=l[h+1]*this.greenMultiplier+this.greenOffset,l[h+2]=l[h+2]*this.blueMultiplier+this.blueOffset,l[h+3]=l[h+3]*this.alphaMultiplier+this.alphaOffset;return s.putImageData(a,o,u),!0},n.toString=function(){return"[ColorFilter]"},n.clone=function(){return new e(this.redMultiplier,this.greenMultiplier,this.blueMultiplier,this.alphaMultiplier,this.redOffset,this.greenOffset,this.blueOffset,this.alphaOffset)},t.ColorFilter=e}(),!function(){var e=function(e,t,n,r){this.initialize(e,t,n,r)},n=e.prototype;e.DELTA_INDEX=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],e.IDENTITY_MATRIX=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],e.LENGTH=e.IDENTITY_MATRIX.length,n.initialize=function(e,t,n,r){return this.reset(),this.adjustColor(e,t,n,r),this},n.reset=function(){return this.copyMatrix(e.IDENTITY_MATRIX)},n.adjustColor=function(e,t,n,r){return this.adjustHue(r),this.adjustContrast(t),this.adjustBrightness(e),this.adjustSaturation(n)},n.adjustBrightness=function(e){return 0==e||isNaN(e)?this:(e=this._cleanValue(e,255),this._multiplyMatrix([1,0,0,0,e,0,1,0,0,e,0,0,1,0,e,0,0,0,1,0,0,0,0,0,1]),this)},n.adjustContrast=function(t){if(0==t||isNaN(t))return this;t=this._cleanValue(t,100);var n;return 0>t?n=127+127*(t/100):(n=t%1,n=0==n?e.DELTA_INDEX[t]:e.DELTA_INDEX[t<<0]*(1-n)+e.DELTA_INDEX[(t<<0)+1]*n,n=127*n+127),this._multiplyMatrix([n/127,0,0,0,.5*(127-n),0,n/127,0,0,.5*(127-n),0,0,n/127,0,.5*(127-n),0,0,0,1,0,0,0,0,0,1]),this},n.adjustSaturation=function(e){if(0==e||isNaN(e))return this;e=this._cleanValue(e,100);var t=1+(e>0?3*e/100:e/100),n=.3086,r=.6094,i=.082;return this._multiplyMatrix([n*(1-t)+t,r*(1-t),i*(1-t),0,0,n*(1-t),r*(1-t)+t,i*(1-t),0,0,n*(1-t),r*(1-t),i*(1-t)+t,0,0,0,0,0,1,0,0,0,0,0,1]),this},n.adjustHue=function(e){if(0==e||isNaN(e))return this;e=this._cleanValue(e,180)/180*Math.PI;var t=Math.cos(e),n=Math.sin(e),r=.213,i=.715,s=.072;return this._multiplyMatrix([r+t*(1-r)+n*-r,i+t*-i+n*-i,s+t*-s+n*(1-s),0,0,r+t*-r+.143*n,i+t*(1-i)+.14*n,s+t*-s+n*-0.283,0,0,r+t*-r+n*-(1-r),i+t*-i+n*i,s+t*(1-s)+n*s,0,0,0,0,0,1,0,0,0,0,0,1]),this},n.concat=function(t){return t=this._fixMatrix(t),t.length!=e.LENGTH?this:(this._multiplyMatrix(t),this)},n.clone=function(){return(new e).copyMatrix(this)},n.toArray=function(){for(var t=[],n=0,r=e.LENGTH;r>n;n++)t[n]=this[n];return t},n.copyMatrix=function(t){for(var n=e.LENGTH,r=0;n>r;r++)this[r]=t[r];return this},n.toString=function(){return"[ColorMatrix]"},n._multiplyMatrix=function(e){for(var t=[],n=0;5>n;n++){for(var r=0;5>r;r++)t[r]=this[r+5*n];for(var r=0;5>r;r++){for(var i=0,s=0;5>s;s++)i+=e[r+5*s]*t[s];this[r+5*n]=i}}},n._cleanValue=function(e,t){return Math.min(t,Math.max(-t,e))},n._fixMatrix=function(t){return t instanceof e&&(t=t.toArray()),t.length<e.LENGTH?t=t.slice(0,t.length).concat(e.IDENTITY_MATRIX.slice(t.length,e.LENGTH)):t.length>e.LENGTH&&(t=t.slice(0,e.LENGTH)),t},t.ColorMatrix=e}(),!function(){var e=function(e){this.initialize(e)},n=e.prototype=new t.Filter;n.matrix=null,n.initialize=function(e){this.matrix=e},n.applyFilter=function(e,t,n,r,i,s,o,u){s=s||e,null==o&&(o=t),null==u&&(u=n);try{var a=e.getImageData(t,n,r,i)}catch(f){return!1}for(var l,c,h,p,d=a.data,v=d.length,m=this.matrix,g=m[0],y=m[1],b=m[2],w=m[3],E=m[4],S=m[5],x=m[6],T=m[7],N=m[8],C=m[9],k=m[10],L=m[11],A=m[12],O=m[13],M=m[14],_=m[15],D=m[16],P=m[17],H=m[18],B=m[19],j=0;v>j;j+=4)l=d[j],c=d[j+1],h=d[j+2],p=d[j+3],d[j]=l*g+c*y+h*b+p*w+E,d[j+1]=l*S+c*x+h*T+p*N+C,d[j+2]=l*k+c*L+h*A+p*O+M,d[j+3]=l*_+c*D+h*P+p*H+B;return s.putImageData(a,o,u),!0},n.toString=function(){return"[ColorMatrixFilter]"},n.clone=function(){return new e(this.matrix)},t.ColorMatrixFilter=e}(),!function(){var e=function(){throw"Touch cannot be instantiated"};e.isSupported=function(){return"ontouchstart"in window||window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>0||window.navigator.pointerEnabled&&window.navigator.maxTouchPoints>0},e.enable=function(t,n,r){return t&&t.canvas&&e.isSupported()?(t.__touch={pointers:{},multitouch:!n,preventDefault:!r,count:0},"ontouchstart"in window?e._IOS_enable(t):(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&e._IE_enable(t),!0):!1},e.disable=function(t){t&&("ontouchstart"in window?e._IOS_disable(t):(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&e._IE_disable(t))},e._IOS_enable=function(t){var n=t.canvas,r=t.__touch.f=function(n){e._IOS_handleEvent(t,n)};n.addEventListener("touchstart",r,!1),n.addEventListener("touchmove",r,!1),n.addEventListener("touchend",r,!1),n.addEventListener("touchcancel",r,!1)},e._IOS_disable=function(e){var t=e.canvas;if(t){var n=e.__touch.f;t.removeEventListener("touchstart",n,!1),t.removeEventListener("touchmove",n,!1),t.removeEventListener("touchend",n,!1),t.removeEventListener("touchcancel",n,!1)}},e._IOS_handleEvent=function(e,t){if(e){e.__touch.preventDefault&&t.preventDefault&&t.preventDefault();for(var n=t.changedTouches,r=t.type,i=0,s=n.length;s>i;i++){var o=n[i],u=o.identifier;o.target==e.canvas&&("touchstart"==r?this._handleStart(e,u,t,o.pageX,o.pageY):"touchmove"==r?this._handleMove(e,u,t,o.pageX,o.pageY):("touchend"==r||"touchcancel"==r)&&this._handleEnd(e,u,t))}}},e._IE_enable=function(t){var n=t.canvas,r=t.__touch.f=function(n){e._IE_handleEvent(t,n)};void 0===window.navigator.pointerEnabled?(n.addEventListener("MSPointerDown",r,!1),window.addEventListener("MSPointerMove",r,!1),window.addEventListener("MSPointerUp",r,!1),window.addEventListener("MSPointerCancel",r,!1),t.__touch.preventDefault&&(n.style.msTouchAction="none")):(n.addEventListener("pointerdown",r,!1),window.addEventListener("pointermove",r,!1),window.addEventListener("pointerup",r,!1),window.addEventListener("pointercancel",r,!1),t.__touch.preventDefault&&(n.style.touchAction="none")),t.__touch.activeIDs={}},e._IE_disable=function(e){var t=e.__touch.f;void 0===window.navigator.pointerEnabled?(window.removeEventListener("MSPointerMove",t,!1),window.removeEventListener("MSPointerUp",t,!1),window.removeEventListener("MSPointerCancel",t,!1),e.canvas&&e.canvas.removeEventListener("MSPointerDown",t,!1)):(window.removeEventListener("pointermove",t,!1),window.removeEventListener("pointerup",t,!1),window.removeEventListener("pointercancel",t,!1),e.canvas&&e.canvas.removeEventListener("pointerdown",t,!1))},e._IE_handleEvent=function(e,t){if(e){e.__touch.preventDefault&&t.preventDefault&&t.preventDefault();var n=t.type,r=t.pointerId,i=e.__touch.activeIDs;if("MSPointerDown"==n||"pointerdown"==n){if(t.srcElement!=e.canvas)return;i[r]=!0,this._handleStart(e,r,t,t.pageX,t.pageY)}else i[r]&&("MSPointerMove"==n||"pointermove"==n?this._handleMove(e,r,t,t.pageX,t.pageY):("MSPointerUp"==n||"MSPointerCancel"==n||"pointerup"==n||"pointercancel"==n)&&(delete i[r],this._handleEnd(e,r,t)))}},e._handleStart=function(e,t,n,r,i){var s=e.__touch;if(s.multitouch||!s.count){var o=s.pointers;o[t]||(o[t]=!0,s.count++,e._handlePointerDown(t,n,r,i))}},e._handleMove=function(e,t,n,r,i){e.__touch.pointers[t]&&e._handlePointerMove(t,n,r,i)},e._handleEnd=function(e,t,n){var r=e.__touch,i=r.pointers;i[t]&&(r.count--,e._handlePointerUp(t,n,!0),delete i[t])},t.Touch=e}(),!function(){var e=t.EaselJS=t.EaselJS||{}}(),!function(){var e=function(e,t,n){this.initialize(e,t,n)},n=e.prototype=new t.EventDispatcher;e.NONE=0,e.LOOP=1,e.REVERSE=2,e.IGNORE={},e._tweens=[],e._plugins={},e.get=function(t,n,r,i){return i&&e.removeTweens(t),new e(t,n,r)},e.tick=function(t,n){for(var r=e._tweens.slice(),i=r.length-1;i>=0;i--){var s=r[i];n&&!s.ignoreGlobalPause||s._paused||s.tick(s._useTicks?1:t)}},e.handleEvent=function(e){"tick"==e.type&&this.tick(e.delta,e.paused)},e.removeTweens=function(t){if(t.tweenjs_count){for(var n=e._tweens,r=n.length-1;r>=0;r--)n[r]._target==t&&(n[r]._paused=!0,n.splice(r,1));t.tweenjs_count=0}},e.removeAllTweens=function(){for(var t=e._tweens,n=0,r=t.length;r>n;n++){var i=t[n];i.paused=!0,i.target.tweenjs_count=0}t.length=0},e.hasActiveTweens=function(t){return t?t.tweenjs_count:e._tweens&&!!e._tweens.length},e.installPlugin=function(t,n){var r=t.priority;null==r&&(t.priority=r=0);for(var i=0,s=n.length,o=e._plugins;s>i;i++){var u=n[i];if(o[u]){for(var f=o[u],l=0,c=f.length;c>l&&!(r<f[l].priority);l++);o[u].splice(l,0,t)}else o[u]=[t]}},e._register=function(n,r){var i=n._target,s=e._tweens;if(r)i&&(i.tweenjs_count=i.tweenjs_count?i.tweenjs_count+1:1),s.push(n),!e._inited&&t.Ticker&&(t.Ticker.addEventListener("tick",e),e._inited=!0);else{i&&i.tweenjs_count--;for(var o=s.length;o--;)if(s[o]==n)return s.splice(o,1),void 0}},n.ignoreGlobalPause=!1,n.loop=!1,n.duration=0,n.pluginData=null,n.target=null,n.position=null,n.passive=!1,n._paused=!1,n._curQueueProps=null,n._initQueueProps=null,n._steps=null,n._actions=null,n._prevPosition=0,n._stepPosition=0,n._prevPos=-1,n._target=null,n._useTicks=!1,n._inited=!1,n.initialize=function(t,n,r){this.target=this._target=t,n&&(this._useTicks=n.useTicks,this.ignoreGlobalPause=n.ignoreGlobalPause,this.loop=n.loop,n.onChange&&this.addEventListener("change",n.onChange),n.override&&e.removeTweens(t)),this.pluginData=r||{},this._curQueueProps={},this._initQueueProps={},this._steps=[],this._actions=[],n&&n.paused?this._paused=!0:e._register(this,!0),n&&null!=n.position&&this.setPosition(n.position,e.NONE)},n.wait=function(e,t){if(null==e||0>=e)return this;var n=this._cloneProps(this._curQueueProps);return this._addStep({d:e,p0:n,e:this._linearEase,p1:n,v:t})},n.to=function(e,t,n){return(isNaN(t)||0>t)&&(t=0),this._addStep({d:t||0,p0:this._cloneProps(this._curQueueProps),e:n,p1:this._cloneProps(this._appendQueueProps(e))})},n.call=function(e,t,n){return this._addAction({f:e,p:t?t:[this],o:n?n:this._target})},n.set=function(e,t){return this._addAction({f:this._set,o:this,p:[e,t?t:this._target]})},n.play=function(e){return e||(e=this),this.call(e.setPaused,[!1],e)},n.pause=function(e){return e||(e=this),this.call(e.setPaused,[!0],e)},n.setPosition=function(e,t){0>e&&(e=0),null==t&&(t=1);var n=e,r=!1;if(n>=this.duration&&(this.loop?n%=this.duration:(n=this.duration,r=!0)),n==this._prevPos)return r;var i=this._prevPos;if(this.position=this._prevPos=n,this._prevPosition=e,this._target)if(r)this._updateTargetProps(null,1);else if(this._steps.length>0){for(var s=0,o=this._steps.length;o>s&&!(this._steps[s].t>n);s++);var u=this._steps[s-1];this._updateTargetProps(u,(this._stepPosition=n-u.t)/u.d)}return 0!=t&&this._actions.length>0&&(this._useTicks?this._runActions(n,n):1==t&&i>n?(i!=this.duration&&this._runActions(i,this.duration),this._runActions(0,n,!0)):this._runActions(i,n)),r&&this.setPaused(!0),this.dispatchEvent("change"),r},n.tick=function(e){this._paused||this.setPosition(this._prevPosition+e)},n.setPaused=function(t){return this._paused=!!t,e._register(this,!t),this},n.w=n.wait,n.t=n.to,n.c=n.call,n.s=n.set,n.toString=function(){return"[Tween]"},n.clone=function(){throw"Tween can not be cloned."},n._updateTargetProps=function(t,n){var r,i,s,o,u,f;if(t||1!=n){if(this.passive=!!t.v,this.passive)return;t.e&&(n=t.e(n,0,1,1)),r=t.p0,i=t.p1}else this.passive=!1,r=i=this._curQueueProps;for(var l in this._initQueueProps){null==(o=r[l])&&(r[l]=o=this._initQueueProps[l]),null==(u=i[l])&&(i[l]=u=o),s=o==u||0==n||1==n||"number"!=typeof o?1==n?u:o:o+(u-o)*n;var c=!1;if(f=e._plugins[l])for(var h=0,p=f.length;p>h;h++){var d=f[h].tween(this,l,s,r,i,n,!!t&&r==i,!t);d==e.IGNORE?c=!0:s=d}c||(this._target[l]=s)}},n._runActions=function(e,t,n){var r=e,i=t,s=-1,o=this._actions.length,u=1;for(e>t&&(r=t,i=e,s=o,o=u=-1);(s+=u)!=o;){var a=this._actions[s],f=a.t;(f==i||f>r&&i>f||n&&f==e)&&a.f.apply(a.o,a.p)}},n._appendQueueProps=function(t){var n,r,i,s,o;for(var u in t)if(void 0===this._initQueueProps[u]){if(r=this._target[u],n=e._plugins[u])for(i=0,s=n.length;s>i;i++)r=n[i].init(this,u,r);this._initQueueProps[u]=this._curQueueProps[u]=void 0===r?null:r}else r=this._curQueueProps[u];for(var u in t){if(r=this._curQueueProps[u],n=e._plugins[u])for(o=o||{},i=0,s=n.length;s>i;i++)n[i].step&&n[i].step(this,u,r,t[u],o);this._curQueueProps[u]=t[u]}return o&&this._appendQueueProps(o),this._curQueueProps},n._cloneProps=function(e){var t={};for(var n in e)t[n]=e[n];return t},n._addStep=function(e){return e.d>0&&(this._steps.push(e),e.t=this.duration,this.duration+=e.d),this},n._addAction=function(e){return e.t=this.duration,this._actions.push(e),this},n._set=function(e,t){for(var n in e)t[n]=e[n]},t.Tween=e}(),!function(){var e=function(e,t,n){this.initialize(e,t,n)},n=e.prototype=new t.EventDispatcher;n.ignoreGlobalPause=!1,n.duration=0,n.loop=!1,n.position=null,n._paused=!1,n._tweens=null,n._labels=null,n._labelList=null,n._prevPosition=0,n._prevPos=-1,n._useTicks=!1,n.initialize=function(e,n,r){this._tweens=[],r&&(this._useTicks=r.useTicks,this.loop=r.loop,this.ignoreGlobalPause=r.ignoreGlobalPause,r.onChange&&this.addEventListener("change",r.onChange)),e&&this.addTween.apply(this,e),this.setLabels(n),r&&r.paused?this._paused=!0:t.Tween._register(this,!0),r&&null!=r.position&&this.setPosition(r.position,t.Tween.NONE)},n.addTween=function(e){var n=arguments.length;if(n>1){for(var r=0;n>r;r++)this.addTween(arguments[r]);return arguments[0]}return 0==n?null:(this.removeTween(e),this._tweens.push(e),e.setPaused(!0),e._paused=!1,e._useTicks=this._useTicks,e.duration>this.duration&&(this.duration=e.duration),this._prevPos>=0&&e.setPosition(this._prevPos,t.Tween.NONE),e)},n.removeTween=function(e){var t=arguments.length;if(t>1){for(var n=!0,r=0;t>r;r++)n=n&&this.removeTween(arguments[r]);return n}if(0==t)return!1;for(var i=this._tweens,r=i.length;r--;)if(i[r]==e)return i.splice(r,1),e.duration>=this.duration&&this.updateDuration(),!0;return!1},n.addLabel=function(e,t){this._labels[e]=t;var n=this._labelList;if(n){for(var r=0,i=n.length;i>r&&!(t<n[r].position);r++);n.splice(r,0,{label:e,position:t})}},n.setLabels=function(e){this._labels=e?e:{}},n.getLabels=function(){var e=this._labelList;if(!e){e=this._labelList=[];var t=this._labels;for(var n in t)e.push({label:n,position:t[n]});e.sort(function(e,t){return e.position-t.position})}return e},n.getCurrentLabel=function(){var e=this.getLabels(),t=this.position,n=e.length;if(n){for(var r=0;n>r&&!(t<e[r].position);r++);return 0==r?null:e[r-1].label}return null},n.gotoAndPlay=function(e){this.setPaused(!1),this._goto(e)},n.gotoAndStop=function(e){this.setPaused(!0),this._goto(e)},n.setPosition=function(e,t){0>e&&(e=0);var n=this.loop?e%this.duration:e,r=!this.loop&&e>=this.duration;if(n==this._prevPos)return r;this._prevPosition=e,this.position=this._prevPos=n;for(var i=0,s=this._tweens.length;s>i;i++)if(this._tweens[i].setPosition(n,t),n!=this._prevPos)return!1;return r&&this.setPaused(!0),this.dispatchEvent("change"),r},n.setPaused=function(e){this._paused=!!e,t.Tween._register(this,!e)},n.updateDuration=function(){this.duration=0;for(var e=0,t=this._tweens.length;t>e;e++){var n=this._tweens[e];n.duration>this.duration&&(this.duration=n.duration)}},n.tick=function(e){this.setPosition(this._prevPosition+e)},n.resolve=function(e){var t=parseFloat(e);return isNaN(t)&&(t=this._labels[e]),t},n.toString=function(){return"[Timeline]"},n.clone=function(){throw"Timeline can not be cloned."},n._goto=function(e){var t=this.resolve(e);null!=t&&this.setPosition(t)},t.Timeline=e}(),!function(){var e=function(){throw"Ease cannot be instantiated."};e.linear=function(e){return e},e.none=e.linear,e.get=function(e){return-1>e&&(e=-1),e>1&&(e=1),function(t){return 0==e?t:0>e?t*(t*-e+1+e):t*((2-t)*e+(1-e))}},e.getPowIn=function(e){return function(t){return Math.pow(t,e)}},e.getPowOut=function(e){return function(t){return 1-Math.pow(1-t,e)}},e.getPowInOut=function(e){return function(t){return(t*=2)<1?.5*Math.pow(t,e):1-.5*Math.abs(Math.pow(2-t,e))}},e.quadIn=e.getPowIn(2),e.quadOut=e.getPowOut(2),e.quadInOut=e.getPowInOut(2),e.cubicIn=e.getPowIn(3),e.cubicOut=e.getPowOut(3),e.cubicInOut=e.getPowInOut(3),e.quartIn=e.getPowIn(4),e.quartOut=e.getPowOut(4),e.quartInOut=e.getPowInOut(4),e.quintIn=e.getPowIn(5),e.quintOut=e.getPowOut(5),e.quintInOut=e.getPowInOut(5),e.sineIn=function(e){return 1-Math.cos(e*Math.PI/2)},e.sineOut=function(e){return Math.sin(e*Math.PI/2)},e.sineInOut=function(e){return-0.5*(Math.cos(Math.PI*e)-1)},e.getBackIn=function(e){return function(t){return t*t*((e+1)*t-e)}},e.backIn=e.getBackIn(1.7),e.getBackOut=function(e){return function(t){return--t*t*((e+1)*t+e)+1}},e.backOut=e.getBackOut(1.7),e.getBackInOut=function(e){return e*=1.525,function(t){return(t*=2)<1?.5*t*t*((e+1)*t-e):.5*((t-=2)*t*((e+1)*t+e)+2)}},e.backInOut=e.getBackInOut(1.7),e.circIn=function(e){return-(Math.sqrt(1-e*e)-1)},e.circOut=function(e){return Math.sqrt(1- --e*e)},e.circInOut=function(e){return(e*=2)<1?-0.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},e.bounceIn=function(t){return 1-e.bounceOut(1-t)},e.bounceOut=function(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},e.bounceInOut=function(t){return.5>t?.5*e.bounceIn(2*t):.5*e.bounceOut(2*t-1)+.5},e.getElasticIn=function(e,t){var n=2*Math.PI;return function(r){if(0==r||1==r)return r;var i=t/n*Math.asin(1/e);return-(e*Math.pow(2,10*(r-=1))*Math.sin((r-i)*n/t))}},e.elasticIn=e.getElasticIn(1,.3),e.getElasticOut=function(e,t){var n=2*Math.PI;return function(r){if(0==r||1==r)return r;var i=t/n*Math.asin(1/e);return e*Math.pow(2,-10*r)*Math.sin((r-i)*n/t)+1}},e.elasticOut=e.getElasticOut(1,.3),e.getElasticInOut=function(e,t){var n=2*Math.PI;return function(r){var i=t/n*Math.asin(1/e);return(r*=2)<1?-0.5*e*Math.pow(2,10*(r-=1))*Math.sin((r-i)*n/t):.5*e*Math.pow(2,-10*(r-=1))*Math.sin((r-i)*n/t)+1}},e.elasticInOut=e.getElasticInOut(1,.3*1.5),t.Ease=e}(),!function(){var e=function(){throw"MotionGuidePlugin cannot be instantiated."};e.priority=0,e._rotOffS,e._rotOffE,e._rotNormS,e._rotNormE,e.install=function(){return t.Tween.installPlugin(e,["guide","x","y","rotation"]),t.Tween.IGNORE},e.init=function(e,t,n){var r=e.target;return r.hasOwnProperty("x")||(r.x=0),r.hasOwnProperty("y")||(r.y=0),r.hasOwnProperty("rotation")||(r.rotation=0),"rotation"==t&&(e.__needsRot=!0),"guide"==t?null:n},e.step=function(t,n,r,i,s){if("rotation"==n&&(t.__rotGlobalS=r,t.__rotGlobalE=i,e.testRotData(t,s)),"guide"!=n)return i;var o,u=i;u.hasOwnProperty("path")||(u.path=[]);var f=u.path;if(u.hasOwnProperty("end")||(u.end=1),u.hasOwnProperty("start")||(u.start=r&&r.hasOwnProperty("end")&&r.path===f?r.end:0),u.hasOwnProperty("_segments")&&u._length)return i;var l=f.length,c=10;if(l>=6&&0==(l-2)%4){u._segments=[],u._length=0;for(var h=2;l>h;h+=4){for(var p,d,v=f[h-2],m=f[h-1],g=f[h+0],y=f[h+1],b=f[h+2],w=f[h+3],E=v,S=m,x=0,T=[],N=1;c>=N;N++){var C=N/c,k=1-C;p=k*k*v+2*k*C*g+C*C*b,d=k*k*m+2*k*C*y+C*C*w,x+=T[T.push(Math.sqrt((o=p-E)*o+(o=d-S)*o))-1],E=p,S=d}u._segments.push(x),u._segments.push(T),u._length+=x}o=u.orient,u.orient=!0;var L={};return e.calc(u,u.start,L),t.__rotPathS=Number(L.rotation.toFixed(5)),e.calc(u,u.end,L),t.__rotPathE=Number(L.rotation.toFixed(5)),u.orient=!1,e.calc(u,u.end,s),u.orient=o,u.orient?(t.__guideData=u,e.testRotData(t,s),i):i}throw"invalid 'path' data, please see documentation for valid paths"},e.testRotData=function(e,t){if(void 0===e.__rotGlobalS||void 0===e.__rotGlobalE){if(e.__needsRot)return;e.__rotGlobalS=e.__rotGlobalE=void 0!==e._curQueueProps.rotation?e._curQueueProps.rotation:t.rotation=e.target.rotation||0}if(void 0!==e.__guideData){var n=e.__guideData,r=e.__rotGlobalE-e.__rotGlobalS,i=e.__rotPathE-e.__rotPathS,s=r-i;if("auto"==n.orient)s>180?s-=360:-180>s&&(s+=360);else if("cw"==n.orient){for(;0>s;)s+=360;0==s&&r>0&&180!=r&&(s+=360)}else if("ccw"==n.orient){for(s=r-(i>180?360-i:i);s>0;)s-=360;0==s&&0>r&&-180!=r&&(s-=360)}n.rotDelta=s,n.rotOffS=e.__rotGlobalS-e.__rotPathS,e.__rotGlobalS=e.__rotGlobalE=e.__guideData=e.__needsRot=void 0}},e.tween=function(t,n,r,i,s,o,u){var f=s.guide;if(void 0==f||f===i.guide)return r;if(f.lastRatio!=o){var l=(f.end-f.start)*(u?f.end:o)+f.start;switch(e.calc(f,l,t.target),f.orient){case"cw":case"ccw":case"auto":t.target.rotation+=f.rotOffS+f.rotDelta*o;break;case"fixed":default:t.target.rotation+=f.rotOffS}f.lastRatio=o}return"rotation"!=n||f.orient&&"false"!=f.orient?t.target[n]:r},e.calc=function(t,n,r){void 0==t._segments&&e.validate(t),void 0==r&&(r={x:0,y:0,rotation:0});for(var i=t._segments,s=t.path,o=t._length*n,u=i.length-2,f=0;o>i[f]&&u>f;)o-=i[f],f+=2;var l=i[f+1],c=0;for(u=l.length-1;o>l[c]&&u>c;)o-=l[c],c++;var h=c/++u+o/(u*l[c]);f=2*f+2;var p=1-h;return r.x=p*p*s[f-2]+2*p*h*s[f+0]+h*h*s[f+2],r.y=p*p*s[f-1]+2*p*h*s[f+1]+h*h*s[f+3],t.orient&&(r.rotation=57.2957795*Math.atan2((s[f+1]-s[f-1])*p+(s[f+3]-s[f+1])*h,(s[f+0]-s[f-2])*p+(s[f+2]-s[f+0])*h)),r},t.MotionGuidePlugin=e}(),!function(){var e=t.TweenJS=t.TweenJS||{}}(),e.render=t}),define("core/sync",["SCJ"],function(SCJ,Graphics){window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)}}(),window.requestTimeout=function(e,t){function i(){var s=(new Date).getTime(),o=s-n;o>=t?e.call():r.value=requestAnimFrame(i)}if(!window.requestAnimationFrame&&!window.webkitRequestAnimationFrame&&(!window.mozRequestAnimationFrame||!window.mozCancelRequestAnimationFrame)&&!window.oRequestAnimationFrame&&!window.msRequestAnimationFrame)return window.setTimeout(e,t);var n=(new Date).getTime(),r=new Object;return r.value=requestAnimFrame(i),r},window.clearRequestTimeout=function(e){window.cancelAnimationFrame?window.cancelAnimationFrame(e.value):window.webkitCancelAnimationFrame?window.webkitCancelAnimationFrame(e.value):window.webkitCancelRequestAnimationFrame?window.webkitCancelRequestAnimationFrame(e.value):window.mozCancelRequestAnimationFrame?window.mozCancelRequestAnimationFrame(e.value):window.oCancelRequestAnimationFrame?window.oCancelRequestAnimationFrame(e.value):window.msCancelRequestAnimationFrame?window.msCancelRequestAnimationFrame(e.value):clearTimeout(e)};var Sync={};return function(){var e=function(){var t=function(e){return Object.prototype.toString.call(e)==="[object Array]"},n=function(e,n){if(t(e))for(var r=0,i=e.length;r<i;r++){var s=n.length===1?n(e[r]):n(r,e[r]);if(s!==undefined)return s}else for(var o in e)if(e.hasOwnProperty(o)){var s=n.length===1?n(e[o]):n(o,e[o]);if(s!==undefined)return s}},r=function(n){return t(n)?n.length===0:!e.each(n,function(e){return!0})},i=function(e,n,r){if(t(e)){var i=new Array(e.length);for(var s=0,o=e.length;s<o;s++)i[s]=n(e[s]);return i}var u=r?n:null;r=r||n;var a={};for(var f in e)if(e.hasOwnProperty(f)){var l=e[f],c=u?u(f):f,h=r?r(l):l;a[c]=h}return a},s=function(e){return i(e)},o=function(e){var t=0,n=e.split(".");for(var r=0;r<3;r++)t*=100,r<n.length&&(t+=parseInt(n[r],10));return t},u=function(e,t){var n=e.substring(1),r=n.split(".");r[r.length-1]="0",r[r.length-2]=(parseInt(r[r.length-2],10)+1).toString();var i=r.join("."),s=o(t);return o(n)<=s&&s<o(i)},a=function(e,n){if(!t(n)){var r=new Array(arguments.length-1);for(var i=1;i<arguments.length;i++)r[i-1]=arguments[i];return a(e,r)}return e.replace(/\{{1,2}\d+\}{1,2}/g,function(e){if(e.indexOf("{{")==0&&e.indexOf("}}")==e.length-2)return e.substring(1,e.length-1);var t=0;while(e[t]=="{")t++;var r=e.length-1;while(e[r]=="}")r--;var i=parseInt(e.substring(t,r+1),10);return e.replace("{"+i+"}",n[i])})},f=function(e){var t=!1;return function(){if(t)return;e.apply(this,arguments),t=!0}};return{isArray:t,each:n,isEmpty:r,map:i,clone:s,v2n:o,testVersion:u,format:a,once:f}}(),t={ALL:0,TRACE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5,OFF:100},n=function(){this.level=t.DEBUG};n.prototype={log:function(e,t){this.level<=e},trace:function(e){this.log(t.TRACE,e)},debug:function(e){this.log(t.DEBUG,e)},info:function(e){this.log(t.INFO,e)},warn:function(e){this.log(t.WARN,e)},error:function(e){this.log(t.ERROR,e)}};var r=function(e,t){e.name=t.name,e.version=t.version},i=function(e){e.init();var t={};r(t,e),Sync.modules[e.name]=t},s=function(e){i(e)},o=function(){Sync.logger=new n,Sync.Logging={Logger:n,Level:t},Sync._=e,Sync.modules={core:{name:"core",version:"0.7.0"}},Sync.binders={},Sync.builders={},Sync.define=s};o()}(),function(){function sprintf(e){var t=arguments;return e.toString().replace(new RegExp("{\\d+}","g"),function(e){var n=parseInt(e.substring(1,e.length-1),10);return t[n+1]})}function trim(e){return e.replace(/ +/g,"")}function getPrecedence(e){var t=e[0];switch(t){case"dot":case"sub":case"call":return 1;case"unary-postfix":case"unary-prefix":return 2;case"var":case"binary":switch(e[1]){case"*":case"/":case"%":return 3;case"+":case"-":return 4;case"<<":case">>":case">>>":return 5;case"<":case"<=":case">":case">=":case"instanceof":return 6;case"==":case"!=":case"===":case"!==":return 7;case"&":return 8;case"^":return 9;case"|":return 10;case"&&":return 11;case"||":return 12};case"conditional":return 13;case"assign":return 14;case"new":return 15;case"seq":case"stat":case"name":case"object":case"array":case"num":case"regexp":case"string":case"function":case"defun":case"for":case"for-in":case"block":case"while":case"do":case"if":case"break":case"continue":case"return":case"throw":case"try":case"switch":return 0;default:return 100}}function isSyncPattern(e){if(e[0]!="call")return!1;var t=e[1];if(t[0]!="name"||t[1]!="eval")return!1;var n=e[2][0];if(!n||n[0]!="call")return!1;var r=n[1];if(!r||r[0]!="dot"||r[2]!="compile")return!1;var i=r[1];if(!i||i[0]!="name"||i[1]!=compile.rootName)return!1;var s=n[2][0];if(!s||s[0]!="string")return!1;var o=n[2][1];return!o||o[0]!="function"?!1:!0}function compileSyncPattern(e,t,n,r){var i=e[2][0][2][0][1],s=e[2][0][2][1],o=new SyncTreeGenerator(i,t),u=o.generate(s);r.write(i+" << ");var a=new CodeGenerator(i,t,n,r),f=s[1]||"";return a.generate(f,s[2],u),f}var parse=function(){function d(e){return p.letter.test(e)}function v(e){return e=e.charCodeAt(0),e>=48&&e<=57}function m(e){return v(e)||d(e)}function g(e){return p.non_spacing_mark.test(e)||p.space_combining_mark.test(e)}function y(e){return p.connector_punctuation.test(e)}function b(e){return e=="$"||e=="_"||d(e)}function w(e){return b(e)||g(e)||v(e)||y(e)||e=="‌"||e=="‍"}function E(e){if(s.test(e))return parseInt(e.substr(2),16);if(o.test(e))return parseInt(e.substr(1),8);if(u.test(e))return parseFloat(e)}function S(e,t,n,r){this.message=e,this.line=t,this.col=n,this.pos=r;try{({})()}catch(i){this.stack=i.stack}}function x(e,t,n,r){throw new S(e,t,n,r)}function T(e,t,n){return e.type==t&&(n==null||e.value==n)}function C(t){function o(){return s.text.charAt(s.pos)}function u(e){var t=s.text.charAt(s.pos++);if(e&&!t)throw N;return t=="\n"?(s.newline_before=!0,++s.line,s.col=0):++s.col,t}function h(){return!s.peek()}function p(e,t){var n=s.text.indexOf(e,s.pos);if(t&&n==-1)throw N;return n}function d(){s.tokline=s.line,s.tokcol=s.col,s.tokpos=s.pos}function g(e,t,r){s.regex_allowed=e=="operator"&&!R(L,t)||e=="keyword"&&R(n,t)||e=="punc"&&R(l,t);var i={type:e,value:t,line:s.tokline,col:s.tokcol,pos:s.tokpos,nlb:s.newline_before};return r||(i.comments_before=s.comments_before,s.comments_before=[]),s.newline_before=!1,i}function y(){while(R(f,o()))u()}function S(e){var t="",n=o(),r=0;while(n&&e(n,r++))t+=u(),n=o();return t}function T(e){x(e,s.tokline,s.tokcol,s.tokpos)}function C(e){var t=!1,n=!1,r=!1,i=e==".",s=S(function(s,o){return s=="x"||s=="X"?r?!1:r=!0:!!r||s!="E"&&s!="e"?s=="-"?n||o==0&&!e?!0:!1:s=="+"?n:(n=!1,s=="."?!i&&!r?i=!0:!1:m(s)):t?!1:t=n=!0});e&&(s=e+s);var o=E(s);if(!isNaN(o))return g("num",o);T("Invalid syntax: "+s)}function k(){var e=u(!0);switch(e){case"n":return"\n";case"r":return"\r";case"t":return"	";case"b":return"\b";case"v":return"";case"f":return"\f";case"0":return"\0";case"x":return String.fromCharCode(A(2));case"u":return String.fromCharCode(A(4));default:return e}}function A(e){var t=0;for(;e>0;--e){var n=parseInt(u(!0),16);isNaN(n)&&T("Invalid hex-character pattern in string"),t=t<<4|n}return t}function O(){return I("Unterminated string constant",function(){var e=u(),t="";for(;;){var n=u(!0);if(n=="\\")n=k();else if(n==e)break;t+=n}return g("string",t)})}function M(){u();var e=p("\n"),t;return e==-1?(t=s.text.substr(s.pos),s.pos=s.text.length):(t=s.text.substring(s.pos,e),s.pos=e),g("comment1",t,!0)}function _(){return u(),I("Unterminated multiline comment",function(){var e=p("*/",!0),t=s.text.substring(s.pos,e),n=g("comment2",t,!0);return s.pos=e+2,s.line+=t.split("\n").length-1,s.newline_before=t.indexOf("\n")>=0,/^@cc_on/i.test(t)&&(U("WARNING: at line "+s.line),U('*** Found "conditional comment": '+t),U("*** UglifyJS DISCARDS ALL COMMENTS.  This means your code might no longer work properly in Internet Explorer.")),n})}function D(){var e=!1,t="",n;while((n=o())!=null)if(!e)if(n=="\\")e=!0,u();else{if(!w(n))break;t+=u()}else n!="u"&&T("Expecting UnicodeEscapeSequence -- uXXXX"),n=k(),w(n)||T("Unicode char: "+n.charCodeAt(0)+" is not valid in identifier"),t+=n,e=!1;return t}function P(){return I("Unterminated regular expression",function(){var e=!1,t="",n,r=!1;while(n=u(!0))if(e)t+="\\"+n,e=!1;else if(n=="[")r=!0,t+=n;else if(n=="]"&&r)r=!1,t+=n;else{if(n=="/"&&!r)break;n=="\\"?e=!0:t+=n}var i=D();return g("regexp",[t,i])})}function H(e){function t(e){if(!o())return e;var n=e+o();return R(a,n)?(u(),t(n)):e}return g("operator",t(e||u()))}function B(){u();var e=s.regex_allowed;switch(o()){case"/":return s.comments_before.push(M()),s.regex_allowed=e,q();case"*":return s.comments_before.push(_()),s.regex_allowed=e,q()}return s.regex_allowed?P():H("/")}function j(){return u(),v(o())?C("."):g("punc",".")}function F(){var t=D();return R(e,t)?R(a,t)?g("operator",t):R(r,t)?g("atom",t):g("keyword",t):g("name",t)}function I(e,t){try{return t()}catch(n){if(n!==N)throw n;T(e)}}function q(e){if(e)return P();y(),d();var t=o();if(!t)return g("eof");if(v(t))return C();if(t=='"'||t=="'")return O();if(R(c,t))return g("punc",u());if(t==".")return j();if(t=="/")return B();if(R(i,t))return H();if(t=="\\"||b(t))return F();T("Unexpected character '"+t+"'")}var s={text:t.replace(/\r\n?|[\n\u2028\u2029]/g,"\n").replace(/^\uFEFF/,""),pos:0,tokpos:0,line:0,tokline:0,col:0,tokcol:0,newline_before:!1,regex_allowed:!1,comments_before:[]};return q.context=function(e){return e&&(s=e),s},q}function D(e,t,n){this.name=e,this.start=t,this.end=n}function P(e,t,n){function i(e,t){return T(r.token,e,t)}function s(){return r.peeked||(r.peeked=r.input())}function o(){return r.prev=r.token,r.peeked?(r.token=r.peeked,r.peeked=null):r.token=r.input(),r.token}function u(){return r.prev}function a(e,t,n,i){var s=r.input.context();x(e,t!=null?t:s.tokline,n!=null?n:s.tokcol,i!=null?i:s.tokpos)}function f(e,t){a(t,e.line,e.col)}function l(e){e==null&&(e=r.token),f(e,"Unexpected token: "+e.type+" ("+e.value+")")}function c(e,t){if(i(e,t))return o();f(r.token,"Unexpected token "+r.token.type+", expected "+e)}function h(e){return c("punc",e)}function p(){return!t&&(r.token.nlb||i("eof")||i("punc","}"))}function d(){i("punc",";")?o():p()||l()}function v(){return F(arguments)}function m(){h("(");var e=lt();return h(")"),e}function g(e,t,n){return e instanceof D?e:new D(e,t,n)}function b(){i("operator","/")&&(r.peeked=null,r.token=r.input(!0));switch(r.token.type){case"num":case"string":case"regexp":case"operator":case"atom":return E();case"name":return T(s(),"punc",":")?w(B(r.token.value,o,o)):E();case"punc":switch(r.token.value){case"{":return v("block",W());case"[":case"(":return E();case";":return o(),v("block");default:l()};case"keyword":switch(B(r.token.value,o)){case"break":return S("break");case"continue":return S("continue");case"debugger":return d(),v("debugger");case"do":return function(e){return c("keyword","while"),v("do",B(m,d),e)}(ct(y));case"for":return N();case"function":return I(!0);case"if":return z();case"return":return r.in_function==0&&a("'return' outside of function"),v("return",i("punc",";")?(o(),null):p()?null:B(lt,d));case"switch":return v("switch",m(),X());case"throw":return v("throw",B(lt,d));case"try":return V();case"var":return B(J,d);case"const":return B(K,d);case"while":return v("while",m(),ct(y));case"with":return v("with",m(),y());default:l()}}}function w(e){r.labels.push(e);var n=r.token,i=y();return t&&!R(M,i[0])&&l(n),r.labels.pop(),v("label",e,i)}function E(){return v("stat",B(lt,d))}function S(e){var t=i("name")?r.token.value:null;return t!=null?(o(),q(t,r.labels)||a("Label "+t+" without matching loop or statement")):r.in_loop==0&&a(e+" not inside a loop or switch"),d(),v(e,t)}function N(){h("(");var e=null;if(!i("punc",";")){e=i("keyword","var")?(o(),J(!0)):lt(!0,!0);if(i("operator","in"))return j(e)}return P(e)}function P(e){h(";");var t=i("punc",";")?null:lt();h(";");var n=i("punc",")")?null:lt();return h(")"),v("for",e,t,n,ct(y))}function j(e){var t=e[0]=="var"?v("name",e[1][0]):e;o();var n=lt();return h(")"),v("for-in",e,t,n,ct(y))}function U(e){var t=i("name")?B(r.token.value,o):null;return e&&!t&&l(),h("("),v(e?"defun":"function",t,function(e,t){while(!i("punc",")"))e?e=!1:h(","),i("name")||l(),t.push(r.token.value),o();return o(),t}(!0,[]),function(){++r.in_function;var e=r.in_loop;r.in_loop=0;var t=W();return--r.in_function,r.in_loop=e,t}())}function z(){var e=m(),t=y(),n;return i("keyword","else")&&(o(),n=y()),v("if",e,t,n)}function W(){h("{");var e=[];while(!i("punc","}"))i("eof")&&l(),e.push(y());return o(),e}function V(){var e=W(),t,n;if(i("keyword","catch")){o(),h("("),i("name")||a("Name expected");var s=r.token.value;o(),h(")"),t=[s,W()]}return i("keyword","finally")&&(o(),n=W()),!t&&!n&&a("Missing catch/finally blocks"),v("try",e,t,n)}function $(e){var t=[];for(;;){i("name")||l();var n=r.token.value;o(),i("operator","=")?(o(),t.push([n,lt(!1,e)])):t.push([n]);if(!i("punc",","))break;o()}return t}function J(e){return v("var",$(e))}function K(){return v("const",$())}function Q(){var e=G(!1),t;return i("punc","(")?(o(),t=Y(")")):t=[],rt(v("new",e,t),!0)}function G(e){if(i("operator","new"))return o(),Q();if(i("operator")&&R(k,r.token.value))return it("unary-prefix",B(r.token.value,o),G(e));if(i("punc")){switch(r.token.value){case"(":return o(),rt(B(lt,H(h,")")),e);case"[":return o(),rt(Z(),e);case"{":return o(),rt(et(),e)}l()}if(i("keyword","function"))return o(),rt(I(!1),e);if(R(_,r.token.type)){var t=r.token.type=="regexp"?v("regexp",r.token.value[0],r.token.value[1]):v(r.token.type,r.token.value);return rt(B(t,o),e)}l()}function Y(e,t,n){var r=!0,s=[];while(!i("punc",e)){r?r=!1:h(",");if(t&&i("punc",e))break;i("punc",",")&&n?s.push(["atom","undefined"]):s.push(lt(!1))}return o(),s}function Z(){return v("array",Y("]",!t,!0))}function et(){var e=!0,n=[];while(!i("punc","}")){e?e=!1:h(",");if(!t&&i("punc","}"))break;var s=r.token.type,u=tt();s!="name"||u!="get"&&u!="set"||!!i("punc",":")?(h(":"),n.push([u,lt(!1)])):n.push([nt(),I(!1),u])}return o(),v("object",n)}function tt(){switch(r.token.type){case"num":case"string":return B(r.token.value,o)}return nt()}function nt(){switch(r.token.type){case"name":case"operator":case"keyword":case"atom":return B(r.token.value,o);default:l()}}function rt(e,t){return i("punc",".")?(o(),rt(v("dot",e,nt()),t)):i("punc","[")?(o(),rt(v("sub",e,B(lt,H(h,"]"))),t)):t&&i("punc","(")?(o(),rt(v("call",e,Y(")")),!0)):t&&i("operator")&&R(L,r.token.value)?B(H(it,"unary-postfix",r.token.value,e),o):e}function it(e,t,n){return(t=="++"||t=="--")&&!at(n)&&a("Invalid use of "+t+" operator"),v(e,t,n)}function st(e,t,n){var s=i("operator")?r.token.value:null;s&&s=="in"&&n&&(s=null);var u=s!=null?O[s]:null;if(u!=null&&u>t){o();var a=st(G(!0),u,n);return st(v("binary",s,e,a),t,n)}return e}function ot(e){return st(G(!0),0,e)}function ut(e){var t=ot(e);if(i("operator","?")){o();var n=lt(!1);return h(":"),v("conditional",t,n,lt(!1,e))}return t}function at(e){if(!t)return!0;switch(e[0]){case"dot":case"sub":case"new":case"call":return!0;case"name":return e[1]!="this"}}function ft(e){var t=ut(e),n=r.token.value;if(i("operator")&&R(A,n)){if(at(t))return o(),v("assign",A[n],t,ft(e));a("Invalid assignment")}return t}function lt(e,t){arguments.length==0&&(e=!0);var n=ft(t);return e&&i("punc",",")?(o(),v("seq",n,lt(!0,t))):n}function ct(e){try{return++r.in_loop,e()}finally{--r.in_loop}}var r={input:typeof e=="string"?C(e,!0):e,token:null,prev:null,peeked:null,in_function:0,in_loop:0,labels:[]};r.token=o();var y=n?function(){var e=r.token,t=b.apply(this,arguments);return t[0]=g(t[0],e,u()),t}:b,I=n?function(){var e=u(),t=U.apply(this,arguments);return t[0]=g(t[0],e,u()),t}:U,X=H(ct,function(){h("{");var e=[],t=null;while(!i("punc","}"))i("eof")&&l(),i("keyword","case")?(o(),t=[],e.push([lt(),t]),h(":")):i("keyword","default")?(o(),h(":"),t=[],e.push([null,t])):(t||l(),t.push(y()));return o(),e});return v("toplevel",function(e){while(!i("eof"))e.push(y());return e}([]))}function H(e){var t=F(arguments,1);return function(){return e.apply(this,t.concat(F(arguments)))}}function B(e){e instanceof Function&&(e=e());for(var t=1,n=arguments.length;--n>0;++t)arguments[t]();return e}function j(e){var t={};for(var n=0;n<e.length;++n)t[e[n]]=!0;return t}function F(e,t){return Array.prototype.slice.call(e,t==null?0:t)}function I(e){return e.split("")}function q(e,t){for(var n=t.length;--n>=0;)if(t[n]===e)return!0;return!1}function R(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var e=j(["break","case","catch","const","continue","default","delete","do","else","finally","for","function","if","in","instanceof","new","return","switch","throw","try","typeof","var","void","while","with"]),t=j(["abstract","boolean","byte","char","class","debugger","double","enum","export","extends","final","float","goto","implements","import","int","interface","long","native","package","private","protected","public","short","static","super","synchronized","throws","transient","volatile"]),n=j(["return","new","delete","throw","else","case"]),r=j(["false","null","true","undefined"]),i=j(I("+-*&%=<>!?|~^")),s=/^0x[0-9a-f]+$/i,o=/^0[0-7]+$/,u=/^\d*\.?\d*(?:e[+-]?\d*(?:\d\.?|\.?\d)\d*)?$/i,a=j(["in","instanceof","typeof","new","void","delete","++","--","+","-","!","~","&","|","^","*","/","%",">>","<<",">>>","<",">","<=",">=","==","===","!=","!==","?","=","+=","-=","/=","*=","%=",">>=","<<=",">>>=","|=","^=","&=","&&","||"]),f=j(I(" \n\r	​")),l=j(I("[{}(,.;:")),c=j(I("[]{}(),;:")),h=j(I("gmsiy")),p={letter:new RegExp("[\\u0041-\\u005A\\u0061-\\u007A\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u0523\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0621-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971\\u0972\\u097B-\\u097F\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C33\\u0C35-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D28\\u0D2A-\\u0D39\\u0D3D\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC\\u0EDD\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8B\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10D0-\\u10FA\\u10FC\\u1100-\\u1159\\u115F-\\u11A2\\u11A8-\\u11F9\\u1200-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u1676\\u1681-\\u169A\\u16A0-\\u16EA\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u1900-\\u191C\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19A9\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u2094\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2183\\u2184\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2C6F\\u2C71-\\u2C7D\\u2C80-\\u2CE4\\u2D00-\\u2D25\\u2D30-\\u2D65\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005\\u3006\\u3031-\\u3035\\u303B\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31B7\\u31F0-\\u31FF\\u3400\\u4DB5\\u4E00\\u9FC3\\uA000-\\uA48C\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA65F\\uA662-\\uA66E\\uA67F-\\uA697\\uA717-\\uA71F\\uA722-\\uA788\\uA78B\\uA78C\\uA7FB-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA90A-\\uA925\\uA930-\\uA946\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAC00\\uD7A3\\uF900-\\uFA2D\\uFA30-\\uFA6A\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),non_spacing_mark:new RegExp("[\\u0300-\\u036F\\u0483-\\u0487\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u0610-\\u061A\\u064B-\\u065E\\u0670\\u06D6-\\u06DC\\u06DF-\\u06E4\\u06E7\\u06E8\\u06EA-\\u06ED\\u0711\\u0730-\\u074A\\u07A6-\\u07B0\\u07EB-\\u07F3\\u0816-\\u0819\\u081B-\\u0823\\u0825-\\u0827\\u0829-\\u082D\\u0900-\\u0902\\u093C\\u0941-\\u0948\\u094D\\u0951-\\u0955\\u0962\\u0963\\u0981\\u09BC\\u09C1-\\u09C4\\u09CD\\u09E2\\u09E3\\u0A01\\u0A02\\u0A3C\\u0A41\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A70\\u0A71\\u0A75\\u0A81\\u0A82\\u0ABC\\u0AC1-\\u0AC5\\u0AC7\\u0AC8\\u0ACD\\u0AE2\\u0AE3\\u0B01\\u0B3C\\u0B3F\\u0B41-\\u0B44\\u0B4D\\u0B56\\u0B62\\u0B63\\u0B82\\u0BC0\\u0BCD\\u0C3E-\\u0C40\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C62\\u0C63\\u0CBC\\u0CBF\\u0CC6\\u0CCC\\u0CCD\\u0CE2\\u0CE3\\u0D41-\\u0D44\\u0D4D\\u0D62\\u0D63\\u0DCA\\u0DD2-\\u0DD4\\u0DD6\\u0E31\\u0E34-\\u0E3A\\u0E47-\\u0E4E\\u0EB1\\u0EB4-\\u0EB9\\u0EBB\\u0EBC\\u0EC8-\\u0ECD\\u0F18\\u0F19\\u0F35\\u0F37\\u0F39\\u0F71-\\u0F7E\\u0F80-\\u0F84\\u0F86\\u0F87\\u0F90-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u102D-\\u1030\\u1032-\\u1037\\u1039\\u103A\\u103D\\u103E\\u1058\\u1059\\u105E-\\u1060\\u1071-\\u1074\\u1082\\u1085\\u1086\\u108D\\u109D\\u135F\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17B7-\\u17BD\\u17C6\\u17C9-\\u17D3\\u17DD\\u180B-\\u180D\\u18A9\\u1920-\\u1922\\u1927\\u1928\\u1932\\u1939-\\u193B\\u1A17\\u1A18\\u1A56\\u1A58-\\u1A5E\\u1A60\\u1A62\\u1A65-\\u1A6C\\u1A73-\\u1A7C\\u1A7F\\u1B00-\\u1B03\\u1B34\\u1B36-\\u1B3A\\u1B3C\\u1B42\\u1B6B-\\u1B73\\u1B80\\u1B81\\u1BA2-\\u1BA5\\u1BA8\\u1BA9\\u1C2C-\\u1C33\\u1C36\\u1C37\\u1CD0-\\u1CD2\\u1CD4-\\u1CE0\\u1CE2-\\u1CE8\\u1CED\\u1DC0-\\u1DE6\\u1DFD-\\u1DFF\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2CEF-\\u2CF1\\u2DE0-\\u2DFF\\u302A-\\u302F\\u3099\\u309A\\uA66F\\uA67C\\uA67D\\uA6F0\\uA6F1\\uA802\\uA806\\uA80B\\uA825\\uA826\\uA8C4\\uA8E0-\\uA8F1\\uA926-\\uA92D\\uA947-\\uA951\\uA980-\\uA982\\uA9B3\\uA9B6-\\uA9B9\\uA9BC\\uAA29-\\uAA2E\\uAA31\\uAA32\\uAA35\\uAA36\\uAA43\\uAA4C\\uAAB0\\uAAB2-\\uAAB4\\uAAB7\\uAAB8\\uAABE\\uAABF\\uAAC1\\uABE5\\uABE8\\uABED\\uFB1E\\uFE00-\\uFE0F\\uFE20-\\uFE26]"),space_combining_mark:new RegExp("[\\u0903\\u093E-\\u0940\\u0949-\\u094C\\u094E\\u0982\\u0983\\u09BE-\\u09C0\\u09C7\\u09C8\\u09CB\\u09CC\\u09D7\\u0A03\\u0A3E-\\u0A40\\u0A83\\u0ABE-\\u0AC0\\u0AC9\\u0ACB\\u0ACC\\u0B02\\u0B03\\u0B3E\\u0B40\\u0B47\\u0B48\\u0B4B\\u0B4C\\u0B57\\u0BBE\\u0BBF\\u0BC1\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCC\\u0BD7\\u0C01-\\u0C03\\u0C41-\\u0C44\\u0C82\\u0C83\\u0CBE\\u0CC0-\\u0CC4\\u0CC7\\u0CC8\\u0CCA\\u0CCB\\u0CD5\\u0CD6\\u0D02\\u0D03\\u0D3E-\\u0D40\\u0D46-\\u0D48\\u0D4A-\\u0D4C\\u0D57\\u0D82\\u0D83\\u0DCF-\\u0DD1\\u0DD8-\\u0DDF\\u0DF2\\u0DF3\\u0F3E\\u0F3F\\u0F7F\\u102B\\u102C\\u1031\\u1038\\u103B\\u103C\\u1056\\u1057\\u1062-\\u1064\\u1067-\\u106D\\u1083\\u1084\\u1087-\\u108C\\u108F\\u109A-\\u109C\\u17B6\\u17BE-\\u17C5\\u17C7\\u17C8\\u1923-\\u1926\\u1929-\\u192B\\u1930\\u1931\\u1933-\\u1938\\u19B0-\\u19C0\\u19C8\\u19C9\\u1A19-\\u1A1B\\u1A55\\u1A57\\u1A61\\u1A63\\u1A64\\u1A6D-\\u1A72\\u1B04\\u1B35\\u1B3B\\u1B3D-\\u1B41\\u1B43\\u1B44\\u1B82\\u1BA1\\u1BA6\\u1BA7\\u1BAA\\u1C24-\\u1C2B\\u1C34\\u1C35\\u1CE1\\u1CF2\\uA823\\uA824\\uA827\\uA880\\uA881\\uA8B4-\\uA8C3\\uA952\\uA953\\uA983\\uA9B4\\uA9B5\\uA9BA\\uA9BB\\uA9BD-\\uA9C0\\uAA2F\\uAA30\\uAA33\\uAA34\\uAA4D\\uAA7B\\uABE3\\uABE4\\uABE6\\uABE7\\uABE9\\uABEA\\uABEC]"),connector_punctuation:new RegExp("[\\u005F\\u203F\\u2040\\u2054\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFF3F]")};S.prototype.toString=function(){return this.message+" (line: "+this.line+", col: "+this.col+", pos: "+this.pos+")"+"\n\n"+this.stack};var N={},k=j(["typeof","void","delete","--","++","!","~","-","+"]),L=j(["--","++"]),A=function(e,t,n){while(n<e.length)t[e[n]]=e[n].substr(0,e[n].length-1),n++;return t}(["+=","-=","/=","*=","%=",">>=","<<=",">>>=","|=","^=","&="],{"=":!0},0),O=function(e,t){for(var n=0,r=1;n<e.length;++n,++r){var i=e[n];for(var s=0;s<i.length;++s)t[i[s]]=r}return t}([["||"],["&&"],["|"],["^"],["&"],["==","===","!=","!=="],["<",">","<=",">=","in","instanceof"],[">>","<<",">>>"],["+","-"],["*","/","%"]],{}),M=j(["for","do","while","switch"]),_=j(["atom","num","string","regexp","name"]);D.prototype.toString=function(){return this.name};var U=function(){};return P}(),codeGenerator=typeof eval("(function () {})")=="function"?function(e){return e}:function(e){return"false || "+e},stringify=typeof JSON!="undefined"&&JSON.stringify?function(e){return JSON.stringify(e)}:function(){var e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,t={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return function(n){return e.lastIndex=0,e.test(n)?'"'+n.replace(e,function(e){var n=t[e];return typeof n=="s"?n:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n+'"'}}(),CodeWriter=function(e){this._indent=e||"    ",this._indentLevel=0,this.lines=[]};CodeWriter.prototype={write:function(e){if(e===undefined)return;return this.lines.length==0&&this.lines.push(""),this.lines[this.lines.length-1]+=e,this},writeLine:function(){return this.write.apply(this,arguments),this.lines.push(""),this},writeIndents:function(){var e=new Array(this._indentLevel);for(var t=0;t<this._indentLevel;t++)e[t]=this._indent;return this.write(e.join("")),this},addIndentLevel:function(e){return this._indentLevel+=e,this}};var SeedProvider=function(){this._seeds={}};SeedProvider.prototype.next=function(e){var t=this._seeds[e];return t==undefined?(this._seeds[e]=0,0):(this._seeds[e]=++t,t)};var SyncTreeGenerator=function(e,t){this._binder=Sync.binders[e],this._seedProvider=t};SyncTreeGenerator.prototype={generate:function(e){var t=e[2],n=e[3],r={type:"delay",stmts:[]};return this._visitStatements(n,r.stmts),r},_getBindInfo:function(e){var t=e[0];if(t=="stat"){var n=e[1];if(n[0]=="call"){var r=n[1];if(r[0]=="name"&&r[1]==this._binder&&n[2].length==1)return{expression:n[2][0],argName:"",assignee:null}}else if(n[0]=="assign"){var i=n[2];n=n[3];if(n[0]=="call"){var r=n[1];if(r[0]=="name"&&r[1]==this._binder&&n[2].length==1)return{expression:n[2][0],argName:"_result_$",assignee:i}}}}else if(t=="var"){var s=e[1];if(s.length==1){var o=s[0],u=o[0],n=o[1];if(n&&n[0]=="call"){var r=n[1];if(r[0]=="name"&&r[1]==this._binder&&n[2].length==1)return{expression:n[2][0],argName:u,assignee:null}}}}else if(t=="return"){var n=e[1];if(n&&n[0]=="call"){var r=n[1];if(r[0]=="name"&&r[1]==this._binder&&n[2].length==1)return{expression:n[2][0],argName:"_result_$",assignee:"return"}}}return null},_visitStatements:function(e,t,n){arguments.length<=2&&(n=0);if(n>=e.length)return t.push({type:"normal"}),this;var r=e[n],i=this._getBindInfo(r);if(i){var s={type:"bind",info:i};t.push(s),i.assignee!="return"&&(s.stmts=[],this._visitStatements(e,s.stmts,n+1))}else{var o=r[0];if(o=="return"||o=="break"||o=="continue"||o=="throw")t.push({type:o,stmt:r});else if(o=="if"||o=="try"||o=="for"||o=="do"||o=="while"||o=="switch"||o=="for-in"){var u=this._visit(r);if(u.type=="raw")t.push(u),this._visitStatements(e,t,n+1);else{var a=n==e.length-1;if(a)t.push(u);else{var f={type:"combine",first:{type:"delay",stmts:[u]},second:{type:"delay",stmts:[]}};t.push(f),this._visitStatements(e,f.second.stmts,n+1)}}}else t.push({type:"raw",stmt:r}),this._visitStatements(e,t,n+1)}return this},_visit:function(e){function n(){throw new Error('"'+t+'" is not currently supported.')}var t=e[0],r=this._visitors[t];if(r)return r.call(this,e);n()},_visitBody:function(e,t){e[0]=="block"?this._visitStatements(e[1],t):this._visitStatements([e],t)},_noBinding:function(e){switch(e[e.length-1].type){case"normal":case"return":case"break":case"throw":case"continue":return!0}return!1},_collectCaseStatements:function(e,t){var n=[];for(var r=t;r<e.length;r++){var i=e[r][1];for(var s=0;s<i.length;s++){if(i[s][0]=="break")return n;n.push(i[s])}}return n},_visitors:{"for":function(e){var t=[],n=e[4];this._visitBody(n,t);if(this._noBinding(t))return{type:"raw",stmt:e};var r={type:"delay",stmts:[]},i=e[1];i&&r.stmts.push({type:"raw",stmt:i});var s={type:"for",bodyStmt:{type:"delay",stmts:t}};r.stmts.push(s);var o=e[2];o&&(s.condition=o);var u=e[3];return u&&(s.update=u),r},"for-in":function(e){var t=e[4],n=[];this._visitBody(t,n);if(this._noBinding(n))return{type:"raw",stmt:e};var r={type:"for-in",bodyStmts:n,obj:e[3]},i=e[2][1];if(e[1][0]=="var")r.argName=i;else{var s="_forInKey_$"+this._seedProvider.next("forInKey");r.argName=s,r.bodyStmts.unshift({type:"raw",stmt:parse(i+" = "+s+";")[1][0]})}return r},"while":function(e){var t=[],n=e[2];this._visitBody(n,t);if(this._noBinding(t))return{type:"raw",stmt:e};var r={type:"while",bodyStmt:{type:"delay",stmts:t}},i=e[1];return r.condition=i,r},"do":function(e){var t=[],n=e[2];this._visitBody(n,t);if(this._noBinding(t))return{type:"raw",stmt:e};var r={type:"do",bodyStmt:{type:"delay",stmts:t},condition:e[1]};return r},"switch":function(e){var t=!0,n={type:"switch",item:e[1],caseStmts:[]},r=e[2];for(var i=0;i<r.length;i++){var s={item:r[i][0],stmts:[]};n.caseStmts.push(s);var o=this._collectCaseStatements(r,i);this._visitStatements(o,s.stmts),t=t&&this._noBinding(s.stmts)}return t?{type:"raw",stmt:e}:n},"if":function(e){var t=!0,n={type:"if",conditionStmts:[]},r=e;for(;;){var i=r[1],s={cond:i,stmts:[]};n.conditionStmts.push(s);var o=r[2];this._visitBody(o,s.stmts),t=t&&this._noBinding(s.stmts);var u=r[3];if(!u||u[0]!="if")break;r=u}var u=r[3];return u&&(n.elseStmts=[],this._visitBody(u,n.elseStmts),t=t&&this._noBinding(n.elseStmts)),t?{type:"raw",stmt:e}:n},"try":function(e,t){var n=[],r=e[1];this._visitStatements(r,n);var i=this._noBinding(n),s={type:"try",bodyStmt:{type:"delay",stmts:n}},o=e[2];if(o){var u=o[0];s.exVar=u,s.catchStmts=[],this._visitStatements(o[1],s.catchStmts),i=i&&this._noBinding(s.catchStmts)}var a=e[3];return a&&(s.finallyStmt={type:"delay",stmts:[]},this._visitStatements(a,s.finallyStmt.stmts),i=i&&this._noBinding(s.finallyStmt.stmts)),i?{type:"raw",stmt:e}:s}}};var CodeGenerator=function(e,t,n,r){this._builderName=e,this._binder=Sync.binders[e],this._seedProvider=t,this._codeWriter=n,this._commentWriter=r};CodeGenerator.prototype={_code:function(){return this._codeWriter.write.apply(this._codeWriter,arguments),this},_codeLine:function(){return this._codeWriter.writeLine.apply(this._codeWriter,arguments),this},_codeIndents:function(){return this._codeWriter.writeIndents(),this},_codeIndentLevel:function(e){return this._codeWriter.addIndentLevel(e),this},_comment:function(){return this._commentWriter.write.apply(this._commentWriter,arguments),this},_commentLine:function(){return this._commentWriter.writeLine.apply(this._commentWriter,arguments),this},_commentIndents:function(){return this._commentWriter.writeIndents(),this},_commentIndentLevel:function(e){return this._commentWriter.addIndentLevel(e),this},_both:function(){return this._codeWriter.write.apply(this._codeWriter,arguments),this._commentWriter.write.apply(this._commentWriter,arguments),this},_bothLine:function(){return this._codeWriter.writeLine.apply(this._codeWriter,arguments),this._commentWriter.writeLine.apply(this._commentWriter,arguments),this},_bothIndents:function(){return this._codeWriter.writeIndents(),this._commentWriter.writeIndents(),this},_bothIndentLevel:function(e){return this._codeWriter.addIndentLevel(e),this._commentWriter.addIndentLevel(e),this},_newLine:function(){return this._codeWriter.writeLine.apply(this._codeWriter,arguments),this._commentWriter.writeLine(),this},generate:function(e,t,n){this._normalMode=!1,this._builderVar="_builder_$"+this._seedProvider.next("builderId"),this._codeLine("(function "+e+"("+t.join(", ")+") {")._commentLine("function ("+t.join(", ")+") {"),this._bothIndentLevel(1),this._codeIndents()._newLine("var "+this._builderVar+" = "+runSync.rootName+".builders["+stringify(this._builderName)+"];"),this._codeIndents()._newLine("return "+this._builderVar+".Start(this,"),this._codeIndentLevel(1),this._pos={},this._bothIndents()._visitSync(n)._newLine(),this._codeIndentLevel(-1),this._codeIndents()._newLine(");"),this._bothIndentLevel(-1),this._bothIndents()._code("})")._comment("}")},_visitSync:function(e){return this._windVisitors[e.type].call(this,e),this},_visitRaw:function(e){var t=e[0],n=this._rawVisitors[t];if(!n)throw new Error('"'+t+'" is not currently supported.');return n.call(this,e),this},_visitSyncStatements:function(e){for(var t=0;t<e.length;t++){var n=e[t];n.type=="raw"||n.type=="if"||n.type=="switch"?this._bothIndents()._visitSync(n)._newLine():n.type=="delay"?this._visitSyncStatements(n.stmts):this._bothIndents()._code("return ")._visitSync(n)._newLine(";")}},_visitRawStatements:function(e){for(var t=0;t<e.length;t++){var n=e[t];this._bothIndents()._visitRaw(n)._bothLine();switch(n[0]){case"break":case"return":case"continue":case"throw":return}}},_visitRawBody:function(e){return e[0]=="block"?this._visitRaw(e):(this._bothLine(),this._bothIndentLevel(1),this._bothIndents()._visitRaw(e),this._bothIndentLevel(-1)),this},_visitRawFunction:function(e){var t=e[1]||"",n=e[2],r=e[3];this._bothLine("function "+t+"("+n.join(", ")+") {"),this._bothIndentLevel(1);var i=this._pos.inFunction;this._pos.inFunction=!0,this._visitRawStatements(r),this._bothIndentLevel(-1),this._pos.inFunction=i,this._bothIndents()._both("}")},_windVisitors:{delay:function(e){if(e.stmts.length==1){var t=e.stmts[0];switch(t.type){case"delay":case"combine":case"normal":case"break":case"continue":case"for":case"for-in":case"while":case"do":case"try":this._visitSync(t);return;case"return":if(!t.stmt[1]){this._visitSync(t);return}}}this._newLine(this._builderVar+".Delay(function () {"),this._codeIndentLevel(1),this._visitSyncStatements(e.stmts),this._codeIndentLevel(-1),this._codeIndents()._code("})")},combine:function(e){this._newLine(this._builderVar+".Combine("),this._codeIndentLevel(1),this._bothIndents()._visitSync(e.first)._newLine(","),this._bothIndents()._visitSync(e.second)._newLine(),this._codeIndentLevel(-1),this._codeIndents()._code(")")},"for":function(e){e.condition?(this._codeLine(this._builderVar+".For(function () {")._commentLine("for ("),this._codeIndentLevel(1),this._bothIndents()._code("return ")._comment("; ")._visitRaw(e.condition)._newLine(";"),this._codeIndentLevel(-1),this._bothIndents()._code("}, ")):this._code(this._builderVar+".For(null, ")._comment("for (; "),e.update?(this._newLine("function () {"),this._codeIndentLevel(1),this._bothIndents()._comment("; ")._visitRaw(e.update)._codeLine(";")._commentLine(") {"),this._codeIndentLevel(-1),this._codeIndents()._newLine("},")):this._codeLine("null,")._commentLine("; ) {"),this._bothIndentLevel(1),this._bothIndents()._visitSync(e.bodyStmt)._newLine(),this._bothIndentLevel(-1),this._bothIndents()._code(")")._comment("}")},"for-in":function(e){this._code(this._builderVar+".ForIn(")._comment("for (var "+e.argName+" in ")._visitRaw(e.obj)._codeLine(", function ("+e.argName+") {")._commentLine(") {"),this._bothIndentLevel(1),this._visitSyncStatements(e.bodyStmts),this._bothIndentLevel(-1),this._bothIndents()._code("})")._comment("}")},"while":function(e){this._newLine(this._builderVar+".While(function () {"),this._codeIndentLevel(1),this._bothIndents()._code("return ")._comment("while (")._visitRaw(e.condition)._codeLine(";")._commentLine(") {"),this._codeIndentLevel(-1),this._codeIndents()._newLine("},"),this._bothIndentLevel(1),this._bothIndents()._visitSync(e.bodyStmt)._newLine(),this._bothIndentLevel(-1),this._bothIndents()._code(")")._comment("}")},"do":function(e){this._codeLine(this._builderVar+".Do(")._commentLine("do {"),this._bothIndentLevel(1),this._bothIndents()._visitSync(e.bodyStmt)._newLine(","),this._commentIndentLevel(-1),this._codeIndents()._newLine("function () {"),this._codeIndentLevel(1),this._bothIndents()._code("return ")._comment("} while (")._visitRaw(e.condition)._codeLine(";")._commentLine(");"),this._codeIndentLevel(-1),this._codeIndents()._newLine("}"),this._codeIndentLevel(-1),this._codeIndents()._code(")")},raw:function(e){this._visitRaw(e.stmt,!0)},bind:function(e){var t=e.info,n="";t.assignee=="return"?n="return ":t.argName!=""&&(n="var "+t.argName+" = "),this._code(this._builderVar+".Bind(")._comment(n+this._binder+"(")._visitRaw(t.expression)._comment(");")._newLine(", function ("+t.argName+") {"),this._codeIndentLevel(1),t.assignee=="return"?this._codeIndents()._newLine("return "+this._builderVar+".Return("+t.argName+");"):(t.assignee&&this._bothIndents()._visitRaw(t.assignee)._bothLine(" = "+t.argName+";"),this._visitSyncStatements(e.stmts)),this._codeIndentLevel(-1),this._codeIndents()._code("})")},"if":function(e){for(var t=0;t<e.conditionStmts.length;t++){var n=e.conditionStmts[t];this._both("if (")._visitRaw(n.cond)._bothLine(") {"),this._bothIndentLevel(1),this._visitSyncStatements(n.stmts),this._bothIndentLevel(-1),t<e.conditionStmts.length-1||e.elseStmts?this._bothIndents()._both("} else "):this._bothIndents()._code("} else ")._comment("}")}e.elseStmts?(this._bothLine("{"),this._bothIndentLevel(1)):(this._newLine("{"),this._codeIndentLevel(1)),e.elseStmts?this._visitSyncStatements(e.elseStmts):this._codeIndents()._newLine("return "+this._builderVar+".Normal();"),e.elseStmts?this._bothIndentLevel(-1):this._codeIndentLevel(-1),e.elseStmts?this._bothIndents()._both("}"):this._codeIndents()._code("}")},"switch":function(e){this._both("switch (")._visitRaw(e.item)._bothLine(") {"),this._bothIndentLevel(1);for(var t=0;t<e.caseStmts.length;t++){var n=e.caseStmts[t];n.item?this._bothIndents()._both("case ")._visitRaw(n.item)._bothLine(":"):this._bothIndents()._bothLine("default:"),this._bothIndentLevel(1),this._visitSyncStatements(n.stmts),this._bothIndentLevel(-1)}this._bothIndents()._code("}")},"try":function(e){this._codeLine(this._builderVar+".Try(")._commentLine("try {"),this._bothIndentLevel(1),this._bothIndents()._visitSync(e.bodyStmt)._newLine(","),this._commentIndentLevel(-1),e.catchStmts?(this._bothIndents()._codeLine("function ("+e.exVar+") {")._commentLine("} catch ("+e.exVar+") {"),this._bothIndentLevel(1),this._visitSyncStatements(e.catchStmts),this._bothIndentLevel(-1),this._bothIndents()._codeLine("},"),e.finallyStmt?this._commentLine("} finally {"):this._commentLine("}")):this._bothIndents()._codeLine("null,")._commentLine("} finally {"),e.finallyStmt?(this._commentIndentLevel(1),this._bothIndents()._visitSync(e.finallyStmt)._newLine(),this._commentIndentLevel(-1)):this._codeIndents()._newLine("null"),this._codeIndentLevel(-1),this._codeIndents()._code(")"),e.finallyStmt&&this._commentIndents()._comment("}")},normal:function(e){this._code(this._builderVar+".Normal()")},"throw":function(e){this._code(this._builderVar+".Throw(")._comment("throw ")._visitRaw(e.stmt[1])._code(")")._comment(";")},"break":function(e){this._code(this._builderVar+".Break()")._comment("break;")},"continue":function(e){this._code(this._builderVar+".Continue()")._comment("continue;")},"return":function(e){this._code(this._builderVar+".Return(")._comment("return"),e.stmt[1]&&this._comment(" ")._visitRaw(e.stmt[1]),this._code(")")._comment(";")}},_rawVisitors:{"var":function(e){this._both("var ");var t=e[1];for(var n=0;n<t.length;n++)this._both(t[n][0]),t[n].length>1&&this._both(" = ")._visitRaw(t[n][1]),n<t.length-1&&this._both(", ");this._both(";")},seq:function(e,t){var n=e[1],r=e[2];t||this._both("("),this._visitRaw(n),this._both(", "),r[0]=="seq"?arguments.callee.call(this,r,!0):this._visitRaw(r),t||this._both(")")},binary:function(e){var t=e[1],n=e[2],r=e[3];getPrecedence(e)<getPrecedence(n)?this._both("(")._visitRaw(n)._both(") "):this._visitRaw(n)._both(" "),this._both(t),getPrecedence(e)<=getPrecedence(r)?this._both(" (")._visitRaw(r)._both(")"):this._both(" ")._visitRaw(r)},sub:function(e){var t=e[1],n=e[2];getPrecedence(e)<getPrecedence(t)?this._both("(")._visitRaw(t)._both(")[")._visitRaw(n)._both("]"):this._visitRaw(t)._both("[")._visitRaw(n)._both("]")},"unary-postfix":function(e){var t=e[1],n=e[2];getPrecedence(e)<=getPrecedence(n)?this._both("(")._visitRaw(n)._both(")"):this._visitRaw(n),this._both(" "+t)},"unary-prefix":function(e){var t=e[1],n=e[2];this._both(t+" "),getPrecedence(e)<getPrecedence(n)?this._both("(")._visitRaw(n)._both(")"):this._visitRaw(n)},assign:function(e){var t=e[1],n=e[2],r=e[3];n[0]=="assign"?this._both("(")._visitRaw(n)._both(")"):this._visitRaw(n),typeof t=="string"?this._both(" "+t+"= "):this._both(" = "),this._visitRaw(r)},stat:function(e){this._visitRaw(e[1])._both(";")},dot:function(e){var t=e[1],n=e[2];getPrecedence(e)<getPrecedence(t)?this._both("(")._visitRaw(t)._both(").")._both(n):this._visitRaw(t)._both(".")._both(n)},"new":function(e){var t=e[1];this._both("new ")._visitRaw(t)._both("(");var n=e[2];for(var r=0,i=n.length;r<i;r++)this._visitRaw(n[r]),r<i-1&&this._both(", ");this._both(")")},call:function(e){if(isSyncPattern(e))compileSyncPattern(e,this._seedProvider,this._codeWriter,this._commentWriter);else{var t=e[1],n=t[0]=="name"&&t[1]==this._binder;getPrecedence(e)<getPrecedence(t)?this._both("(")._visitRaw(t)._both(")"):this._visitRaw(t),this._both("(");var r=e[2];for(var i=0;i<r.length;i++)this._visitRaw(r[i]),i<r.length-1&&this._both(", ");this._both(")")}},name:function(e){this._both(e[1])},object:function(e){var t=e[1];if(t.length<=0)this._both("{ }");else{this._bothLine("{"),this._bothIndentLevel(1);for(var n=0;n<t.length;n++)this._bothIndents()._both(stringify(t[n][0])+": ")._visitRaw(t[n][1]),n<t.length-1?this._bothLine(","):this._bothLine("");this._bothIndentLevel(-1),this._bothIndents()._both("}")}},array:function(e){this._both("[");var t=e[1];for(var n=0;n<t.length;n++)this._visitRaw(t[n]),n<t.length-1&&this._both(", ");this._both("]")},num:function(e){this._both(e[1])},regexp:function(e){this._both("/"+e[1]+"/"+e[2])},string:function(e){this._both(stringify(e[1]))},"function":function(e){this._visitRawFunction(e)},defun:function(e){this._visitRawFunction(e)},"for":function(e){this._both("for (");var t=e[1];t?(this._visitRaw(t),t[0]!="var"?this._both("; "):this._both(" ")):this._both("; ");var n=e[2];n&&this._visitRaw(n),this._both("; ");var r=e[3];r&&this._visitRaw(r),this._both(") ");var i=this._pos.inLoop;this._pos.inLoop=!0;var s=e[4];this._visitRawBody(s),this._pos.inLoop=i},"for-in":function(e){this._both("for (");var t=e[1];t[0]=="var"?this._both("var "+t[1][0][0]):this._visitRaw(t),this._both(" in ")._visitRaw(e[3])._both(") ");var n=this._pos.inLoop;this._pos.inLoop=!0;var r=e[4];this._visitRawBody(r),this._pos.inLoop=n},block:function(e){e.length>1?(this._bothLine("{"),this._bothIndentLevel(1),this._visitRawStatements(e[1]),this._bothIndentLevel(-1),this._bothIndents()._both("}")):this._both(";")},"while":function(e){var t=e[1],n=e[2],r=this._pos.inLoop;this._pos.inLoop=!0,this._both("while (")._visitRaw(t)._both(") ")._visitRawBody(n),this._pos.inLoop=r},"do":function(e){var t=e[1],n=e[2],r=this._pos.inLoop;this._pos.inLoop=!0,this._both("do ")._visitRawBody(n),this._pos.inLoop=r,n[0]=="block"?this._both(" "):this._bothLine()._bothIndents(),this._both("while (")._visitRaw(t)._both(");")},"if":function(e){var t=e[1],n=e[2];this._both("if (")._visitRaw(t)._both(") ")._visitRawBody(n);var r=e[3];r&&(n[0]=="block"?this._both(" "):this._bothLine("")._bothIndents(),r[0]=="if"?this._both("else ")._visitRaw(r):this._both("else ")._visitRawBody(r))},"break":function(e){this._pos.inLoop||this._pos.inSwitch?this._both("break;"):this._code("return ")._visitSync({type:"break",stmt:e})._code(";")},"continue":function(e){this._pos.inLoop?this._both("continue;"):this._code("return ")._visitSync({type:"continue",stmt:e})._code(";")},"return":function(e){if(this._pos.inFunction){this._both("return");var t=e[1];t&&this._both(" ")._visitRaw(t),this._both(";")}else this._code("return ")._visitSync({type:"return",stmt:e})._code(";")},"throw":function(e){var t=this._pos;t.inTry||t.inFunction?this._both("throw ")._visitRaw(e[1])._both(";"):this._code("return ")._visitSync({type:"throw",stmt:e})._code(";")},conditional:function(e){this._both("(")._visitRaw(e[1])._both(") ? (")._visitRaw(e[2])._both(") : (")._visitRaw(e[3])._both(")")},"try":function(e){this._bothLine("try {"),this._bothIndentLevel(1);var t=this._pos.inTry;this._pos.inTry=!0,this._visitRawStatements(e[1]),this._bothIndentLevel(-1),this._pos.inTry=t;var n=e[2],r=e[3];n&&(this._bothIndents()._bothLine("} catch ("+n[0]+") {"),this._bothIndentLevel(1),this._visitRawStatements(n[1]),this._bothIndentLevel(-1)),r&&(this._bothIndents()._bothLine("} finally {"),this._bothIndentLevel(1),this._visitRawStatements(r),this._bothIndentLevel(-1)),this._bothIndents()._both("}")},"switch":function(e){this._both("switch (")._visitRaw(e[1])._bothLine(") {"),this._bothIndentLevel(1);var t=this._pos.inSwitch;this._pos.inSwitch=!0;var n=e[2];for(var r=0;r<n.length;r++){var i=n[r];this._bothIndents(),i[0]?this._both("case ")._visitRaw(i[0])._bothLine(":"):this._bothLine("default:"),this._bothIndentLevel(1),this._visitRawStatements(i[1]),this._bothIndentLevel(-1)}this._bothIndentLevel(-1),this._pos.inSwitch=t,this._bothIndents()._both("}")}}};var merge=function(e,t){var n=e.length,r=0;for(var i=0;i<n;i++){var s=t[i].match(" +"),o=s?s[0].length:0,u=e[i].length-o+10;u>r&&(r=u)}var a=new Array(r);for(var i=0;i<r;i++)a[i]=" ";var f=a.join(""),l=[];for(var i=0;i<n;i++){var c=e[i];c.replace(/ +/g,"").length>0&&(c="/* "+c+" */   ");var h=f+t[i];l.push(c),l.push(h.substring(c.length)),i!=n-1&&l.push("\n")}return l.join("")},sourceUrlSeed=0,getOptions=function(e){return e=e||{},e.root=e.root||"Sync",e.noSourceUrl=e.noSourceUrl||!1,e},runSync=function(e,t,n){n=getOptions(n);var r,i;if(!t){r=e.toString();var s=r.match(/\b\w*\b.sleep\(\s*\w*\s*\)/)[0];i=s.split(".")[0],r=r.replace(s,s+")"),r=r.replace(i+".sleep(","$await("+i+".Async.sleep("),e="async"}var o="eval("+runSync.rootName+".compile("+stringify(e)+", "+r+"))",u=parse(o),a=new CodeWriter,f=new CodeWriter,l=u[1][0][1],c=compileSyncPattern(l,new SeedProvider,a,f),h=merge(f.lines,a.lines);return h+="().start()",h=h.replace("Sync",i),n.noSourceUrl||(h+="\n//@ sourceURL=wind/"+sourceUrlSeed++ +"_"+(c||"anonymous")+".js"),Sync.logger.debug("// Original: \r\n"+r+"\r\n\r\n// Compiled: \r\n"+h+"\r\n"),codeGenerator(h)};runSync.rootName="Sync";var defineModule=function(){Sync.define({name:"compiler",version:"0.7.2",dependencies:{core:"~0.7.0"},init:function(){Sync.parse=parse,Sync.runSync=runSync}})};defineModule()}(),function(){var e=function(){};e.prototype={For:function(e,t,n){return{next:function(r,i){var s=function(o){try{t&&!o&&t.call(r),!e||e.call(r)?n.next(r,function(e,t,n){if(e=="normal"||e=="continue")s(!1);else if(e=="throw"||e=="return")i(e,t);else{if(e!="break")throw new Error('Invalid type for "Loop": '+e);i("normal")}}):i("normal")}catch(u){i("throw",u)}};s(!0)}}},ForIn:function(e,t){return{next:function(n,r){var i=[];for(var s in e)i.push(s);var o=function(e){try{if(e<i.length){var s=t(i[e]);s.next(n,function(t,n,i){if(t=="normal"||t=="continue")o(e+1);else if(t=="throw"||t=="return")r(t,n);else{if(t!="break")throw new Error('Invalid type for "Loop": '+t);r("normal")}})}else r("normal")}catch(u){r("throw",u)}};o(0)}}},While:function(e,t){return{next:function(n,r){var i=function(){try{e.call(n)?t.next(n,function(e,t,n){if(e=="normal"||e=="continue")i();else if(e=="throw"||e=="return")r(e,t);else{if(e!="break")throw new Error('Invalid type for "Loop": '+e);r("normal")}}):r("normal")}catch(s){r("throw",s)}};i()}}},Do:function(e,t){return{next:function(n,r){var i=function(){e.next(n,function(e,s,o){if(e=="normal"||e=="continue")try{t.call(n)?i():r("normal")}catch(u){r("throw",u)}else if(e=="throw"||e=="return")r(e,s);else{if(e!="break")throw new Error('Invalid type for "Loop": '+e);r("normal")}})};i()}}},Delay:function(e){return{next:function(t,n){try{var r=e.call(t);r.next(t,n)}catch(i){n("throw",i)}}}},Combine:function(e,t){return{next:function(n,r){e.next(n,function(e,i,s){if(e=="normal")try{t.next(n,r)}catch(o){r("throw",o)}else r(e,i,s)})}}},Return:function(e){return{next:function(t,n){n("return",e)}}},Normal:function(){return{next:function(e,t){t("normal")}}},Break:function(){return{next:function(e,t){t("break")}}},Continue:function(){return{next:function(e,t){t("continue")}}},Throw:function(e){return{next:function(t,n){n("throw",e)}}},Try:function(e,t,n){return{next:function(r,i){e.next(r,function(e,s,o){if(e!="throw"||!t)n?n.next(r,function(t,n,r){t=="normal"?i(e,s,o):i(t,n,r)}):i(e,s,o);else if(t){var u;try{u=t.call(r,s)}catch(a){n?n.next(r,function(e,t,n){e=="normal"?i("throw",a):i(e,t,n)}):i("throw",a)}u&&u.next(r,function(e,t,s){e=="throw"?n?n.next(r,function(n,r,o){n=="normal"?i(e,t,s):i(n,r,o)}):i(e,t,s):n?n.next(r,function(n,r,o){n=="normal"?i(e,t,s):i(n,r,o)}):i(e,t,s)})}else n.next(r,function(t,n,r){t=="normal"?i(e,s,o):i(t,n,r)})})}}}};var t=function(){Sync.define({name:"builderbase",version:"0.7.0",dependencies:{core:"~0.7.0"},init:function(){Sync.BuilderBase=e}})};t()}(),function(){var e=function(){var e=0,t=function(){if(e===0)throw new Error("Execute too soon.");return e},n={};try{return Object.defineProperty(n,"value",{get:t}),e=1,n.value===1}catch(r){return!1}}(),t,n={},r="670a1076-712b-4edd-9b70-64b152fe1cd9",i=function(e){return e._typeId==r},s=n.CanceledError=function(){};s.prototype={isTypeOf:i,_typeId:r,message:"The task has been cancelled."};var o="4a73efb8-c2e2-4305-a05c-72385288650a",u=n.AggregateError=function(e){this.children=[];if(e)for(var t=0;t<e.length;t++)this.children.push(e[t])};u.prototype={_typeId:o,message:"This is an error contains sub-errors, please check the 'children' collection for more details.",isTypeOf:function(e){return e._typeId==o}};var a=n.CancellationToken=function(){};a.prototype={register:function(e){this.isCancellationRequested&&e(),this._handlers||(this._handlers=[]),this._handlers.push(e)},unregister:function(e){if(!this._handlers)return;var t=this._handlers.indexOf(e);t>=0&&this._handlers.splice(t,1)},cancel:function(){if(this.isCancellationRequested)return;this.isCancellationRequested=!0;var e=this._handlers;delete this._handlers;for(var t=0;t<e.length;t++)try{e[t]()}catch(n){Sync.logger.warn("Cancellation handler threw an error: "+n)}},throwIfCancellationRequested:function(){if(this.isCancellationRequested)throw new s}};var f=function(){this._listeners={},this._firing=null};f.prototype={add:function(e,t){if(this._firing===e){var n=this;requestTimeout(function(){n.add(e,t)},0);return}var r=this._listeners[e];r||(r=this._listeners[e]=[]),r.push(t)},remove:function(e,t){if(this._firing===e){var n=this;requestTimeout(function(){n.remove(e,t)},0);return}var r=this._listeners[e];if(!r)return;var i=r.indexOf(t);i>=0&&r.splice(i,1)},fire:function(e,t,n){var r=this._listeners[e];if(!r)return;this._firing=e;for(var i=0;i<r.length;i++)try{r[i].call(t,n)}catch(s){Sync.logger.warn('An error occurred in "'+e+' listener": '+s)}this._firing=null}};var l=new f,c=n.Task=function(e){this._delegate=e,this._eventManager=new f,this.status="ready"};c.prototype={start:function(){if(this.status!="ready")throw new Error('Task can only be started in "ready" status.');this.status="running";try{this._delegate(this)}catch(e){this.status=="running"?this.complete("failure",e):Sync.logger.warn("An unexpected error occurred after the task is completed: "+e)}return this},complete:function(t,n){if(t!=="success"&&t!=="failure")throw new Error("Unsupported type: "+t);if(this.status!="running")throw new Error('The "complete" method can only be called in "running" status.');var r=this._eventManager;this._eventManager=null,t==="success"?(this.status="succeeded",e?this._result=n:this.result=n,r.fire("success",this)):(i(n)?this.status="canceled":this.status="faulted",e?this._error=n:this.error=n,r.fire("failure",this)),r.fire("complete",this);if(t!=="failure")return;if(!e)return;if(this._errorObserved)return;var s=this;this._unobservedTimeoutToken=requestTimeout(function(){s._handleUnobservedError(n)},c.unobservedTimeout)},observeError:function(){if(this.status==="ready"||this.status==="running")throw new Error("The method could only be called when it's completed.");if(!e)return this.error;var t=this._unobservedTimeoutToken;return t&&(clearRequestTimeout(t),this._unobservedTimeoutToken=null),this._errorObserved=!0,this._error},_handleUnobservedError:function(e){this._unobservedTimeoutToken=null;var t={task:this,error:e,observed:!1};l.fire("unobservedError",c,t);if(!t.observed)throw e},then:function(e){var t=this;return c.create(function(n){var r=function(){this.error?n.complete("failure",this.error):n.complete("success",this.result)},i=function(e){e.status=="ready"&&e.start(),e.status=="running"?e.on("complete",r):r.call(e)},s=function(){if(this.error)return n.complete("failure",this.error);var t;try{t=e(this.result)}catch(r){return n.complete("failure",r)}i(t)};t.status=="ready"&&t.start(),t.status=="running"?t.on("complete",s):s.call(t)})}},c.prototype.on=c.prototype.addEventListener=function(){var e=this._eventManager;if(!e)throw new Error("Cannot add event listeners when the task is complete.");return e.add.apply(e,arguments),this},c.prototype.off=c.prototype.removeEventListener=function(){var e=this._eventManager;if(!e)throw new Error("All the event listeners have been removed when the task was complete.");return e.remove.apply(e,arguments),this},e&&(Object.defineProperty(c.prototype,"error",{get:function(){return this.observeError()}}),Object.defineProperty(c.prototype,"result",{get:function(){var e=this.observeError();if(e)throw e;return this._result}}));var h=function(){this.observeError()};c.on=c.addEventListener=function(){l.add.apply(l,arguments)},c.off=c.removeEventListener=function(e,t){l.remove.apply(l,arguments)},c.unobservedTimeout=1e4;var p=c.isTask=function(e){return e&&typeof e.start=="function"&&typeof e.addEventListener=="function"&&typeof e.removeEventListener=="function"&&typeof e.complete=="function"},d=c.create=function(e){return new c(e)},v=c.whenAll=function(){var e;if(arguments.length==1){var n=arguments[0];p(n)?e=[n]:e=n}else{e=new Array(arguments.length);for(var r=0;r<arguments.length;r++)e[r]=arguments[r]}return d(function(n){var r,i=function(){if(r)n.complete("failure",new u(r));else{var i=t.map(e,function(e){return e.result});n.complete("success",i)}},s=0;t.each(e,function(t,n){if(!n)return;p(n)||(e[t]=n=v(n)),n.status==="ready"&&n.start();if(n.status==="running")s++,n.addEventListener("complete",function(){this.status!=="succeeded"&&(r||(r=[]),r.push(this.error)),--s==0&&i()});else if(n.status==="faulted"||n.status==="canceled")r||(r=[]),r.push(n.error)}),s==0&&i()})},m=c.whenAny=function(){var e={},n=!0;if(arguments.length==1){var r=arguments[0];p(r)?e[0]=r:(n=t.isArray(r),t.each(r,function(t,n){p(n)&&(e[t]=n)}))}else for(var i=0;i<arguments.length;i++){var s=arguments[i];p(s)&&(e[i]=s)}var o=n?function(e){return parseInt(e,10)}:function(e){return e};return d(function(n){if(t.isEmpty(e))return n.complete("failure","There's no valid input tasks.");var r;t.each(e,function(e,t){t.status==="ready"&&t.start(),t.status!=="running"&&(t.observeError(),r||(r={key:o(e),task:t}))});if(r)return t.each(e,function(e,t){t.status==="running"&&t.on("failure",h)}),n.complete("success",r);var i=function(){this.observeError();var r=this,s;t.each(e,function(e,t){if(r===t){s=e;return}t.off("complete",i),t.on("failure",h)}),n.complete("success",{key:o(s),task:this})};t.each(e,function(e){e.addEventListener("complete",i)})})},g=n.sleep=function(e,t){return c.create(function(n){t&&t.isCancellationRequested&&n.complete("failure",new s);var r,i;t&&(i=function(){clearRequestTimeout(r),n.complete("failure",new s)});var r=requestTimeout(function(){t&&t.unregister(i),n.complete("success")},e);t&&t.register(i)})},y=n.onEvent=function(e,t,n){return c.create(function(r){n&&n.isCancellationRequested&&r.complete("failure",new s);var i=function(){e.removeEventListener?e.removeEventListener(t,o):e.removeListener?e.removeListener(t,o):e.detachEvent(t,o)},o,u;n&&(u=function(){i(),r.complete("failure",new s)});var o=function(e){n&&n.unregister(u),i(),r.complete("success",e)};e.addEventListener?e.addEventListener(t,o):e.addListener?e.addListener(t,o):e.attachEvent(t,o),n&&n.register(u)})},b=n.AsyncBuilder=function(){};b.prototype={Start:function(e,t){return c.create(function(n){t.next(e,function(e,t,r){if(e=="normal"||e=="return")n.complete("success",t);else{if(e!="throw")throw new Error("Unsupported type: "+e);n.complete("failure",t)}})})},Bind:function(e,t){return{next:function(n,r){var i=function(){if(this.error)r("throw",this.error);else{var e;try{e=t.call(n,this.result)}catch(i){r("throw",i);return}e.next(n,r)}};e.status=="ready"?(e.addEventListener("complete",i),e.start()):e.status=="running"?e.addEventListener("complete",i):i.call(e)}}}};var w=n.Binding={},E=function(e,t){var n=[];for(var r=0;r<e.length;r++)n.push(e[r]);while(n.length<t)n.push(undefined);return n},S=function(e){if(e.length<=1)return null;var t=[];for(var n=1;n<e.length;n++)t.push(e[n]);return t},x=w.fromStandard=function(e){var t=S(arguments);return function(){var n=this,r=E(arguments,e.length-1);return c.create(function(i){r.push(function(e,n){if(e)i.complete("failure",e);else{if(!!t){var r={};for(var s=0;s<t.length;s++)r[t[s]]=arguments[s+1];return i.complete("success",r)}i.complete("success",n)}}),e.apply(n,r)})}},T=w.fromCallback=function(e){var t=S(arguments);return function(){var n=this,r=E(arguments,e.length-1);return c.create(function(i){r.push(function(e){if(t){var n={};for(var r=0;r<t.length;r++)n[t[r]]=arguments[r];i.complete("success",n)}else i.complete("success",e)}),e.apply(n,r)})}},N=function(){Sync.define({name:"async",version:"0.7.1",autoloads:["builderbase"],dependencies:{builderbase:"~0.7.0"},init:function(){t=Sync._,t.each(Sync.BuilderBase.prototype,function(e,t){b.prototype[e]=t}),Sync.Async=n,Sync.binders.async="$await",Sync.builders.async=new b}})};N()}(),SCJ.createSync=Sync,Sync}),define("canvas/structure",["SCJ","canvas/render","core/sync"],function(e,t,n){function i(){var e,t,n,r,i=arguments[0];return i.length===1?(e=t=n=i[0],r=1):i.length===2?(e=t=n=i[0],r=i[1]/255):(e=i[0],t=i[1],n=i[2],r=typeof i[3]=="number"?i[3]:1),[e,t,n,r]}var r=function(e,n){function i(e){if(!e.paused){r.mouseX=r.stage.mouseX,r.mouseY=r.stage.mouseY;if(r.tickFn){for(var t=0,n=r.graphicsArr.length;t<n;t++){var i=r.graphicsArr[t].graphics;i.container.removeAllChildren()}r.container.removeAllChildren(),r.tickFn()}}for(var t=0,n=r.graphicsArr.length;t<n;t++){var i=r.graphicsArr[t];i.bmp.x=i.graphics.x,i.bmp.y=i.graphics.y}r.stage.update()}function s(e){r.mouseMoveFn&&r.mouseMoveFn(e)}this.canvas=document.createElement("canvas"),this.canvas.width=e,this.canvas.height=n,this.stage=new t.Stage(this.canvas),this.stage.enableMouseOver(10),this.TWO_PI=Math.PI*2,this.HALF_PI=Math.PI/2,this.container=new t.Container,this.stroke_weight=1,this.font="15px Arial",this.fontSize="15px",this.width=e,this.height=n,this.strokeStyle="black",this.currentAction="beginStroke",this.fillStyle="white",this.tickFn=null,this.stage.addChild(this.container),this.graphicsArr=[],t.Ticker.addEventListener("tick",i);var r=this;this.stage.addEventListener("stagemousemove",s),this.colorNames={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"}};r.prototype={image:function(e,n,i,s,o){if(e instanceof r){var u=new t.Bitmap(e.canvas);e.x=u.x=n,e.y=u.y=i,this.stage.addChild(u),this.graphicsArr.push({graphics:e,bmp:u})}else{var u=new t.Bitmap(e);u.x=n,u.y=i,arguments.length>3&&u.image.width!==0&&(u.scaleX=s/u.image.width,u.scaleY=o/u.image.height),this.container.addChild(u)}},background:function(){if(arguments[0]instanceof Image){var e=new t.Bitmap(arguments[0]);this.container.addChild(e);return}var n=i(arguments),r=new t.Shape((new t.Graphics).beginFill("rgba("+n[0]+","+n[1]+","+n[2]+","+n[3]+")").rect(0,0,this.width,this.height));this.container.addChild(r)},createGraphics:function(e,t,n,i){var s=new r(e,t,n,i);return this.stage.addChild(s.container),arguments.length>2&&(s.container.x=arguments[2],s.container.y=arguments[3]),s},stroke:function(e,t,n,r){if(typeof e=="string")this.strokeStyle=e;else{var s=i(arguments);this.strokeStyle="rgba("+s[0]+","+s[1]+","+s[2]+","+s[3]+")"}this.currentAction="beginStroke"},point:function(e,n){var r=new t.Shape((new t.Graphics).beginFill(this.fillStyle).drawCircle(e,n,1));this.container.addChild(r)},line:function(e,n,r,i){var s=new t.Shape((new t.Graphics).beginStroke(this.strokeStyle).setStrokeStyle(this.stroke_weight).mt(e,n).lt(r,i).endStroke());this.container.addChild(s)},fill:function(e,t,n,r){if(typeof e=="string")this.fillStyle=e;else{var s=i(arguments);this.fillStyle="rgba("+s[0]+","+s[1]+","+s[2]+","+s[3]+")"}this.currentAction="beginFill"},rect:function(e,n,r,i){var s=new t.Shape((new t.Graphics)[this.currentAction](this.currentAction=="beginFill"?this.fillStyle:this.strokeStyle).rect(e,n,r,i).endFill());this.container.addChild(s)},roundRect:function(e,n,r,i,s){var o=new t.Shape((new t.Graphics)[this.currentAction](this.currentAction=="beginFill"?this.fillStyle:this.strokeStyle).drawRoundRect(e,n,r,i,s).endFill());this.container.addChild(o)},ellipse:function(e,n,r,i){var s=new t.Shape((new t.Graphics)[this.currentAction](this.currentAction=="beginFill"?this.fillStyle:this.strokeStyle).drawEllipse(e-r/2,n-i/2,r,i).endFill());this.container.addChild(s)},circle:function(e,n,r){var i=new t.Shape((new t.Graphics)[this.currentAction](this.currentAction=="beginFill"?this.fillStyle:this.strokeStyle).drawCircle(e,n,r));this.container.addChild(i)},frameRate:function(e){t.Ticker.setFPS(e)},noLoop:function(){t.Ticker.setPaused(!0)},loop:function(){t.Ticker.setPaused(!1)},nextTick:function(){this.tickFn&&this.tickFn()},tick:function(e){this.tickFn=e,this.tickFn()},mousePressed:function(e){this.stage.addEventListener("stagemousedown",function(){e()})},mouseMove:function(e){this.mouseMoveFn=e},toInt:function(e){return Math.round(e)},random:function(e,t){return e+Math.random()*(t-e)},randomInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},sin:function(e){return Math.sin(e)},cos:function(e){return Math.cos(e)},loadImage:function(e){var t=new Image;return t.src=e,t},map:function(e,t,n,r,i){return r+(i-r)*((e-t)/(n-t))},sector:function(e,n,r,i,s,o){var u=new t.Shape((new t.Graphics)[this.currentAction](this.currentAction=="beginFill"?this.fillStyle:this.strokeStyle).setStrokeStyle(this.stroke_weight).arc(0,0,r,i,s,o).lt(0,0).cp());return u.x=e,u.y=n,this.container.addChild(u),u},polygon:function(e){var n=(new t.Graphics)[this.currentAction](this.currentAction=="beginFill"?this.fillStyle:this.strokeStyle).setStrokeStyle(this.stroke_weight);n.mt(e[0][0],e[0][1]);for(var r=1,i=e.length;r<i;r++)r===e.length-1&&n.bezierCurveTo(180,275,110,315,e[r][0],e[r][1]),e[r][2]?n.bezierCurveTo(280,275,270,300,140,285):n.lt(e[r][0],e[r][1]);n.cp();var s=new t.Shape(n);this.container.addChild(s)},textFont:function(e){this.font=e,this.fontSize=this.font.split(" ")[0]},text:function(e,n,r){var i=new t.Text(e,this.font,this.fillStyle);i.x=n,i.y=r,this.container.addChild(i)},update:function(){this.stage.update()},rgbToHex:function(t,n,r){return"#"+((1<<24)+(t<<16)+(n<<8)+r).toString(16).slice(1)},hexToRgb:function(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,n,r){return t+t+n+n+r+r});var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:null},reverseColor:function(e){return{r:255-e.r,g:255-e.g,b:255-e.b}},strokeWeight:function(e){this.stroke_weight=e},clear:function(){this.container.removeAllChildren()},hour:function(){return(new Date).getHours()},minute:function(){return(new Date).getMinutes()},second:function(){return(new Date).getSeconds()},fps:function(e,n){var r=new t.Text(Math.ceil(t.Ticker.getMeasuredFPS())+"FPS","bold 24px Arial","#fff");r.x=e,r.y=n,this.container.addChild(r)},dist:function(){var e,t,n;if(arguments.length===4)return e=arguments[0]-arguments[2],t=arguments[1]-arguments[3],Math.sqrt(e*e+t*t);if(arguments.length===6)return e=arguments[0]-arguments[3],t=arguments[1]-arguments[4],n=arguments[2]-arguments[5],Math.sqrt(e*e+t*t+n*n)},distSq:function(){var e,t,n;if(arguments.length===4)return e=arguments[0]-arguments[2],t=arguments[1]-arguments[3],e*e+t*t;if(arguments.length===6)return e=arguments[0]-arguments[3],t=arguments[1]-arguments[4],n=arguments[2]-arguments[5],e*e+t*t+n*n}},function(){function n(e,t){var n=e||362436069,r=t||521288629,i=function(){return n=36969*(n&65535)+(n>>>16)&4294967295,r=18e3*(r&65535)+(r>>>16)&4294967295,((n&65535)<<16|r&65535)&4294967295};this.nextDouble=function(){var e=i()/4294967296;return e<0?1+e:e},this.nextInt=i}function i(e){function u(e,t,n,r){var i=e&15,s=i<8?t:n,o=i<4?n:i===12||i===14?t:r;return((i&1)===0?s:-s)+((i&2)===0?o:-o)}function a(e,t,n){var r=(e&1)===0?t:n;return(e&2)===0?-r:r}function f(e,t){return(e&1)===0?-t:t}function l(e,t,n){return t+e*(n-t)}var t=e!==undefined?new n(e):n.createRandomized(),r,i,s=new Array(512);for(r=0;r<256;++r)s[r]=r;for(r=0;r<256;++r){var o=s[i=t.nextInt()&255];s[i]=s[r],s[r]=o}for(r=0;r<256;++r)s[r+256]=s[r];this.noise3d=function(e,t,n){var r=Math.floor(e)&255,i=Math.floor(t)&255,o=Math.floor(n)&255;e-=Math.floor(e),t-=Math.floor(t),n-=Math.floor(n);var a=(3-2*e)*e*e,f=(3-2*t)*t*t,c=(3-2*n)*n*n,h=s[r]+i,d=s[h]+o,v=s[h+1]+o,m=s[r+1]+i,g=s[m]+o,y=s[m+1]+o;return l(c,l(f,l(a,u(s[d],e,t,n),u(s[g],e-1,t,n)),l(a,u(s[v],e,t-1,n),u(s[y],e-1,t-1,n))),l(f,l(a,u(s[d+1],e,t,n-1),u(s[g+1],e-1,t,n-1)),l(a,u(s[v+1],e,t-1,n-1),u(s[y+1],e-1,t-1,n-1))))},this.noise2d=function(e,t){var n=Math.floor(e)&255,r=Math.floor(t)&255;e-=Math.floor(e),t-=Math.floor(t);var i=(3-2*e)*e*e,o=(3-2*t)*t*t,u=s[n]+r,f=s[n+1]+r;return l(o,l(i,a(s[u],e,t),a(s[f],e-1,t)),l(i,a(s[u+1],e,t-1),a(s[f+1],e-1,t-1)))},this.noise1d=function(e){var t=Math.floor(e)&255;e-=Math.floor(e);var n=(3-2*e)*e*e;return l(n,f(s[t],e),f(s[t+1],e-1))}}function o(e,t,n){s.generator===undefined&&(s.generator=new i(s.seed));var r=s.generator,o=1,u=1,a=0;for(var f=0;f<s.octaves;++f){o*=s.fallout;switch(arguments.length){case 1:a+=o*(1+r.noise1d(u*e))/2;break;case 2:a+=o*(1+r.noise2d(u*e,u*t))/2;break;case 3:a+=o*(1+r.noise3d(u*e,u*t,u*n))/2}u*=2}return a}var e=function(){function n(e){return e*e*e*(e*(e*6-15)+10)}function r(e,t,n){return t+e*(n-t)}function i(e,t,n,r){var i=e&15,s=i<8?t:n,o=i<4?n:i==12||i==14?t:r;return((i&1)==0?s:-s)+((i&2)==0?o:-o)}var e=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180];for(var t=0;t<256;t++)e[256+t]=e[t];return{noise:function(t,s,o){var u=Math.floor(t),a=Math.floor(s),f=Math.floor(o),l=u&255,c=a&255,h=f&255;t-=u,s-=a,o-=f;var d=t-1,v=s-1,m=o-1,g=n(t),y=n(s),b=n(o),w=e[l]+c,E=e[w]+h,S=e[w+1]+h,x=e[l+1]+c,T=e[x]+h,N=e[x+1]+h;return r(b,r(y,r(g,i(e[E],t,s,o),i(e[T],d,s,o)),r(g,i(e[S],t,v,o),i(e[N],d,v,o))),r(y,r(g,i(e[E+1],t,s,m),i(e[T+1],d,s,o-1)),r(g,i(e[S+1],t,v,m),i(e[N+1],d,v,m))))}}},t=Math.random;n.createRandomized=function(){var e=new Date;return new n(e/6e4&4294967295,e&4294967295)};var s={generator:undefined,octaves:4,fallout:.5,seed:undefined};r.prototype.noise=o}(),e.createGraphics=function(e,t,n){var i=new r(e,t);if(n){var s=document.querySelector(n);s.appendChild(i.canvas)}return i};for(var s in n)r.prototype[s]=n[s];return r}),require.config({baseUrl:"../../src/SCJ"}),require(["SCJ","canvas/structure"],function(SCJ){var graphics=SCJ.createGraphics(450,370,"#canvasCTT"),img=graphics.loadImage("../img/bg.png");with(graphics){frameRate(60);var yoff=0;tick(function(){background(51),image(img,0,0),fps(0,0);var e=[],t=[],n=0;for(var r=103;r<=290;r+=5){var i=map(noise(n,yoff),0,1,190,260);e[0]=r,e[1]=i,t.push([e[0],e[1]]),n+=.05}yoff+=.01,t.push([width/2-100,height-77,"bct"]),t.push([t[0][0],t[0][1]]),fill(39,255,255,.8),polygon(t),stroke(255,255,255,.8),strokeWeight(2);for(var s=0;s<t.length-3;s++){var o=t[s],u=t[s+1];line(o[0],o[1],u[0],u[1])}})}}),define("main/water",function(){});