(function(n){var e=!1,o=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/,i=function(){};i.export=[];i.extend=function(n){function r(){!e&&this.ctor&&this.ctor.apply(this,arguments)}i.export.push(n);var s=this.prototype,f,u,t;e=!0;f=new this;e=!1;for(t in n)t!="statics"&&(f[t]=typeof n[t]=="function"&&typeof s[t]=="function"&&o.test(n[t])?function(n,t){return function(){var r=this._super,i;return this._super=s[n],i=t.apply(this,arguments),this._super=r,i}}(t,n[t]):n[t]);for(u in this)this.hasOwnProperty(u)&&u!="extend"&&(r[u]=this[u]);if(r.prototype=f,n.statics)for(t in n.statics)n.statics.hasOwnProperty(t)&&(r[t]=n.statics[t],t=="ctor"&&r[t]());return r.prototype.constructor=r,r.extend=arguments.callee,r.implement=function(n){for(var t in n)f[t]=n[t]},r};var r=i.extend({statics:{ctor:function(){this.methods=["concat","every","filter","forEach","indexOf","join","lastIndexOf","map","pop","push","reduce","reduceRight","reverse","shift","slice","some","sort","splice","unshift","valueOf"];this.triggerStr="concat,pop,push,reverse,shift,sort,splice,unshift"},type:function(n){var t=Object.prototype.toString.call(n).split(" ")[1];return t.substr(0,t.length-1).toLowerCase()},isArray:function(n){return this.type(n)=="array"},isInArray:function(n,t){for(var i=n.length;--i>-1;)if(t===n[i])return!0;return!1},isFunction:function(n){return this.type(n)=="function"},watch:function(n,t){return new this(n,t)}},ctor:function(n,t){var i,u;for(i in n)n.hasOwnProperty(i)&&(t&&r.isInArray(t,i)||!t)&&this.watch(n,i);if(n.change)throw"naming conflicts！observable will extend 'change' method to your object .";u=this;n.change=function(n){u.propertyChangedHandler=n}},onPropertyChanged:function(n,t){this.propertyChangedHandler&&this.propertyChangedHandler(n,t)},mock:function(n){var t=this;r.methods.forEach(function(i){n[i]=function(){var u=Array.prototype[i].apply(this,Array.prototype.slice.call(arguments));for(var n in this)this.hasOwnProperty(n)&&n!="_super"&&!r.isFunction(this[n])&&t.watch(this,n);if(new RegExp("\\b"+i+"\\b").test(r.triggerStr))t.onPropertyChanged("array",i);return u}})},watch:function(n,t){var f,i,u;if(t.substr(0,2)!="__"&&(f=this,!r.isFunction(n[t]))&&(i=n["__"+t]=n[t],Object.defineProperty(n,t,{get:function(){return this["__"+t]},set:function(n){this["__"+t]=n;f.onPropertyChanged(t,n)}}),r.isArray(n)&&this.mock(n),typeof i=="object")){r.isArray(i)&&this.mock(i);for(u in i)i.hasOwnProperty(u)&&u!="_super"&&this.watch(i,u)}}}),t=i.extend({statics:{ctor:function(){Date.now===undefined&&(Date.now=function(){return(new Date).valueOf()});this._tweens=[]},REVISION:"14",getAll:function(){return this._tweens},removeAll:function(){this._tweens=[]},add:function(n){this._tweens.push(n)},remove:function(n){var t=this._tweens.indexOf(n);t!==-1&&this._tweens.splice(t,1)},update:function(n){if(this._tweens.length===0)return!1;var t=0;for(n=n!==undefined?n:typeof window!="undefined"&&window.performance!==undefined&&window.performance.now!==undefined?window.performance.now():Date.now();t<this._tweens.length;)this._tweens[t].update(n)?t++:this._tweens.splice(t,1);return!0},Tween:function(n){var r=n,u={},i={},f={},b=1e3,s=0,h=!1,c=!1,k=!1,l=0,e=null,d=t.Easing.Linear.None,g=t.Interpolation.Linear,o=[],a=null,v=!1,y=null,p=null,w=null;for(var nt in n)u[nt]=parseFloat(n[nt],10);this.to=function(n,t){return t!==undefined&&(b=t),i=n,this};this.start=function(n){t.add(this);c=!0;v=!1;e=(n!==undefined?n:typeof window!="undefined"&&window.performance!==undefined&&window.performance.now!==undefined?window.performance.now():Date.now())+l;for(var o in i){if(i[o]instanceof Array){if(i[o].length===0)continue;i[o]=[r[o]].concat(i[o])}u[o]=r[o];u[o]instanceof Array==!1&&(u[o]*=1);f[o]=u[o]||0}return this};this.stop=function(){return c?(t.remove(this),c=!1,w!==null&&w.call(r),this.stopChainedTweens(),this):this};this.stopChainedTweens=function(){for(var n=0,t=o.length;n<t;n++)o[n].stop()};this.delay=function(n){return l=n,this};this.repeat=function(n){return s=n,this};this.yoyo=function(n){return h=n,this};this.easing=function(n){return d=n,this};this.interpolation=function(n){return g=n,this};this.chain=function(){return o=arguments,this};this.onStart=function(n){return a=n,this};this.onUpdate=function(n){return y=n,this};this.onComplete=function(n){return p=n,this};this.onStop=function(n){return w=n,this};this.update=function(n){var t,w,nt,tt,c,rt,it,ut;if(n<e)return!0;v===!1&&(a!==null&&a.call(r),v=!0);w=(n-e)/b;w=w>1?1:w;nt=d(w);for(t in i)tt=u[t]||0,c=i[t],c instanceof Array?r[t]=g(c,nt):(typeof c=="string"&&(c=tt+parseFloat(c,10)),typeof c=="number"&&(r[t]=tt+(c-tt)*nt));if(y!==null&&y.call(r,nt),w==1){if(s>0){isFinite(s)&&s--;for(t in f)typeof i[t]=="string"&&(f[t]=f[t]+parseFloat(i[t],10)),h&&(rt=f[t],f[t]=i[t],i[t]=rt),u[t]=f[t];return h&&(k=!k),e=n+l,!0}for(p!==null&&p.call(r),it=0,ut=o.length;it<ut;it++)o[it].start(n);return!1}return!0}},Easing:{Linear:{None:function(n){return n}},Quadratic:{In:function(n){return n*n},Out:function(n){return n*(2-n)},InOut:function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)}},Cubic:{In:function(n){return n*n*n},Out:function(n){return--n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)}},Quartic:{In:function(n){return n*n*n*n},Out:function(n){return 1- --n*n*n*n},InOut:function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)}},Quintic:{In:function(n){return n*n*n*n*n},Out:function(n){return--n*n*n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)}},Sinusoidal:{In:function(n){return 1-Math.cos(n*Math.PI/2)},Out:function(n){return Math.sin(n*Math.PI/2)},InOut:function(n){return.5*(1-Math.cos(Math.PI*n))}},Exponential:{In:function(n){return n===0?0:Math.pow(1024,n-1)},Out:function(n){return n===1?1:1-Math.pow(2,-10*n)},InOut:function(n){return n===0?0:n===1?1:(n*=2)<1?.5*Math.pow(1024,n-1):.5*(-Math.pow(2,-10*(n-1))+2)}},Circular:{In:function(n){return 1-Math.sqrt(1-n*n)},Out:function(n){return Math.sqrt(1- --n*n)},InOut:function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)}},Elastic:{In:function(n){var i,t=.1,r=.4;return n===0?0:n===1?1:(!t||t<1?(t=1,i=r/4):i=r*Math.asin(1/t)/(2*Math.PI),-(t*Math.pow(2,10*(n-=1))*Math.sin((n-i)*2*Math.PI/r)))},Out:function(n){var i,t=.1,r=.4;return n===0?0:n===1?1:(!t||t<1?(t=1,i=r/4):i=r*Math.asin(1/t)/(2*Math.PI),t*Math.pow(2,-10*n)*Math.sin((n-i)*2*Math.PI/r)+1)},InOut:function(n){var i,t=.1,r=.4;return n===0?0:n===1?1:(!t||t<1?(t=1,i=r/4):i=r*Math.asin(1/t)/(2*Math.PI),(n*=2)<1)?-.5*t*Math.pow(2,10*(n-=1))*Math.sin((n-i)*2*Math.PI/r):t*Math.pow(2,-10*(n-=1))*Math.sin((n-i)*2*Math.PI/r)*.5+1}},Back:{In:function(n){var t=1.70158;return n*n*((t+1)*n-t)},Out:function(n){var t=1.70158;return--n*n*((t+1)*n+t)+1},InOut:function(n){var t=1.70158*1.525;return(n*=2)<1?.5*n*n*((t+1)*n-t):.5*((n-=2)*n*((t+1)*n+t)+2)}},Bounce:{In:function(n){return 1-t.Easing.Bounce.Out(1-n)},Out:function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},InOut:function(n){return n<.5?t.Easing.Bounce.In(n*2)*.5:t.Easing.Bounce.Out(n*2-1)*.5+.5}}},Interpolation:{Linear:function(n,i){var r=n.length-1,u=r*i,f=Math.floor(u),e=t.Interpolation.Utils.Linear;return i<0?e(n[0],n[1],u):i>1?e(n[r],n[r-1],r-u):e(n[f],n[f+1>r?r:f+1],u-f)},Bezier:function(n,i){for(var f=0,u=n.length-1,e=Math.pow,o=t.Interpolation.Utils.Bernstein,r=0;r<=u;r++)f+=e(1-i,u-r)*e(i,r)*n[r]*o(u,r);return f},CatmullRom:function(n,i){var r=n.length-1,f=r*i,u=Math.floor(f),e=t.Interpolation.Utils.CatmullRom;return n[0]===n[r]?(i<0&&(u=Math.floor(f=r*(1+i))),e(n[(u-1+r)%r],n[u],n[(u+1)%r],n[(u+2)%r],f-u)):i<0?n[0]-(e(n[0],n[0],n[1],n[1],-f)-n[0]):i>1?n[r]-(e(n[r],n[r],n[r-1],n[r-1],f-r)-n[r]):e(n[u?u-1:0],n[u],n[r<u+1?r:u+1],n[r<u+2?r:u+2],f-u)},Utils:{Linear:function(n,t,i){return(t-n)*i+n},Bernstein:function(n,i){var r=t.Interpolation.Utils.Factorial;return r(n)/r(i)/r(n-i)},Factorial:function(n){var i=1,t;if(a[n])return a[n];for(t=n;t>1;t--)i*=t;return a[n]=i},CatmullRom:function(n,t,i,r,u){var f=(i-n)*.5,e=(r-t)*.5,o=u*u,s=u*o;return(2*t-2*i+f+e)*s+(-3*t+3*i-2*f-e)*o+f*u+t}}}}}),u=i.extend({statics:{DEG_TO_RAD:Math.PI/180},ctor:function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p){this.elements=Float32Array?new Float32Array(16):[];var w=this.elements;w[0]=n!==undefined?n:1;w[4]=t||0;w[8]=i||0;w[12]=r||0;w[1]=u||0;w[5]=f!==undefined?f:1;w[9]=e||0;w[13]=o||0;w[2]=s||0;w[6]=h||0;w[10]=c!==undefined?c:1;w[14]=l||0;w[3]=a||0;w[7]=v||0;w[11]=y||0;w[15]=p!==undefined?p:1},set:function(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p){var w=this.elements;return w[0]=n,w[4]=t,w[8]=i,w[12]=r,w[1]=u,w[5]=f,w[9]=e,w[13]=o,w[2]=s,w[6]=h,w[10]=c,w[14]=l,w[3]=a,w[7]=v,w[11]=y,w[15]=p,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},append:function(n){return this.multiplyMatrices(this,n)},multiplyMatrices:function(n,t){var i=n.elements,r=t.elements,u=this.elements,f=i[0],e=i[4],o=i[8],s=i[12],h=i[1],c=i[5],l=i[9],a=i[13],v=i[2],y=i[6],p=i[10],w=i[14],b=i[3],k=i[7],d=i[11],g=i[15],nt=r[0],tt=r[4],it=r[8],rt=r[12],ut=r[1],ft=r[5],et=r[9],ot=r[13],st=r[2],ht=r[6],ct=r[10],lt=r[14],at=r[3],vt=r[7],yt=r[11],pt=r[15];return u[0]=f*nt+e*ut+o*st+s*at,u[4]=f*tt+e*ft+o*ht+s*vt,u[8]=f*it+e*et+o*ct+s*yt,u[12]=f*rt+e*ot+o*lt+s*pt,u[1]=h*nt+c*ut+l*st+a*at,u[5]=h*tt+c*ft+l*ht+a*vt,u[9]=h*it+c*et+l*ct+a*yt,u[13]=h*rt+c*ot+l*lt+a*pt,u[2]=v*nt+y*ut+p*st+w*at,u[6]=v*tt+y*ft+p*ht+w*vt,u[10]=v*it+y*et+p*ct+w*yt,u[14]=v*rt+y*ot+p*lt+w*pt,u[3]=b*nt+k*ut+d*st+g*at,u[7]=b*tt+k*ft+d*ht+g*vt,u[11]=b*it+k*et+d*ct+g*yt,u[15]=b*rt+k*ot+d*lt+g*pt,this},appendTransform:function(n,t,i,r,f,e,o,s,h,c,l,a,v){var k=s*u.DEG_TO_RAD,y=Math.cos(k),p=Math.sin(k),d=h*u.DEG_TO_RAD,w=Math.cos(d),b=Math.sin(d),g=c*u.DEG_TO_RAD,nt=Math.cos(g),tt=Math.sin(g);return this.append(new u(w,0,b,t,0,1,0,i,-b,0,w,r,b/n,0,-w/n,(n-r)/n)),this.append(new u(1,0,0,0,0,y,p,0,0,-p,y,0,0,p/n,-y/n,1)),this.append(new u(nt*f,tt*e,0,0,-tt*f,nt*e,0,0,0,0,1*o,0,0,0,-1/n,1)),(l||a||v)&&(this.elements[12]-=l*this.elements[0]+a*this.elements[4]+v*this.elements[8],this.elements[13]-=l*this.elements[1]+a*this.elements[5]+v*this.elements[9],this.elements[14]-=l*this.elements[2]+a*this.elements[6]+v*this.elements[10]),this}}),s=i.extend({statics:{mix:function(n){new this(n)}},ctor:function(n){var i,t;n.perspective=400;n.scaleX=n.scaleY=n.scaleZ=1;n.x=n.y=n.z=n.rotateX=n.rotateY=n.rotateZ=n.regX=n.regY=n.skewX=n.skewY=n.regX=n.regY=n.regZ=0;n.matrix3D=new u;i=r.watch(n,["x","y","z","scaleX","scaleY","scaleZ","perspective","rotateX","rotateY","rotateZ","regX","regY","regZ"]);this.element=n;t=this;i.propertyChangedHandler=function(){var n=t.element.matrix3D.identity().appendTransform(t.element.perspective,t.element.x,t.element.y,t.element.z,t.element.scaleX,t.element.scaleY,t.element.scaleZ,t.element.rotateX,t.element.rotateY,t.element.rotateZ,t.element.regX,t.element.regY,t.element.regZ);t.element.style.transform=t.element.style.msTransform=t.element.style.OTransform=t.element.style.MozTransform=t.element.style.webkitTransform="matrix3d("+Array.prototype.slice.call(n.elements).join(",")+")"}}}),f=i.extend({statics:{get:function(n){return new this(n)},actions:["x","rotateY"],bounceOut:t.Easing.Bounce.Out,linear:t.Easing.Linear.None,quadraticIn:t.Easing.Quadratic.In,quadraticOut:t.Easing.Quadratic.Out,quadraticInOut:t.Easing.Quadratic.InOut,cubicIn:t.Easing.Cubic.In,cubicOut:t.Easing.Cubic.Out,cubicInOut:t.Easing.Cubic.InOut,quarticIn:t.Easing.Quartic.In,quarticOut:t.Easing.Quartic.Out,quarticInOut:t.Easing.Quartic.InOut,quinticIn:t.Easing.Quintic.In,quinticOut:t.Easing.Quintic.Out,quinticInOut:t.Easing.Quintic.InOut,sinusoidalIn:t.Easing.Sinusoidal.In,sinusoidalOut:t.Easing.Sinusoidal.Out,sinusoidalInOut:t.Easing.Sinusoidal.InOut,exponentialIn:t.Easing.Exponential.In,exponentialOut:t.Easing.Exponential.Out,exponentialInOut:t.Easing.Exponential.InOut,circularIn:t.Easing.Circular.In,circularOut:t.Easing.Circular.Out,circularInOut:t.Easing.Circular.InOut,elasticIn:t.Easing.Elastic.In,elasticOut:t.Easing.Elastic.Out,elasticInOut:t.Easing.Elastic.InOut,backIn:t.Easing.Back.In,backOut:t.Easing.Back.Out,backInOut:t.Easing.Back.InOut,bounceIn:t.Easing.Bounce.In,bounceOut:t.Easing.Bounce.Out,bounceInOut:t.Easing.Bounce.InOut,interpolationLinear:t.Interpolation.Linear,interpolationBezier:t.Interpolation.Bezier,interpolationCatmullRom:t.Interpolation.CatmullRom},ctor:function(n){this.element=document.querySelector(n);!1 in this.element||s.mix(this.element);this.cmds=[];this.index=0;this.loop=setInterval(function(){t.update()},15)},to:function(){return this.cmds.push(["to"]),this},x:function(){return this.cmds[this.cmds.length-1].push(["x",arguments]),this},y:function(){return this.cmds[this.cmds.length-1].push(["y",arguments]),this},z:function(){return this.cmds[this.cmds.length-1].push(["z",arguments]),this},rotateX:function(){return this.cmds[this.cmds.length-1].push(["rotateX",arguments]),this},rotateY:function(){return this.cmds[this.cmds.length-1].push(["rotateY",arguments]),this},rotateZ:function(){return this.cmds[this.cmds.length-1].push(["rotateZ",arguments]),this},scaleX:function(){return this.cmds[this.cmds.length-1].push(["scaleX",arguments]),this},scaleY:function(){return this.cmds[this.cmds.length-1].push(["scaleY",arguments]),this},scaleZ:function(){return this.cmds[this.cmds.length-1].push(["scaleZ",arguments]),this},regX:function(){return this.cmds[this.cmds.length-1].push(["regX",arguments]),this},regY:function(){return this.cmds[this.cmds.length-1].push(["regY",arguments]),this},regZ:function(){return this.cmds[this.cmds.length-1].push(["regZ",arguments]),this},perspective:function(){return this.cmds[this.cmds.length-1].push(["perspective",arguments]),this},begin:function(n){return this.cmds[this.cmds.length-1].begin=n,this},progress:function(n){return this.cmds[this.cmds.length-1].progress=n,this},end:function(n){return this.cmds[this.cmds.length-1].end=n,this},wait:function(){return this.cmds.push(["wait",arguments]),this},then:function(){return this.cmds.push(["then",arguments]),this},cycle:function(){return this.cmds.push(["cycle",arguments]),this},start:function(){var n=this.cmds.length;this.index<n?this.exec(this.cmds[this.index],this.index==n-1):clearInterval(this.loop)},exec:function(n,i){var h=n.length,r=this,u,a,o;switch(n[0]){case"to":for(u=1;u<h;u++){var e=n[u],c=e[1][2],l={},s=e[0];l[s]=e[1][0];a=new t.Tween(this.element).to(l,e[1][1]).onStart(function(){n.start&&n.start()}).onUpdate(function(){n.progress&&n.progress();r.element[s]=this[s]}).easing(c?c:f.linear).onComplete(function(t){return function(){t==h-1&&(n.end&&n.end(),i&&r.complete&&r.complete(),r.index++,r.start())}}(u)).start()}break;case"wait":setTimeout(function(){r.index++;r.start();i&&r.complete&&r.complete()},n[1][0]);break;case"then":o=n[1][0];o.index=0;o.complete=function(){r.index++;r.start();i&&r.complete&&r.complete()};o.start();break;case"cycle":r.index=n[1][0];r.start()}}});typeof module!="undefined"&&module.exports&&this.module!==module?module.exports=f:typeof define=="function"&&define.amd?define(f):typeof define=="function"&&define.kmd?(define("observable",i.export[0]),define("matrix3D",i.export[1]),define("transform",i.export[2]),define("tojs",i.export[3])):n.tojs=f})(Function("return this")())