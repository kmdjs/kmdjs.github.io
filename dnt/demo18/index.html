<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
     <title>当耐特的游戏世界</title>
    <link rel="shortcut icon" href="../img/dang.ico" type="image/x-icon" />
</head>
<body style="background-color: silver">
    <div style="text-align:center;">
          <canvas style="border-bottom: #222 5px solid; border-left: #222 5px solid; border-top: #222 5px solid; border-right: #222 5px solid" id="testCanvas3" height="344" width="580">请使用现代浏览器观看在线演示！ </canvas><br/>
    <canvas style="border-bottom: #222 5px solid; border-left: #222 5px solid; border-top: #222 5px solid; border-right: #222 5px solid" id="testCanvas" height="344" width="580">请使用现代浏览器观看在线演示！ </canvas>
   
        </div>
     <div style="text-align: center">create by <a href="http://weibo.com/iamleizhang" target="_blank">当耐特</a></div>
    <script src="cl.js"></script>
    <script type="text/javascript">
        (function (b) { var a = function (a, b) { this.x = a || 0; this.y = b || 0 }; a.prototype = { "set": function (a, b) { this.x = a; this.y = b; return this }, copy: function (a) { this.x = a.x; this.y = a.y; return this }, clone: function () { return new THREE.Vector2(this.x, this.y) }, add: function (b) { return new a(this.x + b.x, this.y + b.y) }, addSelf: function (a) { this.x += a.x; this.y += a.y; return this }, sub: function (b) { return new a(this.x - b.x, this.y - b.y) }, subSelf: function (a) { this.x -= a.x; this.y -= a.y; return this }, multiplyScalar: function (a) { this.x *= a; this.y *= a; return this }, divideScalar: function (a) { if (a) { this.x /= a; this.y /= a } else this.set(0, 0); return this }, negate: function () { return this.multiplyScalar(-1) }, dot: function (a) { return this.x * a.x + this.y * a.y }, lengthSq: function () { return this.x * this.x + this.y * this.y }, length: function () { return Math.sqrt(this.lengthSq()) }, normalize: function () { return this.divideScalar(this.length()) }, distanceTo: function (a) { return Math.sqrt(this.distanceToSquared(a)) }, distanceToSquared: function (c) { var a = this.x - c.x, b = this.y - c.y; return a * a + b * b }, setLength: function (a) { return this.normalize().multiplyScalar(a) }, equals: function (a) { return a.x === this.x && a.y === this.y } }; b.Vector2 = a })(window); (function (b) { var a = function (c, d, e, b) { this.segLength = c; this.segCount = d; this.isFixed = e; this.startPoint = b; this.points = []; for (var a = 0; a < this.segCount; a++) this.points.push(new Vector2(this.startPoint.x, this.startPoint.y + a * this.segLength)) }, c = a.prototype; c.updatePointsPosition = function (c, a) { var d = this.points[a - 1].sub(c).setLength(this.segLength); this.points[a - 1] = c.add(d); if (a > 1) this.updatePointsPosition(this.points[a - 1], a - 1); else if (this.isFixed) for (var e = this.points[0].sub(this.startPoint), b = 0; b < this.points.length; b++) this.points[b].subSelf(e) }; b.Joint = a })(window); var joint = new Joint(2, 140, false, new Vector2(200, 100)), canvas, stage, shape; (function () { canvas = document.getElementById("testCanvas"); stage = new Stage(canvas); canvas.onmousemove = canvasMouseMoveHandler; shape = new Shape; stage.addChild(shape); drawjoint(joint) })(); function drawjoint(b) { shape.graphics.clear(); shape.graphics.ss(4, "round", "round"); for (var a = 0; a < b.points.length - 1; a++) { if (a % 2 === 0) shape.graphics.beginStroke("green"); else shape.graphics.beginStroke("red"); shape.graphics.mt(b.points[a].x, b.points[a].y).lt(b.points[a + 1].x, b.points[a + 1].y) } shape.graphics.endStroke(); stage.update() } function canvasMouseMoveHandler(a) { var b = canvas.getBoundingClientRect(); joint.points[joint.points.length - 1] = new Vector2(a.clientX - b.left, a.clientY - b.top); joint.updatePointsPosition(joint.points[joint.points.length - 1], joint.points.length - 1); drawjoint(joint) };var joint3 = new Joint(2, 100, true, new Vector2(200, 100)), canvas3, stage3, shape3; (function () { canvas3 = document.getElementById("testCanvas3"); stage3 = new Stage(canvas3); canvas3.onmousemove = canvas3MouseMoveHandler; shape3 = new Shape; stage3.addChild(shape3); drawjoint3(joint3) })(); function drawjoint3(b) { shape3.graphics.clear(); shape3.graphics.ss(4, "round", "round"); for (var a = 0; a < b.points.length - 1; a++) { if (Math.round(a / 10) % 2 === 0) shape3.graphics.s("#754726"); else shape3.graphics.s("#42270C"); shape3.graphics.mt(b.points[a].x, b.points[a].y).lt(b.points[a + 1].x, b.points[a + 1].y) } shape3.graphics.endStroke(); stage3.update() } function canvas3MouseMoveHandler(a) { var b = canvas3.getBoundingClientRect(); joint3.points[joint3.points.length - 1] = new Vector2(a.clientX - b.left, a.clientY - b.top); joint3.updatePointsPosition(joint3.points[joint3.points.length - 1], joint3.points.length - 1); drawjoint3(joint3) }
    </script>

</body>
</html>
