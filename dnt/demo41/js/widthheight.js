/** vim: et:ts=4:sw=4:sts=4
 * @license RequireJS 2.0.1 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/requirejs for details
 */

var requirejs,require,define;(function(global){function isFunction(e){return ostring.call(e)==="[object Function]"}function isArray(e){return ostring.call(e)==="[object Array]"}function each(e,t){if(e){var n;for(n=0;n<e.length;n+=1)if(t(e[n],n,e))break}}function eachReverse(e,t){if(e){var n;for(n=e.length-1;n>-1;n-=1)if(t(e[n],n,e))break}}function hasProp(e,t){return e.hasOwnProperty(t)}function eachProp(e,t){var n;for(n in e)if(e.hasOwnProperty(n)&&t(e[n],n))break}function mixin(e,t,n){t&&eachProp(t,function(t,r){if(n||!hasProp(e,r))e[r]=t})}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeContextModuleFunc(e,t,n){return function(){var r=aps.call(arguments,0),i;return n&&isFunction(i=r[r.length-1])&&(i.__requireJsBuild=!0),r.push(t),e.apply(null,r)}}function addRequireMethods(e,t,n){each([["toUrl"],["undef"],["defined","requireDefined"],["specified","requireSpecified"]],function(r){e[r[0]]=makeContextModuleFunc(t[r[1]||r[0]],n)})}function makeError(e,t,n,r){var i=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return i.requireType=e,i.requireModules=r,n&&(i.originalError=n),i}function newContext(e){function m(e){var t,n;for(t=0;e[t];t+=1){n=e[t];if(n===".")e.splice(t,1),t-=1;else if(n===".."){if(t===1&&(e[2]===".."||e[0]===".."))break;t>0&&(e.splice(t-1,2),t-=2)}}}function g(e,n,r){var i=n&&n.split("/"),s=t.map,o=s&&s["*"],u,a,f,l,c,h,p,d;e&&e.charAt(0)==="."&&(n?(t.pkgs[n]?i=[n]:i=i.slice(0,i.length-1),e=i.concat(e.split("/")),m(e),a=t.pkgs[u=e[0]],e=e.join("/"),a&&e===u+"/"+a.main&&(e=u)):e.indexOf("./")===0&&(e=e.substring(2)));if(r&&(i||o)&&s){l=e.split("/");for(c=l.length;c>0;c-=1){p=l.slice(0,c).join("/");if(i)for(h=i.length;h>0;h-=1){f=s[i.slice(0,h).join("/")];if(f){f=f[p];if(f){d=f;break}}}!d&&o&&o[p]&&(d=o[p]);if(d){l.splice(0,c,d),e=l.join("/");break}}}return e}function y(e){isBrowser&&each(scripts(),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===p.contextName)return t.parentNode.removeChild(t),!0})}function b(e){var n=t.paths[e];if(n&&isArray(n)&&n.length>1)return y(e),n.shift(),p.undef(e),p.require([e]),!0}function w(e,t,n,r){var i=e?e.indexOf("!"):-1,u=null,l=t?t.name:null,c=e,h=!0,d="",v,m,y;return e||(h=!1,e="_@r"+(a+=1)),i!==-1&&(u=e.substring(0,i),e=e.substring(i+1,e.length)),u&&(u=g(u,l,r),m=s[u]),e&&(u?m&&m.normalize?d=m.normalize(e,function(e){return g(e,l,r)}):d=g(e,l,r):(d=g(e,l,r),v=o[d],v||(v=p.nameToUrl(e,null,t),o[d]=v))),y=u&&!m&&!n?"_unnormalized"+(f+=1):"",{prefix:u,name:d,parentMap:t,unnormalized:!!y,url:v,originalName:c,isDefine:h,id:(u?u+"!"+d:d)+y}}function E(e){var t=e.id,r=n[t];return r||(r=n[t]=new p.Module(e)),r}function S(e,t,r){var i=e.id,o=n[i];hasProp(s,i)&&(!o||o.defineEmitComplete)?t==="defined"&&r(s[i]):E(e).on(t,r)}function x(e,t){var r=e.requireModules,i=!1;t?t(e):(each(r,function(t){var r=n[t];r&&(r.error=e,r.events.error&&(i=!0,r.emit("error",e)))}),i||req.onError(e))}function T(){globalDefQueue.length&&(apsp.apply(i,[i.length-1,0].concat(globalDefQueue)),globalDefQueue=[])}function N(e,t,n){var r=e&&e.map,i=makeContextModuleFunc(n||p.require,r,t);return addRequireMethods(i,p,r),i.isBrowser=isBrowser,i}function C(e){delete n[e],each(l,function(t,n){if(t.map.id===e)return l.splice(n,1),t.defined||(p.waitCount-=1),!0})}function k(e,t){var r=e.map.id,i=e.depMaps,s;if(!e.inited)return;return t[r]?e:(t[r]=!0,each(i,function(e){var i=e.id,o=n[i];if(!o)return;return!o.inited||!o.enabled?(s=null,delete t[r],!0):s=k(o,t)}),s)}function L(e,t,r){var i=e.map.id,o=e.depMaps;if(!e.inited||!e.map.isDefine)return;return t[i]?s[i]:(t[i]=e,each(o,function(s){var o=s.id,u=n[o],a;if(d[o])return;if(u){if(!u.inited||!u.enabled){r[i]=!0;return}a=L(u,t,r),r[o]||e.defineDepById(o,a)}}),e.check(!0),s[i])}function A(e){e.check()}function O(){var e=t.waitSeconds*1e3,r=e&&p.startTime+e<(new Date).getTime(),i=[],s=!1,o=!0,u,a,f,h;if(c)return;c=!0,eachProp(n,function(e){u=e.map,a=u.id;if(!e.enabled)return;if(!e.error)if(!e.inited&&r)b(a)?(h=!0,s=!0):(i.push(a),y(a));else if(!e.inited&&e.fetched&&u.isDefine){s=!0;if(!u.prefix)return o=!1}});if(r&&i.length)return f=makeError("timeout","Load timeout for modules: "+i,null,i),f.contextName=p.contextName,x(f);o&&(each(l,function(e){if(e.defined)return;var t=k(e,{}),n={};t&&(L(t,n,{}),eachProp(n,A))}),eachProp(n,A)),(!r||h)&&s&&(isBrowser||isWebWorker)&&!v&&(v=setTimeout(function(){v=0,O()},50)),c=!1}function M(e){E(w(e[0],null,!0)).init(e[1],e[2])}function _(e,t,n,r){e.detachEvent&&!isOpera?r&&e.detachEvent(r,t):e.removeEventListener(n,t,!1)}function D(e){var t=e.currentTarget||e.srcElement;return _(t,p.onScriptLoad,"load","onreadystatechange"),_(t,p.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}var t={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},shim:{}},n={},r={},i=[],s={},o={},u={},a=1,f=1,l=[],c,h,p,d,v;return d={require:function(e){return N(e)},exports:function(e){e.usingExports=!0;if(e.map.isDefine)return e.exports=s[e.map.id]={}},module:function(e){return e.module={id:e.map.id,uri:e.map.url,config:function(){return t.config&&t.config[e.map.id]||{}},exports:s[e.map.id]}}},h=function(e){this.events=r[e.id]||{},this.map=e,this.shim=t.shim[e.id],this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},h.prototype={init:function(e,t,n,r){r=r||{};if(this.inited)return;this.factory=t,n?this.on("error",n):this.events.error&&(n=bind(this,function(e){this.emit("error",e)})),each(e,bind(this,function(e,t){typeof e=="string"&&(e=w(e,this.map.isDefine?this.map:this.map.parentMap,!1,!0),this.depMaps.push(e));var r=d[e.id];if(r){this.depExports[t]=r(this);return}this.depCount+=1,S(e,"defined",bind(this,function(e){this.defineDep(t,e),this.check()})),n&&S(e,"error",n)})),this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check()},defineDepById:function(e,t){var n;return each(this.depMaps,function(t,r){if(t.id===e)return n=r,!0}),this.defineDep(n,t)},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(this.fetched)return;this.fetched=!0,p.startTime=(new Date).getTime();var e=this.map;e.prefix?this.callPlugin():this.shim?N(this,!0)(this.shim.deps||[],bind(this,function(){this.load()})):this.load()},load:function(){var e=this.map.url;u[e]||(u[e]=!0,p.load(this.map.id,e))},check:function(e){if(!this.enabled)return;var t=this.map.id,r=this.depExports,i=this.exports,o=this.factory,u,a;if(!this.inited)this.fetch();else if(this.error)this.emit("error",this.error);else if(!this.defining){this.defining=!0;if(this.depCount<1&&!this.defined){if(isFunction(o)){if(this.events.error)try{i=p.execCb(t,o,r,i)}catch(f){u=f}else i=p.execCb(t,o,r,i);this.map.isDefine&&(a=this.module,a&&a.exports!==undefined&&a.exports!==this.exports?i=a.exports:i===undefined&&this.usingExports&&(i=this.exports));if(u)return u.requireMap=this.map,u.requireModules=[this.map.id],u.requireType="define",x(this.error=u)}else i=o;this.exports=i,this.map.isDefine&&!this.ignore&&(s[t]=i,req.onResourceLoad&&req.onResourceLoad(p,this.map,this.depMaps)),delete n[t],this.defined=!0,p.waitCount-=1,p.waitCount===0&&(l=[])}this.defining=!1,e||this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}},callPlugin:function(){var e=this.map,r=e.id,i=w(e.prefix,null,!1,!0);S(i,"defined",bind(this,function(i){var s=this.map.name,o=this.map.parentMap?this.map.parentMap.name:null,u,a,f;if(this.map.unnormalized){i.normalize&&(s=i.normalize(s,function(e){return g(e,o,!0)})||""),a=w(e.prefix+"!"+s),S(a,"defined",bind(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),f=n[a.id],f&&(this.events.error&&f.on("error",bind(this,function(e){this.emit("error",e)})),f.enable());return}u=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),u.error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[r],eachProp(n,function(e){e.map.id.indexOf(r+"_unnormalized")===0&&C(e.map.id)}),x(e)}),u.fromText=function(e,t){var n=useInteractive;n&&(useInteractive=!1),req.exec(t),n&&(useInteractive=!0),p.completeLoad(e)},i.load(e.name,N(e.parentMap,!0,function(e,t){return p.require(e,t)}),u,t)})),p.enable(i,this),this.pluginMaps[i.id]=i},enable:function(){this.enabled=!0,this.waitPushed||(l.push(this),p.waitCount+=1,this.waitPushed=!0),each(this.depMaps,bind(this,function(e){var t=e.id,r=n[t];!d[t]&&r&&!r.enabled&&p.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=n[e.id];t&&!t.enabled&&p.enable(e,this)})),this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),e==="error"&&delete this.events[e]}},p={config:t,contextName:e,registry:n,defined:s,urlMap:o,urlFetched:u,waitCount:0,defQueue:i,Module:h,makeModuleMap:w,configure:function(e){e.baseUrl&&e.baseUrl.charAt(e.baseUrl.length-1)!=="/"&&(e.baseUrl+="/");var n=t.paths,r=t.pkgs,i=t.shim,s=t.map||{};mixin(t,e,!0),mixin(n,e.paths,!0),t.paths=n,e.map&&(mixin(s,e.map,!0),t.map=s),e.shim&&(eachProp(e.shim,function(e,t){isArray(e)&&(e={deps:e}),e.exports&&!e.exports.__buildReady&&(e.exports=p.makeShimExports(e.exports)),i[t]=e}),t.shim=i),e.packages&&(each(e.packages,function(e){var t;e=typeof e=="string"?{name:e}:e,t=e.location,r[e.name]={name:e.name,location:t||e.name,main:(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}}),t.pkgs=r),(e.deps||e.callback)&&p.require(e.deps||[],e.callback)},makeShimExports:function(e){var t;return typeof e=="string"?(t=function(){return getGlobal(e)},t.exports=e,t):function(){return e.apply(global,arguments)}},requireDefined:function(e,t){return hasProp(s,w(e,t,!1,!0).id)},requireSpecified:function(e,t){return e=w(e,t,!1,!0).id,hasProp(s,e)||hasProp(n,e)},require:function(t,n,r,o){var u,a,f,l,c;if(typeof t=="string")return isFunction(n)?x(makeError("requireargs","Invalid require call"),r):req.get?req.get(p,t,n):(u=t,o=n,f=w(u,o,!1,!0),a=f.id,hasProp(s,a)?s[a]:x(makeError("notloaded",'Module name "'+a+'" has not been loaded yet for context: '+e)));r&&!isFunction(r)&&(o=r,r=undefined),n&&!isFunction(n)&&(o=n,n=undefined),T();while(i.length){c=i.shift();if(c[0]===null)return x(makeError("mismatch","Mismatched anonymous define() module: "+c[c.length-1]));M(c)}return l=E(w(null,o)),l.init(t,n,r,{enabled:!0}),O(),p.require},undef:function(e){var t=w(e,null,!0),i=n[e];delete s[e],delete o[e],delete u[t.url],delete r[e],i&&(i.events.defined&&(r[e]=i.events),C(e))},enable:function(e,t){var r=n[e.id];r&&E(e).enable()},completeLoad:function(e){var r=t.shim[e]||{},o=r.exports&&r.exports.exports,u,a,f;T();while(i.length){a=i.shift();if(a[0]===null){a[0]=e;if(u)break;u=!0}else a[0]===e&&(u=!0);M(a)}f=n[e];if(!u&&!s[e]&&f&&!f.inited){if(t.enforceDefine&&(!o||!getGlobal(o))){if(b(e))return;return x(makeError("nodefine","No define call for "+e,null,[e]))}M([e,r.deps||[],r.exports])}O()},toUrl:function(e,t){var n=e.lastIndexOf("."),r=null;return n!==-1&&(r=e.substring(n,e.length),e=e.substring(0,n)),p.nameToUrl(e,r,t)},nameToUrl:function(e,n,r){var i,s,o,u,a,f,l,c,h;e=g(e,r&&r.id,!0);if(req.jsExtRegExp.test(e))c=e+(n||"");else{i=t.paths,s=t.pkgs,a=e.split("/");for(f=a.length;f>0;f-=1){l=a.slice(0,f).join("/"),o=s[l],h=i[l];if(h){isArray(h)&&(h=h[0]),a.splice(0,f,h);break}if(o){e===o.name?u=o.location+"/"+o.main:u=o.location,a.splice(0,f,u);break}}c=a.join("/")+(n||".js"),c=(c.charAt(0)==="/"||c.match(/^[\w\+\.\-]+:/)?"":t.baseUrl)+c}return t.urlArgs?c+((c.indexOf("?")===-1?"?":"&")+t.urlArgs):c},load:function(e,t){req.load(p,e,t)},execCb:function(e,t,n,r){return t.apply(r,n)},onScriptLoad:function(e){if(e.type==="load"||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=D(e);p.completeLoad(t.id)}},onScriptError:function(e){var t=D(e);if(!b(t.id))return x(makeError("scripterror","Script error",e,[t.id]))}}}function getInteractiveScript(){return interactiveScript&&interactiveScript.readyState==="interactive"?interactiveScript:(eachReverse(scripts(),function(e){if(e.readyState==="interactive")return interactiveScript=e}),interactiveScript)}var version="2.0.1",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,cjsRequireRegExp=/require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,ostring=Object.prototype.toString,ap=Array.prototype,aps=ap.slice,apsp=ap.splice,isBrowser=typeof window!="undefined"&&!!navigator&&!!document,isWebWorker=!isBrowser&&typeof importScripts!="undefined",readyRegExp=isBrowser&&navigator.platform==="PLAYSTATION 3"?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera=typeof opera!="undefined"&&opera.toString()==="[object Opera]",contexts={},cfg={},globalDefQueue=[],useInteractive=!1,req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath;if(typeof define!="undefined")return;if(typeof requirejs!="undefined"){if(isFunction(requirejs))return;cfg=requirejs,requirejs=undefined}typeof require!="undefined"&&!isFunction(require)&&(cfg=require,require=undefined),req=requirejs=function(e,t,n,r){var i=defContextName,s,o;return!isArray(e)&&typeof e!="string"&&(o=e,isArray(t)?(e=t,t=n,n=r):e=[]),o&&o.context&&(i=o.context),s=contexts[i],s||(s=contexts[i]=req.s.newContext(i)),o&&s.configure(o),s.require(e,t,n)},req.config=function(e){return req(e)},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),addRequireMethods(req,contexts[defContextName]),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=function(e){throw e},req.load=function(e,t,n){var r=e&&e.config||{},i;if(isBrowser)return i=r.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script"),i.type=r.scriptType||"text/javascript",i.charset="utf-8",i.setAttribute("data-requirecontext",e.contextName),i.setAttribute("data-requiremodule",t),i.attachEvent&&!(i.attachEvent.toString&&i.attachEvent.toString().indexOf("[native code")<0)&&!isOpera?(useInteractive=!0,i.attachEvent("onreadystatechange",e.onScriptLoad)):(i.addEventListener("load",e.onScriptLoad,!1),i.addEventListener("error",e.onScriptError,!1)),i.src=n,currentlyAddingScript=i,baseElement?head.insertBefore(i,baseElement):head.appendChild(i),currentlyAddingScript=null,i;isWebWorker&&(importScripts(n),e.completeLoad(t))},isBrowser&&eachReverse(scripts(),function(e){head||(head=e.parentNode),dataMain=e.getAttribute("data-main");if(dataMain)return cfg.baseUrl||(src=dataMain.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath,dataMain=mainScript.replace(jsSuffixRegExp,"")),cfg.deps=cfg.deps?cfg.deps.concat(dataMain):[dataMain],!0}),define=function(e,t,n){var r,i;typeof e!="string"&&(n=t,t=e,e=null),isArray(t)||(n=t,t=[]),!t.length&&isFunction(n)&&n.length&&(n.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(e,n){t.push(n)}),t=(n.length===1?["require"]:["require","exports","module"]).concat(t)),useInteractive&&(r=currentlyAddingScript||getInteractiveScript(),r&&(e||(e=r.getAttribute("data-requiremodule")),i=contexts[r.getAttribute("data-requirecontext")])),(i?i.defQueue:globalDefQueue).push([e,t,n])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)})(this),define("requireLib",function(){}),define("SCJ",[],function(){var e={},t=0;return e.getId=function(){return t++},e.create=function(t,n){return e["create"+t.charAt(0).toUpperCase()+t.substr(1)](n)},e}),define("canvas/render",["SCJ"],function(e){var t={};return!function(){var e=function(e,t,n){this.initialize(e,t,n)},n=e.prototype;n.type=null,n.target=null,n.currentTarget=null,n.eventPhase=0,n.bubbles=!1,n.cancelable=!1,n.timeStamp=0,n.defaultPrevented=!1,n.propagationStopped=!1,n.immediatePropagationStopped=!1,n.removed=!1,n.initialize=function(e,t,n){this.type=e,this.bubbles=t,this.cancelable=n,this.timeStamp=(new Date).getTime()},n.preventDefault=function(){this.defaultPrevented=!0},n.stopPropagation=function(){this.propagationStopped=!0},n.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},n.remove=function(){this.removed=!0},n.clone=function(){return new e(this.type,this.bubbles,this.cancelable)},n.toString=function(){return"[Event (type="+this.type+")]"},t.Event=e}(),!function(){var e=function(){},n=e.prototype;e.initialize=function(e){e.addEventListener=n.addEventListener,e.on=n.on,e.removeEventListener=e.off=n.removeEventListener,e.removeAllEventListeners=n.removeAllEventListeners,e.hasEventListener=n.hasEventListener,e.dispatchEvent=n.dispatchEvent,e._dispatchEvent=n._dispatchEvent,e.willTrigger=n.willTrigger},n._listeners=null,n._captureListeners=null,n.initialize=function(){},n.addEventListener=function(e,t,n){var r;r=n?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var i=r[e];return i&&this.removeEventListener(e,t,n),i=r[e],i?i.push(t):r[e]=[t],t},n.on=function(e,t,n,r,i,s){return t.handleEvent&&(n=n||t,t=t.handleEvent),n=n||this,this.addEventListener(e,function(e){t.call(n,e,i),r&&e.remove()},s)},n.removeEventListener=function(e,t,n){var r=n?this._captureListeners:this._listeners;if(r){var i=r[e];if(i)for(var s=0,o=i.length;o>s;s++)if(i[s]==t){1==o?delete r[e]:i.splice(s,1);break}}},n.off=n.removeEventListener,n.removeAllEventListeners=function(e){e?(this._listeners&&delete this._listeners[e],this._captureListeners&&delete this._captureListeners[e]):this._listeners=this._captureListeners=null},n.dispatchEvent=function(e,n){if("string"==typeof e){var r=this._listeners;if(!r||!r[e])return!1;e=new t.Event(e)}if(e.target=n||this,e.bubbles&&this.parent){for(var i=this,s=[i];i.parent;)s.push(i=i.parent);var o,u=s.length;for(o=u-1;o>=0&&!e.propagationStopped;o--)s[o]._dispatchEvent(e,1+(0==o));for(o=1;u>o&&!e.propagationStopped;o++)s[o]._dispatchEvent(e,3)}else this._dispatchEvent(e,2);return e.defaultPrevented},n.hasEventListener=function(e){var t=this._listeners,n=this._captureListeners;return!!(t&&t[e]||n&&n[e])},n.willTrigger=function(e){for(var t=this;t;){if(t.hasEventListener(e))return!0;t=t.parent}return!1},n.toString=function(){return"[EventDispatcher]"},n._dispatchEvent=function(e,t){var n,r=1==t?this._captureListeners:this._listeners;if(e&&r){var i=r[e.type];if(!i||!(n=i.length))return;e.currentTarget=this,e.eventPhase=t,e.removed=!1,i=i.slice();for(var s=0;n>s&&!e.immediatePropagationStopped;s++){var o=i[s];o.handleEvent?o.handleEvent(e):o(e),e.removed&&(this.off(e.type,o,1==t),e.removed=!1)}}},t.EventDispatcher=e}(),!function(){t.indexOf=function(e,t){for(var n=0,r=e.length;r>n;n++)if(t===e[n])return n;return-1}}(),!function(){var e=function(){throw"UID cannot be instantiated"};e._nextID=0,e.get=function(){return e._nextID++},t.UID=e}(),!function(){var e=function(){throw"Ticker cannot be instantiated."};e.RAF_SYNCHED="synched",e.RAF="raf",e.TIMEOUT="timeout",e.useRAF=!1,e.timingMode=null,e.maxDelta=0,e.removeEventListener=null,e.removeAllEventListeners=null,e.dispatchEvent=null,e.hasEventListener=null,e._listeners=null,t.EventDispatcher.initialize(e),e._addEventListener=e.addEventListener,e.addEventListener=function(){return!e._inited&&e.init(),e._addEventListener.apply(e,arguments)},e._paused=!1,e._inited=!1,e._startTime=0,e._pausedTime=0,e._ticks=0,e._pausedTicks=0,e._interval=50,e._lastTime=0,e._times=null,e._tickTimes=null,e._timerId=null,e._raf=!0,e.init=function(){e._inited||(e._inited=!0,e._times=[],e._tickTimes=[],e._startTime=e._getTime(),e._times.push(e._lastTime=0),e.setInterval(e._interval))},e.reset=function(){if(e._raf){var t=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame;t&&t(e._timerId)}else clearTimeout(e._timerId);e.removeAllEventListeners("tick")},e.setInterval=function(t){e._interval=t,e._inited&&e._setupTick()},e.getInterval=function(){return e._interval},e.setFPS=function(t){e.setInterval(1e3/t)},e.getFPS=function(){return 1e3/e._interval},e.getMeasuredTickTime=function(t){var n=0,r=e._tickTimes;if(r.length<1)return-1;t=Math.min(r.length,t||0|e.getFPS());for(var i=0;t>i;i++)n+=r[i];return n/t},e.getMeasuredFPS=function(t){var n=e._times;return n.length<2?-1:(t=Math.min(n.length-1,t||0|e.getFPS()),1e3/((n[0]-n[t])/t))},e.setPaused=function(t){e._paused=t},e.getPaused=function(){return e._paused},e.getTime=function(t){return e._getTime()-e._startTime-(t?e._pausedTime:0)},e.getEventTime=function(t){return(e._lastTime||e._startTime)-(t?e._pausedTime:0)},e.getTicks=function(t){return e._ticks-(t?e._pausedTicks:0)},e._handleSynch=function(){var t=e._getTime()-e._startTime;e._timerId=null,e._setupTick(),t-e._lastTime>=.97*(e._interval-1)&&e._tick()},e._handleRAF=function(){e._timerId=null,e._setupTick(),e._tick()},e._handleTimeout=function(){e._timerId=null,e._setupTick(),e._tick()},e._setupTick=function(){if(null==e._timerId){var t=e.timingMode||e.useRAF&&e.RAF_SYNCHED;if(t==e.RAF_SYNCHED||t==e.RAF){var n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(n)return e._timerId=n(t==e.RAF?e._handleRAF:e._handleSynch),e._raf=!0,void 0}e._raf=!1,e._timerId=setTimeout(e._handleTimeout,e._interval)}},e._tick=function(){var n=e._getTime()-e._startTime,r=n-e._lastTime,i=e._paused;if(e._ticks++,i&&(e._pausedTicks++,e._pausedTime+=r),e._lastTime=n,e.hasEventListener("tick")){var s=new t.Event("tick"),o=e.maxDelta;s.delta=o&&r>o?o:r,s.paused=i,s.time=n,s.runTime=n-e._pausedTime,e.dispatchEvent(s)}for(e._tickTimes.unshift(e._getTime()-n);e._tickTimes.length>100;)e._tickTimes.pop();for(e._times.unshift(n);e._times.length>100;)e._times.pop()};var n=window.performance&&(performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow);e._getTime=function(){return n&&n.call(performance)||(new Date).getTime()},t.Ticker=e}(),!function(){var e=function(e,t,n,r,i,s,o,u,a,f){this.initialize(e,t,n,r,i,s,o,u,a,f)},n=e.prototype=new t.Event;n.stageX=0,n.stageY=0,n.rawX=0,n.rawY=0,n.nativeEvent=null,n.pointerID=0,n.primary=!1,n.addEventListener=null,n.removeEventListener=null,n.removeAllEventListeners=null,n.dispatchEvent=null,n.hasEventListener=null,n._listeners=null,t.EventDispatcher.initialize(n),n._get_localX=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).x},n._get_localY=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).y};try{Object.defineProperties(n,{localX:{get:n._get_localX},localY:{get:n._get_localY}})}catch(r){}n.Event_initialize=n.initialize,n.initialize=function(e,t,n,r,i,s,o,u,a,f){this.Event_initialize(e,t,n),this.stageX=r,this.stageY=i,this.nativeEvent=s,this.pointerID=o,this.primary=u,this.rawX=null==a?r:a,this.rawY=null==f?i:f},n.clone=function(){return new e(this.type,this.bubbles,this.cancelable,this.stageX,this.stageY,this.target,this.nativeEvent,this.pointerID,this.primary,this.rawX,this.rawY)},n.toString=function(){return"[MouseEvent (type="+this.type+" stageX="+this.stageX+" stageY="+this.stageY+")]"},t.MouseEvent=e}(),!function(){var e=function(e,t,n,r,i,s){this.initialize(e,t,n,r,i,s)},n=e.prototype;e.identity=null,e.DEG_TO_RAD=Math.PI/180,n.a=1,n.b=0,n.c=0,n.d=1,n.tx=0,n.ty=0,n.alpha=1,n.shadow=null,n.compositeOperation=null,n.initialize=function(e,t,n,r,i,s){return this.a=null==e?1:e,this.b=t||0,this.c=n||0,this.d=null==r?1:r,this.tx=i||0,this.ty=s||0,this},n.prepend=function(e,t,n,r,i,s){var o=this.tx;if(1!=e||0!=t||0!=n||1!=r){var u=this.a,a=this.c;this.a=u*e+this.b*n,this.b=u*t+this.b*r,this.c=a*e+this.d*n,this.d=a*t+this.d*r}return this.tx=o*e+this.ty*n+i,this.ty=o*t+this.ty*r+s,this},n.append=function(e,t,n,r,i,s){var o=this.a,u=this.b,a=this.c,f=this.d;return this.a=e*o+t*a,this.b=e*u+t*f,this.c=n*o+r*a,this.d=n*u+r*f,this.tx=i*o+s*a+this.tx,this.ty=i*u+s*f+this.ty,this},n.prependMatrix=function(e){return this.prepend(e.a,e.b,e.c,e.d,e.tx,e.ty),this.prependProperties(e.alpha,e.shadow,e.compositeOperation),this},n.appendMatrix=function(e){return this.append(e.a,e.b,e.c,e.d,e.tx,e.ty),this.appendProperties(e.alpha,e.shadow,e.compositeOperation),this},n.prependTransform=function(t,n,r,i,s,o,u,f,l){if(s%360)var c=s*e.DEG_TO_RAD,h=Math.cos(c),p=Math.sin(c);else h=1,p=0;return(f||l)&&(this.tx-=f,this.ty-=l),o||u?(o*=e.DEG_TO_RAD,u*=e.DEG_TO_RAD,this.prepend(h*r,p*r,-p*i,h*i,0,0),this.prepend(Math.cos(u),Math.sin(u),-Math.sin(o),Math.cos(o),t,n)):this.prepend(h*r,p*r,-p*i,h*i,t,n),this},n.appendTransform=function(t,n,r,i,s,o,u,f,l){if(s%360)var c=s*e.DEG_TO_RAD,h=Math.cos(c),p=Math.sin(c);else h=1,p=0;return o||u?(o*=e.DEG_TO_RAD,u*=e.DEG_TO_RAD,this.append(Math.cos(u),Math.sin(u),-Math.sin(o),Math.cos(o),t,n),this.append(h*r,p*r,-p*i,h*i,0,0)):this.append(h*r,p*r,-p*i,h*i,t,n),(f||l)&&(this.tx-=f*this.a+l*this.c,this.ty-=f*this.b+l*this.d),this},n.rotate=function(e){var t=Math.cos(e),n=Math.sin(e),r=this.a,i=this.c,s=this.tx;return this.a=r*t-this.b*n,this.b=r*n+this.b*t,this.c=i*t-this.d*n,this.d=i*n+this.d*t,this.tx=s*t-this.ty*n,this.ty=s*n+this.ty*t,this},n.skew=function(t,n){return t*=e.DEG_TO_RAD,n*=e.DEG_TO_RAD,this.append(Math.cos(n),Math.sin(n),-Math.sin(t),Math.cos(t),0,0),this},n.scale=function(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this},n.translate=function(e,t){return this.tx+=e,this.ty+=t,this},n.identity=function(){return this.alpha=this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.shadow=this.compositeOperation=null,this},n.invert=function(){var e=this.a,t=this.b,n=this.c,r=this.d,i=this.tx,s=e*r-t*n;return this.a=r/s,this.b=-t/s,this.c=-n/s,this.d=e/s,this.tx=(n*this.ty-r*i)/s,this.ty=-(e*this.ty-t*i)/s,this},n.isIdentity=function(){return 0==this.tx&&0==this.ty&&1==this.a&&0==this.b&&0==this.c&&1==this.d},n.transformPoint=function(e,t,n){return n=n||{},n.x=e*this.a+t*this.c+this.tx,n.y=e*this.b+t*this.d+this.ty,n},n.decompose=function(t){null==t&&(t={}),t.x=this.tx,t.y=this.ty,t.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),t.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var n=Math.atan2(-this.c,this.d),r=Math.atan2(this.b,this.a);return n==r?(t.rotation=r/e.DEG_TO_RAD,this.a<0&&this.d>=0&&(t.rotation+=t.rotation<=0?180:-180),t.skewX=t.skewY=0):(t.skewX=n/e.DEG_TO_RAD,t.skewY=r/e.DEG_TO_RAD),t},n.reinitialize=function(e,t,n,r,i,s,o,u,a){return this.initialize(e,t,n,r,i,s),this.alpha=null==o?1:o,this.shadow=u,this.compositeOperation=a,this},n.copy=function(e){return this.reinitialize(e.a,e.b,e.c,e.d,e.tx,e.ty,e.alpha,e.shadow,e.compositeOperation)},n.appendProperties=function(e,t,n){return this.alpha*=e,this.shadow=t||this.shadow,this.compositeOperation=n||this.compositeOperation,this},n.prependProperties=function(e,t,n){return this.alpha*=e,this.shadow=this.shadow||t,this.compositeOperation=this.compositeOperation||n,this},n.clone=function(){return(new e).copy(this)},n.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"},e.identity=new e,t.Matrix2D=e}(),!function(){var e=function(e,t){this.initialize(e,t)},n=e.prototype;n.x=0,n.y=0,n.initialize=function(e,t){return this.x=null==e?0:e,this.y=null==t?0:t,this},n.copy=function(e){return this.initialize(e.x,e.y)},n.clone=function(){return new e(this.x,this.y)},n.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"},t.Point=e}(),!function(){var e=function(e,t,n,r){this.initialize(e,t,n,r)},n=e.prototype;n.x=0,n.y=0,n.width=0,n.height=0,n.initialize=function(e,t,n,r){return this.x=e||0,this.y=t||0,this.width=n||0,this.height=r||0,this},n.copy=function(e){return this.initialize(e.x,e.y,e.width,e.height)},n.clone=function(){return new e(this.x,this.y,this.width,this.height)},n.toString=function(){return"[Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")]"},t.Rectangle=e}(),!function(){var e=function(e,t,n,r,i,s,o){this.initialize(e,t,n,r,i,s,o)},n=e.prototype;n.target=null,n.overLabel=null,n.outLabel=null,n.downLabel=null,n.play=!1,n._isPressed=!1,n._isOver=!1,n.initialize=function(e,t,n,r,i,s,o){e.addEventListener&&(this.target=e,e.cursor="pointer",this.overLabel=null==n?"over":n,this.outLabel=null==t?"out":t,this.downLabel=null==r?"down":r,this.play=i,this.setEnabled(!0),this.handleEvent({}),s&&(o&&(s.actionsEnabled=!1,s.gotoAndStop&&s.gotoAndStop(o)),e.hitArea=s))},n.setEnabled=function(e){var t=this.target;e?(t.addEventListener("rollover",this),t.addEventListener("rollout",this),t.addEventListener("mousedown",this),t.addEventListener("pressup",this)):(t.removeEventListener("rollover",this),t.removeEventListener("rollout",this),t.removeEventListener("mousedown",this),t.removeEventListener("pressup",this))},n.toString=function(){return"[ButtonHelper]"},n.handleEvent=function(e){var t,n=this.target,r=e.type;"mousedown"==r?(this._isPressed=!0,t=this.downLabel):"pressup"==r?(this._isPressed=!1,t=this._isOver?this.overLabel:this.outLabel):"rollover"==r?(this._isOver=!0,t=this._isPressed?this.downLabel:this.overLabel):(this._isOver=!1,t=this._isPressed?this.overLabel:this.outLabel),this.play?n.gotoAndPlay&&n.gotoAndPlay(t):n.gotoAndStop&&n.gotoAndStop(t)},t.ButtonHelper=e}(),!function(){var e=function(e,t,n,r){this.initialize(e,t,n,r)},n=e.prototype;e.identity=null,n.color=null,n.offsetX=0,n.offsetY=0,n.blur=0,n.initialize=function(e,t,n,r){this.color=e,this.offsetX=t,this.offsetY=n,this.blur=r},n.toString=function(){return"[Shadow]"},n.clone=function(){return new e(this.color,this.offsetX,this.offsetY,this.blur)},e.identity=new e("transparent",0,0,0),t.Shadow=e}(),!function(){var e=function(e){this.initialize(e)},n=e.prototype=new t.EventDispatcher;n.complete=!0,n.framerate=0,n._animations=null,n._frames=null,n._images=null,n._data=null,n._loadCount=0,n._frameHeight=0,n._frameWidth=0,n._numFrames=0,n._regX=0,n._regY=0,n.initialize=function(e){var n,r,i,s;if(null!=e){if(this.framerate=e.framerate||0,e.images&&(r=e.images.length)>0)for(s=this._images=[],n=0;r>n;n++){var o=e.images[n];if("string"==typeof o){var u=o;o=document.createElement("img"),o.src=u}s.push(o),o.getContext||o.complete||(this._loadCount++,this.complete=!1,function(e){o.onload=function(){e._handleImageLoad()}}(this))}if(null!=e.frames)if(e.frames instanceof Array)for(this._frames=[],s=e.frames,n=0,r=s.length;r>n;n++){var a=s[n];this._frames.push({image:this._images[a[4]?a[4]:0],rect:new t.Rectangle(a[0],a[1],a[2],a[3]),regX:a[5]||0,regY:a[6]||0})}else i=e.frames,this._frameWidth=i.width,this._frameHeight=i.height,this._regX=i.regX||0,this._regY=i.regY||0,this._numFrames=i.count,0==this._loadCount&&this._calculateFrames();if(this._animations=[],null!=(i=e.animations)){this._data={};var f;for(f in i){var l={name:f},c=i[f];if("number"==typeof c)s=l.frames=[c];else if(c instanceof Array)if(1==c.length)l.frames=[c[0]];else for(l.speed=c[3],l.next=c[2],s=l.frames=[],n=c[0];n<=c[1];n++)s.push(n);else{l.speed=c.speed,l.next=c.next;var h=c.frames;s=l.frames="number"==typeof h?[h]:h.slice(0)}(l.next===!0||void 0===l.next)&&(l.next=f),(l.next===!1||s.length<2&&l.next==f)&&(l.next=null),l.speed||(l.speed=1),this._animations.push(f),this._data[f]=l}}}},n.getNumFrames=function(e){if(null==e)return this._frames?this._frames.length:this._numFrames;var t=this._data[e];return null==t?0:t.frames.length},n.getAnimations=function(){return this._animations.slice(0)},n.getAnimation=function(e){return this._data[e]},n.getFrame=function(e){var t;return this._frames&&(t=this._frames[e])?t:null},n.getFrameBounds=function(e,n){var r=this.getFrame(e);return r?(n||new t.Rectangle).initialize(-r.regX,-r.regY,r.rect.width,r.rect.height):null},n.toString=function(){return"[SpriteSheet]"},n.clone=function(){var t=new e;return t.complete=this.complete,t._animations=this._animations,t._frames=this._frames,t._images=this._images,t._data=this._data,t._frameHeight=this._frameHeight,t._frameWidth=this._frameWidth,t._numFrames=this._numFrames,t._loadCount=this._loadCount,t},n._handleImageLoad=function(){0==--this._loadCount&&(this._calculateFrames(),this.complete=!0,this.dispatchEvent("complete"))},n._calculateFrames=function(){if(!this._frames&&0!=this._frameWidth){this._frames=[];for(var e=0,n=this._frameWidth,r=this._frameHeight,i=0,s=this._images;i<s.length;i++){for(var o=s[i],u=0|o.width/n,a=0|o.height/r,f=this._numFrames>0?Math.min(this._numFrames-e,u*a):u*a,l=0;f>l;l++)this._frames.push({image:o,rect:new t.Rectangle(l%u*n,(0|l/u)*r,n,r),regX:this._regX,regY:this._regY});e+=f}this._numFrames=e}},t.SpriteSheet=e}(),!function(){function e(e,t,n){this.f=e,this.params=t,this.path=null==n?!0:n}e.prototype.exec=function(e){this.f.apply(e,this.params)};var n=function(){this.initialize()},r=n.prototype;n.getRGB=function(e,t,n,r){return null!=e&&null==n&&(r=t,n=255&e,t=255&e>>8,e=255&e>>16),null==r?"rgb("+e+","+t+","+n+")":"rgba("+e+","+t+","+n+","+r+")"},n.getHSL=function(e,t,n,r){return null==r?"hsl("+e%360+","+t+"%,"+n+"%)":"hsla("+e%360+","+t+"%,"+n+"%,"+r+")"},n.Command=e,n.BASE_64={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63},n.STROKE_CAPS_MAP=["butt","round","square"],n.STROKE_JOINTS_MAP=["miter","round","bevel"];var i=t.createCanvas?t.createCanvas():document.createElement("canvas");if(i.getContext){var s=n._ctx=i.getContext("2d");n.beginCmd=new e(s.beginPath,[],!1),n.fillCmd=new e(s.fill,[],!1),n.strokeCmd=new e(s.stroke,[],!1),i.width=i.height=1}r._strokeInstructions=null,r._strokeStyleInstructions=null,r._strokeIgnoreScale=!1,r._fillInstructions=null,r._fillMatrix=null,r._instructions=null,r._oldInstructions=null,r._activeInstructions=null,r._active=!1,r._dirty=!1,r.initialize=function(){this.clear(),this._ctx=n._ctx},r.isEmpty=function(){return!(this._instructions.length||this._oldInstructions.length||this._activeInstructions.length)},r.draw=function(e){this._dirty&&this._updateInstructions();for(var t=this._instructions,n=0,r=t.length;r>n;n++)t[n].exec(e)},r.drawAsPath=function(e){this._dirty&&this._updateInstructions();for(var t,n=this._instructions,r=0,i=n.length;i>r;r++)((t=n[r]).path||0==r)&&t.exec(e)},r.moveTo=function(t,n){return this._activeInstructions.push(new e(this._ctx.moveTo,[t,n])),this},r.lineTo=function(t,n){return this._dirty=this._active=!0,this._activeInstructions.push(new e(this._ctx.lineTo,[t,n])),this},r.arcTo=function(t,n,r,i,s){return this._dirty=this._active=!0,this._activeInstructions.push(new e(this._ctx.arcTo,[t,n,r,i,s])),this},r.arc=function(t,n,r,i,s,o){return this._dirty=this._active=!0,null==o&&(o=!1),this._activeInstructions.push(new e(this._ctx.arc,[t,n,r,i,s,o])),this},r.quadraticCurveTo=function(t,n,r,i){return this._dirty=this._active=!0,this._activeInstructions.push(new e(this._ctx.quadraticCurveTo,[t,n,r,i])),this},r.bezierCurveTo=function(t,n,r,i,s,o){return this._dirty=this._active=!0,this._activeInstructions.push(new e(this._ctx.bezierCurveTo,[t,n,r,i,s,o])),this},r.rect=function(t,n,r,i){return this._dirty=this._active=!0,this._activeInstructions.push(new e(this._ctx.rect,[t,n,r,i])),this},r.closePath=function(){return this._active&&(this._dirty=!0,this._activeInstructions.push(new e(this._ctx.closePath,[]))),this},r.clear=function(){return this._instructions=[],this._oldInstructions=[],this._activeInstructions=[],this._strokeStyleInstructions=this._strokeInstructions=this._fillInstructions=this._fillMatrix=null,this._active=this._dirty=this._strokeIgnoreScale=!1,this},r.beginFill=function(t){return this._active&&this._newPath(),this._fillInstructions=t?[new e(this._setProp,["fillStyle",t],!1)]:null,this._fillMatrix=null,this},r.beginLinearGradientFill=function(t,n,r,i,s,o){this._active&&this._newPath();for(var u=this._ctx.createLinearGradient(r,i,s,o),f=0,l=t.length;l>f;f++)u.addColorStop(n[f],t[f]);return this._fillInstructions=[new e(this._setProp,["fillStyle",u],!1)],this._fillMatrix=null,this},r.beginRadialGradientFill=function(t,n,r,i,s,o,u,f){this._active&&this._newPath();for(var l=this._ctx.createRadialGradient(r,i,s,o,u,f),c=0,h=t.length;h>c;c++)l.addColorStop(n[c],t[c]);return this._fillInstructions=[new e(this._setProp,["fillStyle",l],!1)],this._fillMatrix=null,this},r.beginBitmapFill=function(t,n,r){this._active&&this._newPath(),n=n||"";var i=this._ctx.createPattern(t,n);return this._fillInstructions=[new e(this._setProp,["fillStyle",i],!1)],this._fillMatrix=r?[r.a,r.b,r.c,r.d,r.tx,r.ty]:null,this},r.endFill=function(){return this.beginFill()},r.setStrokeStyle=function(t,r,i,s,o){return this._active&&this._newPath(),this._strokeStyleInstructions=[new e(this._setProp,["lineWidth",null==t?"1":t],!1),new e(this._setProp,["lineCap",null==r?"butt":isNaN(r)?r:n.STROKE_CAPS_MAP[r]],!1),new e(this._setProp,["lineJoin",null==i?"miter":isNaN(i)?i:n.STROKE_JOINTS_MAP[i]],!1),new e(this._setProp,["miterLimit",null==s?"10":s],!1)],this._strokeIgnoreScale=o,this},r.beginStroke=function(t){return this._active&&this._newPath(),this._strokeInstructions=t?[new e(this._setProp,["strokeStyle",t],!1)]:null,this},r.beginLinearGradientStroke=function(t,n,r,i,s,o){this._active&&this._newPath();for(var u=this._ctx.createLinearGradient(r,i,s,o),f=0,l=t.length;l>f;f++)u.addColorStop(n[f],t[f]);return this._strokeInstructions=[new e(this._setProp,["strokeStyle",u],!1)],this},r.beginRadialGradientStroke=function(t,n,r,i,s,o,u,f){this._active&&this._newPath();for(var l=this._ctx.createRadialGradient(r,i,s,o,u,f),c=0,h=t.length;h>c;c++)l.addColorStop(n[c],t[c]);return this._strokeInstructions=[new e(this._setProp,["strokeStyle",l],!1)],this},r.beginBitmapStroke=function(t,n){this._active&&this._newPath(),n=n||"";var r=this._ctx.createPattern(t,n);return this._strokeInstructions=[new e(this._setProp,["strokeStyle",r],!1)],this},r.endStroke=function(){return this.beginStroke(),this},r.curveTo=r.quadraticCurveTo,r.drawRect=r.rect,r.drawRoundRect=function(e,t,n,r,i){return this.drawRoundRectComplex(e,t,n,r,i,i,i,i),this},r.drawRoundRectComplex=function(t,n,r,i,s,o,u,f){var l=(i>r?r:i)/2,c=0,h=0,p=0,d=0;0>s&&(s*=c=-1),s>l&&(s=l),0>o&&(o*=h=-1),o>l&&(o=l),0>u&&(u*=p=-1),u>l&&(u=l),0>f&&(f*=d=-1),f>l&&(f=l),this._dirty=this._active=!0;var v=this._ctx.arcTo,m=this._ctx.lineTo;return this._activeInstructions.push(new e(this._ctx.moveTo,[t+r-o,n]),new e(v,[t+r+o*h,n-o*h,t+r,n+o,o]),new e(m,[t+r,n+i-u]),new e(v,[t+r+u*p,n+i+u*p,t+r-u,n+i,u]),new e(m,[t+f,n+i]),new e(v,[t-f*d,n+i+f*d,t,n+i-f,f]),new e(m,[t,n+s]),new e(v,[t-s*c,n-s*c,t+s,n,s]),new e(this._ctx.closePath)),this},r.drawCircle=function(e,t,n){return this.arc(e,t,n,0,2*Math.PI),this},r.drawEllipse=function(t,n,r,i){this._dirty=this._active=!0;var s=.5522848,o=r/2*s,u=i/2*s,f=t+r,l=n+i,c=t+r/2,h=n+i/2;return this._activeInstructions.push(new e(this._ctx.moveTo,[t,h]),new e(this._ctx.bezierCurveTo,[t,h-u,c-o,n,c,n]),new e(this._ctx.bezierCurveTo,[c+o,n,f,h-u,f,h]),new e(this._ctx.bezierCurveTo,[f,h+u,c+o,l,c,l]),new e(this._ctx.bezierCurveTo,[c-o,l,t,h+u,t,h])),this},r.inject=function(t,n){return this._dirty=this._active=!0,this._activeInstructions.push(new e(t,[n])),this},r.drawPolyStar=function(t,n,r,i,s,o){this._dirty=this._active=!0,null==s&&(s=0),s=1-s,null==o?o=0:o/=180/Math.PI;var u=Math.PI/i;this._activeInstructions.push(new e(this._ctx.moveTo,[t+Math.cos(o)*r,n+Math.sin(o)*r]));for(var f=0;i>f;f++)o+=u,1!=s&&this._activeInstructions.push(new e(this._ctx.lineTo,[t+Math.cos(o)*r*s,n+Math.sin(o)*r*s])),o+=u,this._activeInstructions.push(new e(this._ctx.lineTo,[t+Math.cos(o)*r,n+Math.sin(o)*r]));return this},r.decodePath=function(e){for(var t=[this.moveTo,this.lineTo,this.quadraticCurveTo,this.bezierCurveTo,this.closePath],r=[2,2,4,6,0],i=0,s=e.length,o=[],u=0,a=0,f=n.BASE_64;s>i;){var l=e.charAt(i),c=f[l],h=c>>3,p=t[h];if(!p||3&c)throw"bad path data (@"+i+"): "+l;var d=r[h];h||(u=a=0),o.length=0,i++;for(var v=(1&c>>2)+2,m=0;d>m;m++){var g=f[e.charAt(i)],y=g>>5?-1:1;g=(31&g)<<6|f[e.charAt(i+1)],3==v&&(g=g<<6|f[e.charAt(i+2)]),g=y*g/10,m%2?u=g+=u:a=g+=a,o[m]=g,i+=v}p.apply(this,o)}return this},r.clone=function(){var e=new n;return e._instructions=this._instructions.slice(),e._activeInstructions=this._activeInstructions.slice(),e._oldInstructions=this._oldInstructions.slice(),this._fillInstructions&&(e._fillInstructions=this._fillInstructions.slice()),this._strokeInstructions&&(e._strokeInstructions=this._strokeInstructions.slice()),this._strokeStyleInstructions&&(e._strokeStyleInstructions=this._strokeStyleInstructions.slice()),e._active=this._active,e._dirty=this._dirty,e._fillMatrix=this._fillMatrix,e._strokeIgnoreScale=this._strokeIgnoreScale,e},r.toString=function(){return"[Graphics]"},r.mt=r.moveTo,r.lt=r.lineTo,r.at=r.arcTo,r.bt=r.bezierCurveTo,r.qt=r.quadraticCurveTo,r.a=r.arc,r.r=r.rect,r.cp=r.closePath,r.c=r.clear,r.f=r.beginFill,r.lf=r.beginLinearGradientFill,r.rf=r.beginRadialGradientFill,r.bf=r.beginBitmapFill,r.ef=r.endFill,r.ss=r.setStrokeStyle,r.s=r.beginStroke,r.ls=r.beginLinearGradientStroke,r.rs=r.beginRadialGradientStroke,r.bs=r.beginBitmapStroke,r.es=r.endStroke,r.dr=r.drawRect,r.rr=r.drawRoundRect,r.rc=r.drawRoundRectComplex,r.dc=r.drawCircle,r.de=r.drawEllipse,r.dp=r.drawPolyStar,r.p=r.decodePath,r._updateInstructions=function(){this._instructions=this._oldInstructions.slice(),this._instructions.push(n.beginCmd),this._appendInstructions(this._fillInstructions),this._appendInstructions(this._strokeInstructions),this._appendInstructions(this._strokeInstructions&&this._strokeStyleInstructions),this._appendInstructions(this._activeInstructions),this._fillInstructions&&this._appendDraw(n.fillCmd,this._fillMatrix),this._strokeInstructions&&this._appendDraw(n.strokeCmd,this._strokeIgnoreScale&&[1,0,0,1,0,0])},r._appendInstructions=function(e){e&&this._instructions.push.apply(this._instructions,e)},r._appendDraw=function(t,n){n?this._instructions.push(new e(this._ctx.save,[],!1),new e(this._ctx.transform,n,!1),t,new e(this._ctx.restore,[],!1)):this._instructions.push(t)},r._newPath=function(){this._dirty&&this._updateInstructions(),this._oldInstructions=this._instructions,this._activeInstructions=[],this._active=this._dirty=!1},r._setProp=function(e,t){this[e]=t},t.Graphics=n}(),!function(){var e=function(){this.initialize()},n=e.prototype=new t.EventDispatcher;e._MOUSE_EVENTS=["click","dblclick","mousedown","mouseout","mouseover","pressmove","pressup","rollout","rollover"],e.suppressCrossDomainErrors=!1;var r=t.createCanvas?t.createCanvas():document.createElement("canvas");r.getContext&&(e._hitTestCanvas=r,e._hitTestContext=r.getContext("2d"),r.width=r.height=1),e._nextCacheID=1,n.alpha=1,n.cacheCanvas=null,n.id=-1,n.mouseEnabled=!0,n.tickEnabled=!0,n.name=null,n.parent=null,n.regX=0,n.regY=0,n.rotation=0,n.scaleX=1,n.scaleY=1,n.skewX=0,n.skewY=0,n.shadow=null,n.visible=!0,n.x=0,n.y=0,n.compositeOperation=null,n.snapToPixel=!1,n.filters=null,n.cacheID=0,n.mask=null,n.hitArea=null,n.cursor=null,n._cacheOffsetX=0,n._cacheOffsetY=0,n._cacheScale=1,n._cacheDataURLID=0,n._cacheDataURL=null,n._matrix=null,n._rectangle=null,n._bounds=null,n.initialize=function(){this.id=t.UID.get(),this._matrix=new t.Matrix2D,this._rectangle=new t.Rectangle},n.isVisible=function(){return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY)},n.draw=function(e,t){var n=this.cacheCanvas;if(t||!n)return!1;var r,i=this._cacheScale,s=this._cacheOffsetX,o=this._cacheOffsetY;return(r=this._applyFilterBounds(s,o,0,0))&&(s=r.x,o=r.y),e.drawImage(n,s,o,n.width/i,n.height/i),!0},n.updateContext=function(e){var n,r=this.mask,i=this;r&&r.graphics&&!r.graphics.isEmpty()&&(n=r.getMatrix(r._matrix),e.transform(n.a,n.b,n.c,n.d,n.tx,n.ty),r.graphics.drawAsPath(e),e.clip(),n.invert(),e.transform(n.a,n.b,n.c,n.d,n.tx,n.ty)),n=i._matrix.identity().appendTransform(i.x,i.y,i.scaleX,i.scaleY,i.rotation,i.skewX,i.skewY,i.regX,i.regY),t.Stage._snapToPixelEnabled&&i.snapToPixel?e.transform(n.a,n.b,n.c,n.d,0|n.tx+.5,0|n.ty+.5):e.transform(n.a,n.b,n.c,n.d,n.tx,n.ty),e.globalAlpha*=i.alpha,i.compositeOperation&&(e.globalCompositeOperation=i.compositeOperation),i.shadow&&this._applyShadow(e,i.shadow)},n.cache=function(e,n,r,i,s){s=s||1,this.cacheCanvas||(this.cacheCanvas=t.createCanvas?t.createCanvas():document.createElement("canvas")),this._cacheWidth=r,this._cacheHeight=i,this._cacheOffsetX=e,this._cacheOffsetY=n,this._cacheScale=s,this.updateCache()},n.updateCache=function(t){var n,r=this.cacheCanvas,i=this._cacheScale,s=this._cacheOffsetX*i,o=this._cacheOffsetY*i,u=this._cacheWidth,f=this._cacheHeight;if(!r)throw"cache() must be called before updateCache()";var l=r.getContext("2d");(n=this._applyFilterBounds(s,o,u,f))&&(s=n.x,o=n.y,u=n.width,f=n.height),u=Math.ceil(u*i),f=Math.ceil(f*i),u!=r.width||f!=r.height?(r.width=u,r.height=f):t||l.clearRect(0,0,u+1,f+1),l.save(),l.globalCompositeOperation=t,l.setTransform(i,0,0,i,-s,-o),this.draw(l,!0),this._applyFilters(),l.restore(),this.cacheID=e._nextCacheID++},n.uncache=function(){this._cacheDataURL=this.cacheCanvas=null,this.cacheID=this._cacheOffsetX=this._cacheOffsetY=0,this._cacheScale=1},n.getCacheDataURL=function(){return this.cacheCanvas?(this.cacheID!=this._cacheDataURLID&&(this._cacheDataURL=this.cacheCanvas.toDataURL()),this._cacheDataURL):null},n.getStage=function(){for(var e=this;e.parent;)e=e.parent;return e instanceof t.Stage?e:null},n.localToGlobal=function(e,n){var r=this.getConcatenatedMatrix(this._matrix);return null==r?null:(r.append(1,0,0,1,e,n),new t.Point(r.tx,r.ty))},n.globalToLocal=function(e,n){var r=this.getConcatenatedMatrix(this._matrix);return null==r?null:(r.invert(),r.append(1,0,0,1,e,n),new t.Point(r.tx,r.ty))},n.localToLocal=function(e,t,n){var r=this.localToGlobal(e,t);return n.globalToLocal(r.x,r.y)},n.setTransform=function(e,t,n,r,i,s,o,u,a){return this.x=e||0,this.y=t||0,this.scaleX=null==n?1:n,this.scaleY=null==r?1:r,this.rotation=i||0,this.skewX=s||0,this.skewY=o||0,this.regX=u||0,this.regY=a||0,this},n.getMatrix=function(e){var n=this;return(e?e.identity():new t.Matrix2D).appendTransform(n.x,n.y,n.scaleX,n.scaleY,n.rotation,n.skewX,n.skewY,n.regX,n.regY).appendProperties(n.alpha,n.shadow,n.compositeOperation)},n.getConcatenatedMatrix=function(e){e?e.identity():e=new t.Matrix2D;for(var n=this;null!=n;)e.prependTransform(n.x,n.y,n.scaleX,n.scaleY,n.rotation,n.skewX,n.skewY,n.regX,n.regY).prependProperties(n.alpha,n.shadow,n.compositeOperation),n=n.parent;return e},n.hitTest=function(t,n){var r=e._hitTestContext;r.setTransform(1,0,0,1,-t,-n),this.draw(r);var i=this._testHit(r);return r.setTransform(1,0,0,1,0,0),r.clearRect(0,0,2,2),i},n.set=function(e){for(var t in e)this[t]=e[t];return this},n.getBounds=function(){if(this._bounds)return this._rectangle.copy(this._bounds);var e=this.cacheCanvas;if(e){var t=this._cacheScale;return this._rectangle.initialize(this._cacheOffsetX,this._cacheOffsetY,e.width/t,e.height/t)}return null},n.getTransformedBounds=function(){return this._getBounds()},n.setBounds=function(e,n,r,i){null==e&&(this._bounds=e),this._bounds=(this._bounds||new t.Rectangle).initialize(e,n,r,i)},n.clone=function(){var t=new e;return this.cloneProps(t),t},n.toString=function(){return"[DisplayObject (name="+this.name+")]"},n.cloneProps=function(e){e.alpha=this.alpha,e.name=this.name,e.regX=this.regX,e.regY=this.regY,e.rotation=this.rotation,e.scaleX=this.scaleX,e.scaleY=this.scaleY,e.shadow=this.shadow,e.skewX=this.skewX,e.skewY=this.skewY,e.visible=this.visible,e.x=this.x,e.y=this.y,e._bounds=this._bounds,e.mouseEnabled=this.mouseEnabled,e.compositeOperation=this.compositeOperation},n._applyShadow=function(e,t){t=t||Shadow.identity,e.shadowColor=t.color,e.shadowOffsetX=t.offsetX,e.shadowOffsetY=t.offsetY,e.shadowBlur=t.blur},n._tick=function(e){var n=this._listeners;if(n&&n.tick){var r=new t.Event("tick");r.params=e,this._dispatchEvent(r,this,2)}},n._testHit=function(t){try{var n=t.getImageData(0,0,1,1).data[3]>1}catch(r){if(!e.suppressCrossDomainErrors)throw"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images."}return n},n._applyFilters=function(){if(this.filters&&0!=this.filters.length&&this.cacheCanvas)for(var e=this.filters.length,t=this.cacheCanvas.getContext("2d"),n=this.cacheCanvas.width,r=this.cacheCanvas.height,i=0;e>i;i++)this.filters[i].applyFilter(t,0,0,n,r)},n._applyFilterBounds=function(e,t,n,r){var i,s,o=this.filters;if(!o||!(s=o.length))return null;for(var u=0;s>u;u++){var a=this.filters[u],f=a.getBounds&&a.getBounds();f&&(i||(i=this._rectangle.initialize(e,t,n,r)),i.x+=f.x,i.y+=f.y,i.width+=f.width,i.height+=f.height)}return i},n._getBounds=function(e,t){return this._transformBounds(this.getBounds(),e,t)},n._transformBounds=function(e,t,n){if(!e)return e;var r=e.x,i=e.y,s=e.width,o=e.height,u=n?this._matrix.identity():this.getMatrix(this._matrix);(r||i)&&u.appendTransform(0,0,1,1,0,0,0,-r,-i),t&&u.prependMatrix(t);var a=s*u.a,f=s*u.b,l=o*u.c,c=o*u.d,h=u.tx,p=u.ty,d=h,v=h,m=p,g=p;return(r=a+h)<d?d=r:r>v&&(v=r),(r=a+l+h)<d?d=r:r>v&&(v=r),(r=l+h)<d?d=r:r>v&&(v=r),(i=f+p)<m?m=i:i>g&&(g=i),(i=f+c+p)<m?m=i:i>g&&(g=i),(i=c+p)<m?m=i:i>g&&(g=i),e.initialize(d,m,v-d,g-m)},n._hasMouseEventListener=function(){for(var t=e._MOUSE_EVENTS,n=0,r=t.length;r>n;n++)if(this.hasEventListener(t[n]))return!0;return!!this.cursor},t.DisplayObject=e}(),!function(){var e=function(){this.initialize()},n=e.prototype=new t.DisplayObject;n.children=null,n.mouseChildren=!0,n.tickChildren=!0,n.DisplayObject_initialize=n.initialize,n.initialize=function(){this.DisplayObject_initialize(),this.children=[]},n.isVisible=function(){var e=this.cacheCanvas||this.children.length;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&e)},n.DisplayObject_draw=n.draw,n.draw=function(e,t){if(this.DisplayObject_draw(e,t))return!0;for(var n=this.children.slice(0),r=0,i=n.length;i>r;r++){var s=n[r];s.isVisible()&&(e.save(),s.updateContext(e),s.draw(e),e.restore())}return!0},n.addChild=function(e){if(null==e)return e;var t=arguments.length;if(t>1){for(var n=0;t>n;n++)this.addChild(arguments[n]);return arguments[t-1]}return e.parent&&e.parent.removeChild(e),e.parent=this,this.children.push(e),e},n.addChildAt=function(e,t){var n=arguments.length,r=arguments[n-1];if(0>r||r>this.children.length)return arguments[n-2];if(n>2){for(var i=0;n-1>i;i++)this.addChildAt(arguments[i],r+i);return arguments[n-2]}return e.parent&&e.parent.removeChild(e),e.parent=this,this.children.splice(t,0,e),e},n.removeChild=function(e){var n=arguments.length;if(n>1){for(var r=!0,i=0;n>i;i++)r=r&&this.removeChild(arguments[i]);return r}return this.removeChildAt(t.indexOf(this.children,e))},n.removeChildAt=function(e){var t=arguments.length;if(t>1){for(var n=[],r=0;t>r;r++)n[r]=arguments[r];n.sort(function(e,t){return t-e});for(var i=!0,r=0;t>r;r++)i=i&&this.removeChildAt(n[r]);return i}if(0>e||e>this.children.length-1)return!1;var s=this.children[e];return s&&(s.parent=null),this.children.splice(e,1),!0},n.removeAllChildren=function(){for(var e=this.children;e.length;)e.pop().parent=null},n.getChildAt=function(e){return this.children[e]},n.getChildByName=function(e){for(var t=this.children,n=0,r=t.length;r>n;n++)if(t[n].name==e)return t[n];return null},n.sortChildren=function(e){this.children.sort(e)},n.getChildIndex=function(e){return t.indexOf(this.children,e)},n.getNumChildren=function(){return this.children.length},n.swapChildrenAt=function(e,t){var n=this.children,r=n[e],i=n[t];r&&i&&(n[e]=i,n[t]=r)},n.swapChildren=function(e,t){for(var n,r,i=this.children,s=0,o=i.length;o>s&&(i[s]==e&&(n=s),i[s]==t&&(r=s),null==n||null==r);s++);s!=o&&(i[n]=t,i[r]=e)},n.setChildIndex=function(e,t){var n=this.children,r=n.length;if(!(e.parent!=this||0>t||t>=r)){for(var i=0;r>i&&n[i]!=e;i++);i!=r&&i!=t&&(n.splice(i,1),n.splice(t,0,e))}},n.contains=function(e){for(;e;){if(e==this)return!0;e=e.parent}return!1},n.hitTest=function(e,t){return null!=this.getObjectUnderPoint(e,t)},n.getObjectsUnderPoint=function(e,t){var n=[],r=this.localToGlobal(e,t);return this._getObjectsUnderPoint(r.x,r.y,n),n},n.getObjectUnderPoint=function(e,t){var n=this.localToGlobal(e,t);return this._getObjectsUnderPoint(n.x,n.y)},n.DisplayObject_getBounds=n.getBounds,n.getBounds=function(){return this._getBounds(null,!0)},n.getTransformedBounds=function(){return this._getBounds()},n.clone=function(t){var n=new e;if(this.cloneProps(n),t)for(var r=n.children=[],i=0,s=this.children.length;s>i;i++){var o=this.children[i].clone(t);o.parent=n,r.push(o)}return n},n.toString=function(){return"[Container (name="+this.name+")]"},n.DisplayObject__tick=n._tick,n._tick=function(e){if(this.tickChildren)for(var t=this.children.length-1;t>=0;t--){var n=this.children[t];n.tickEnabled&&n._tick&&n._tick(e)}this.DisplayObject__tick(e)},n._getObjectsUnderPoint=function(n,r,i,s,o){var u=t.DisplayObject._hitTestContext,f=this._matrix;o=o||s&&this._hasMouseEventListener();for(var l=this.children,c=l.length,h=c-1;h>=0;h--){var p=l[h],d=p.hitArea;if(p.visible&&(d||p.isVisible())&&(!s||p.mouseEnabled))if(!d&&p instanceof e){var v=p._getObjectsUnderPoint(n,r,i,s,o);if(!i&&v)return s&&!this.mouseChildren?this:v}else{if(!o&&!p._hasMouseEventListener())continue;if(p.getConcatenatedMatrix(f),d&&(f.appendTransform(d.x,d.y,d.scaleX,d.scaleY,d.rotation,d.skewX,d.skewY,d.regX,d.regY),f.alpha=d.alpha),u.globalAlpha=f.alpha,u.setTransform(f.a,f.b,f.c,f.d,f.tx-n,f.ty-r),(d||p).draw(u),!this._testHit(u))continue;if(u.setTransform(1,0,0,1,0,0),u.clearRect(0,0,2,2),!i)return s&&!this.mouseChildren?this:p;i.push(p)}}return null},n._getBounds=function(e,t){var n=this.DisplayObject_getBounds();if(n)return this._transformBounds(n,e,t);var r,i,s,o,u=t?this._matrix.identity():this.getMatrix(this._matrix);e&&u.prependMatrix(e);for(var a=this.children.length,f=0;a>f;f++){var l=this.children[f];if(l.visible&&(n=l._getBounds(u))){var c=n.x,h=n.y,p=c+n.width,d=h+n.height;(r>c||null==r)&&(r=c),(p>i||null==i)&&(i=p),(s>h||null==s)&&(s=h),(d>o||null==o)&&(o=d)}}return null==i?null:this._rectangle.initialize(r,s,i-r,o-s)},t.Container=e}(),!function(){var e=function(e){this.initialize(e)},n=e.prototype=new t.Container;e._snapToPixelEnabled=!1,n.autoClear=!0,n.canvas=null,n.mouseX=0,n.mouseY=0,n.snapToPixelEnabled=!1,n.mouseInBounds=!1,n.tickOnUpdate=!0,n.mouseMoveOutside=!1,n.nextStage=null,n._pointerData=null,n._pointerCount=0,n._primaryPointerID=null,n._mouseOverIntervalID=null,n.Container_initialize=n.initialize,n.initialize=function(e){this.Container_initialize(),this.canvas="string"==typeof e?document.getElementById(e):e,this._pointerData={},this.enableDOMEvents(!0)},n.update=function(){if(this.canvas){this.tickOnUpdate&&(this.dispatchEvent("tickstart"),this.tickEnabled&&this._tick(arguments.length?arguments:null),this.dispatchEvent("tickend")),this.dispatchEvent("drawstart"),e._snapToPixelEnabled=this.snapToPixelEnabled,this.autoClear&&this.clear();var t=this.canvas.getContext("2d");t.save(),this.updateContext(t),this.draw(t,!1),t.restore(),this.dispatchEvent("drawend")}},n.handleEvent=function(e){"tick"==e.type&&this.update(e)},n.clear=function(){if(this.canvas){var e=this.canvas.getContext("2d");e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)}},n.toDataURL=function(e,t){t||(t="image/png");var n,r=this.canvas.getContext("2d"),i=this.canvas.width,s=this.canvas.height;if(e){n=r.getImageData(0,0,i,s);var o=r.globalCompositeOperation;r.globalCompositeOperation="destination-over",r.fillStyle=e,r.fillRect(0,0,i,s)}var u=this.canvas.toDataURL(t);return e&&(r.clearRect(0,0,i+1,s+1),r.putImageData(n,0,0),r.globalCompositeOperation=o),u},n.enableMouseOver=function(e){if(this._mouseOverIntervalID&&(clearInterval(this._mouseOverIntervalID),this._mouseOverIntervalID=null,0==e&&this._testMouseOver(!0)),null==e)e=20;else if(0>=e)return;var t=this;this._mouseOverIntervalID=setInterval(function(){t._testMouseOver()},1e3/Math.min(50,e))},n.enableDOMEvents=function(e){null==e&&(e=!0);var t,n,r=this._eventListeners;if(!e&&r){for(t in r)n=r[t],n.t.removeEventListener(t,n.f,!1);this._eventListeners=null}else if(e&&!r&&this.canvas){var i=window.addEventListener?window:document,s=this;r=this._eventListeners={},r.mouseup={t:i,f:function(e){s._handleMouseUp(e)}},r.mousemove={t:i,f:function(e){s._handleMouseMove(e)}},r.dblclick={t:this.canvas,f:function(e){s._handleDoubleClick(e)}},r.mousedown={t:this.canvas,f:function(e){s._handleMouseDown(e)}};for(t in r)n=r[t],n.t.addEventListener(t,n.f,!1)}},n.clone=function(){var t=new e(null);return this.cloneProps(t),t},n.toString=function(){return"[Stage (name="+this.name+")]"},n._getElementRect=function(e){var t;try{t=e.getBoundingClientRect()}catch(n){t={top:e.offsetTop,left:e.offsetLeft,width:e.offsetWidth,height:e.offsetHeight}}var r=(window.pageXOffset||document.scrollLeft||0)-(document.clientLeft||document.body.clientLeft||0),i=(window.pageYOffset||document.scrollTop||0)-(document.clientTop||document.body.clientTop||0),s=window.getComputedStyle?getComputedStyle(e):e.currentStyle,o=parseInt(s.paddingLeft)+parseInt(s.borderLeftWidth),u=parseInt(s.paddingTop)+parseInt(s.borderTopWidth),a=parseInt(s.paddingRight)+parseInt(s.borderRightWidth),f=parseInt(s.paddingBottom)+parseInt(s.borderBottomWidth);return{left:t.left+r+o,right:t.right+r-a,top:t.top+i+u,bottom:t.bottom+i-f}},n._getPointerData=function(e){var t=this._pointerData[e];return t||(t=this._pointerData[e]={x:0,y:0},null==this._primaryPointerID&&(this._primaryPointerID=e),(null==this._primaryPointerID||-1==this._primaryPointerID)&&(this._primaryPointerID=e)),t},n._handleMouseMove=function(e){e||(e=window.event),this._handlePointerMove(-1,e,e.pageX,e.pageY)},n._handlePointerMove=function(e,n,r,i){if(this.canvas){var s=this._getPointerData(e),o=s.inBounds;if(this._updatePointerPosition(e,n,r,i),o||s.inBounds||this.mouseMoveOutside){-1==e&&s.inBounds==!o&&this._dispatchMouseEvent(this,o?"mouseleave":"mouseenter",!1,e,s,n),this._dispatchMouseEvent(this,"stagemousemove",!1,e,s,n),this._dispatchMouseEvent(s.target,"pressmove",!0,e,s,n);var u=s.event;u&&u.hasEventListener("mousemove")&&u.dispatchEvent(new t.MouseEvent("mousemove",!1,!1,s.x,s.y,n,e,e==this._primaryPointerID,s.rawX,s.rawY),s.target),this.nextStage&&this.nextStage._handlePointerMove(e,n,r,i)}}},n._updatePointerPosition=function(e,t,n,r){var i=this._getElementRect(this.canvas);n-=i.left,r-=i.top;var s=this.canvas.width,o=this.canvas.height;n/=(i.right-i.left)/s,r/=(i.bottom-i.top)/o;var u=this._getPointerData(e);(u.inBounds=n>=0&&r>=0&&s-1>=n&&o-1>=r)?(u.x=n,u.y=r):this.mouseMoveOutside&&(u.x=0>n?0:n>s-1?s-1:n,u.y=0>r?0:r>o-1?o-1:r),u.posEvtObj=t,u.rawX=n,u.rawY=r,e==this._primaryPointerID&&(this.mouseX=u.x,this.mouseY=u.y,this.mouseInBounds=u.inBounds)},n._handleMouseUp=function(e){this._handlePointerUp(-1,e,!1)},n._handlePointerUp=function(e,n,r){var i=this._getPointerData(e);this._dispatchMouseEvent(this,"stagemouseup",!1,e,i,n);var s=i.target;s&&(this._getObjectsUnderPoint(i.x,i.y,null,!0)==s&&this._dispatchMouseEvent(s,"click",!0,e,i,n),this._dispatchMouseEvent(s,"pressup",!0,e,i,n));var o=i.event;o&&o.hasEventListener("mouseup")&&o.dispatchEvent(new t.MouseEvent("mouseup",!1,!1,i.x,i.y,n,e,e==this._primaryPointerID,i.rawX,i.rawY),s),r?(e==this._primaryPointerID&&(this._primaryPointerID=null),delete this._pointerData[e]):i.event=i.target=null,this.nextStage&&this.nextStage._handlePointerUp(e,n,r)},n._handleMouseDown=function(e){this._handlePointerDown(-1,e,e.pageX,e.pageY)},n._handlePointerDown=function(e,t,n,r){null!=r&&this._updatePointerPosition(e,t,n,r);var i=this._getPointerData(e);this._dispatchMouseEvent(this,"stagemousedown",!1,e,i,t),i.target=this._getObjectsUnderPoint(i.x,i.y,null,!0),i.event=this._dispatchMouseEvent(i.target,"mousedown",!0,e,i,t),this.nextStage&&this.nextStage._handlePointerDown(e,t,n,r)},n._testMouseOver=function(e){if(-1==this._primaryPointerID&&(e||this.mouseX!=this._mouseOverX||this.mouseY!=this._mouseOverY||!this.mouseInBounds)){var t,n,r,i,s=this._getPointerData(-1),o=s.posEvtObj,u=-1,a="";(e||this.mouseInBounds&&o&&o.target==this.canvas)&&(t=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,!0),this._mouseOverX=this.mouseX,this._mouseOverY=this.mouseY);var f=this._mouseOverTarget||[],l=f[f.length-1],c=this._mouseOverTarget=[];for(n=t;n;)c.unshift(n),null!=n.cursor&&(a=n.cursor),n=n.parent;for(this.canvas.style.cursor=a,r=0,i=c.length;i>r&&c[r]==f[r];r++)u=r;for(l!=t&&this._dispatchMouseEvent(l,"mouseout",!0,-1,s,o),r=f.length-1;r>u;r--)this._dispatchMouseEvent(f[r],"rollout",!1,-1,s,o);for(r=c.length-1;r>u;r--)this._dispatchMouseEvent(c[r],"rollover",!1,-1,s,o);l!=t&&this._dispatchMouseEvent(t,"mouseover",!0,-1,s,o)}},n._handleDoubleClick=function(e){var t=this._getPointerData(-1),n=this._getObjectsUnderPoint(t.x,t.y,null,!0);this._dispatchMouseEvent(n,"dblclick",!0,-1,t,e),this.nextStage&&this.nextStage._handleDoubleClick(e)},n._dispatchMouseEvent=function(e,n,r,i,s,o){if(e&&(r||e.hasEventListener(n))){var u=new t.MouseEvent(n,r,!1,s.x,s.y,o,i,i==this._primaryPointerID,s.rawX,s.rawY);return e.dispatchEvent(u),u}},t.Stage=e}(),!function(){var e=function(e){this.initialize(e)},n=e.prototype=new t.DisplayObject;n.image=null,n.snapToPixel=!0,n.sourceRect=null,n.DisplayObject_initialize=n.initialize,n.initialize=function(e){this.DisplayObject_initialize(),"string"==typeof e?(this.image=document.createElement("img"),this.image.src=e):this.image=e},n.isVisible=function(){var e=this.cacheCanvas||this.image&&(this.image.complete||this.image.getContext||this.image.readyState>=2);return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&e)},n.DisplayObject_draw=n.draw,n.draw=function(e,t){if(this.DisplayObject_draw(e,t))return!0;var n=this.sourceRect;return n?e.drawImage(this.image,n.x,n.y,n.width,n.height,0,0,n.width,n.height):e.drawImage(this.image,0,0),!0},n.DisplayObject_getBounds=n.getBounds,n.getBounds=function(){var e=this.DisplayObject_getBounds();if(e)return e;var t=this.sourceRect||this.image,n=this.image&&(this.image.complete||this.image.getContext||this.image.readyState>=2);return n?this._rectangle.initialize(0,0,t.width,t.height):null},n.clone=function(){var t=new e(this.image);return this.sourceRect&&(t.sourceRect=this.sourceRect.clone()),this.cloneProps(t),t},n.toString=function(){return"[Bitmap (name="+this.name+")]"},t.Bitmap=e}(),!function(){var e=function(e,t){this.initialize(e,t)},n=e.prototype=new t.DisplayObject;n.currentFrame=0,n.currentAnimation=null,n.paused=!0,n.spriteSheet=null,n.snapToPixel=!0,n.offset=0,n.currentAnimationFrame=0,n.framerate=0,n._advanceCount=0,n._animation=null,n._currentFrame=null,n.DisplayObject_initialize=n.initialize,n.initialize=function(e,t){this.DisplayObject_initialize(),this.spriteSheet=e,t&&this.gotoAndPlay(t)},n.isVisible=function(){var e=this.cacheCanvas||this.spriteSheet.complete;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&e)},n.DisplayObject_draw=n.draw,n.draw=function(e,t){if(this.DisplayObject_draw(e,t))return!0;this._normalizeFrame();var n=this.spriteSheet.getFrame(0|this._currentFrame);if(!n)return!1;var r=n.rect;return e.drawImage(n.image,r.x,r.y,r.width,r.height,-n.regX,-n.regY,r.width,r.height),!0},n.play=function(){this.paused=!1},n.stop=function(){this.paused=!0},n.gotoAndPlay=function(e){this.paused=!1,this._goto(e)},n.gotoAndStop=function(e){this.paused=!0,this._goto(e)},n.advance=function(e){var t=this._animation&&this._animation.speed||1,n=this.framerate||this.spriteSheet.framerate,r=n&&null!=e?e/(1e3/n):1;this._animation?this.currentAnimationFrame+=r*t:this._currentFrame+=r*t,this._normalizeFrame()},n.DisplayObject_getBounds=n.getBounds,n.getBounds=function(){return this.DisplayObject_getBounds()||this.spriteSheet.getFrameBounds(this.currentFrame,this._rectangle)},n.clone=function(){var t=new e(this.spriteSheet);return this.cloneProps(t),t},n.toString=function(){return"[Sprite (name="+this.name+")]"},n.DisplayObject__tick=n._tick,n._tick=function(e){this.paused||this.advance(e&&e[0]&&e[0].delta),this.DisplayObject__tick(e)},n._normalizeFrame=function(){var e,t=this._animation,n=this.paused,r=this._currentFrame,i=this.currentAnimationFrame;if(t)if(e=t.frames.length,(0|i)>=e){var s=t.next;if(!this._dispatchAnimationEnd(t,r,n,s,e-1)){if(s)return this._goto(s,i-e);this.paused=!0,i=this.currentAnimationFrame=t.frames.length-1,this._currentFrame=t.frames[i]}}else this._currentFrame=t.frames[0|i];else if(e=this.spriteSheet.getNumFrames(),r>=e&&!this._dispatchAnimationEnd(t,r,n,e-1)&&(this._currentFrame-=e)>=e)return this._normalizeFrame();this.currentFrame=0|this._currentFrame},n._dispatchAnimationEnd=function(e,n,r,i,s){var o=e?e.name:null;if(this.hasEventListener("animationend")){var u=new t.Event("animationend");u.name=o,u.next=i,this.dispatchEvent(u)}var a=this._animation!=e||this._currentFrame!=n;return a||r||!this.paused||(this.currentAnimationFrame=s,a=!0),a},n.DisplayObject_cloneProps=n.cloneProps,n.cloneProps=function(e){this.DisplayObject_cloneProps(e),e.currentFrame=this.currentFrame,e._currentFrame=this._currentFrame,e.currentAnimation=this.currentAnimation,e.paused=this.paused,e._animation=this._animation,e.currentAnimationFrame=this.currentAnimationFrame,e.framerate=this.framerate},n._goto=function(e,t){if(isNaN(e)){var n=this.spriteSheet.getAnimation(e);n&&(this.currentAnimationFrame=t||0,this._animation=n,this.currentAnimation=e,this._normalizeFrame())}else this.currentAnimationFrame=0,this.currentAnimation=this._animation=null,this._currentFrame=e,this._normalizeFrame()},t.Sprite=e}(),!function(){var e="BitmapAnimation is deprecated in favour of Sprite. See VERSIONS file for info on changes.";if(!t.Sprite)throw e;(t.BitmapAnimation=function(t){console.log(e),this.initialize(t)}).prototype=new t.Sprite}(),!function(){var e=function(e){this.initialize(e)},n=e.prototype=new t.DisplayObject;n.graphics=null,n.DisplayObject_initialize=n.initialize,n.initialize=function(e){this.DisplayObject_initialize(),this.graphics=e?e:new t.Graphics},n.isVisible=function(){var e=this.cacheCanvas||this.graphics&&!this.graphics.isEmpty();return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&e)},n.DisplayObject_draw=n.draw,n.draw=function(e,t){return this.DisplayObject_draw(e,t)?!0:(this.graphics.draw(e),!0)},n.clone=function(t){var n=new e(t&&this.graphics?this.graphics.clone():this.graphics);return this.cloneProps(n),n},n.toString=function(){return"[Shape (name="+this.name+")]"},t.Shape=e}(),!function(){var e=function(e,t,n){this.initialize(e,t,n)},n=e.prototype=new t.DisplayObject,r=t.createCanvas?t.createCanvas():document.createElement("canvas");r.getContext&&(e._workingContext=r.getContext("2d"),r.width=r.height=1),e.H_OFFSETS={start:0,left:0,center:-0.5,end:-1,right:-1},e.V_OFFSETS={top:0,hanging:-0.01,middle:-0.4,alphabetic:-0.8,ideographic:-0.85,bottom:-1},n.text="",n.font=null,n.color=null,n.textAlign="left",n.textBaseline="top",n.maxWidth=null,n.outline=0,n.lineHeight=0,n.lineWidth=null,n.DisplayObject_initialize=n.initialize,n.initialize=function(e,t,n){this.DisplayObject_initialize(),this.text=e,this.font=t,this.color=n},n.isVisible=function(){var e=this.cacheCanvas||null!=this.text&&""!==this.text;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&e)},n.DisplayObject_draw=n.draw,n.draw=function(e,t){if(this.DisplayObject_draw(e,t))return!0;var n=this.color||"#000";return this.outline?(e.strokeStyle=n,e.lineWidth=1*this.outline):e.fillStyle=n,this._drawText(this._prepContext(e)),!0},n.getMeasuredWidth=function(){return this._prepContext(e._workingContext).measureText(this.text).width},n.getMeasuredLineHeight=function(){return 1.2*this._prepContext(e._workingContext).measureText("M").width},n.getMeasuredHeight=function(){return this._drawText(null,{}).height},n.DisplayObject_getBounds=n.getBounds,n.getBounds=function(){var t=this.DisplayObject_getBounds();if(t)return t;if(null==this.text||""==this.text)return null;var n=this._drawText(null,{}),r=this.maxWidth&&this.maxWidth<n.width?this.maxWidth:n.width,i=r*e.H_OFFSETS[this.textAlign||"left"],s=this.lineHeight||this.getMeasuredLineHeight(),o=s*e.V_OFFSETS[this.textBaseline||"top"];return this._rectangle.initialize(i,o,r,n.height)},n.clone=function(){var t=new e(this.text,this.font,this.color);return this.cloneProps(t),t},n.toString=function(){return"[Text (text="+(this.text.length>20?this.text.substr(0,17)+"...":this.text)+")]"},n.DisplayObject_cloneProps=n.cloneProps,n.cloneProps=function(e){this.DisplayObject_cloneProps(e),e.textAlign=this.textAlign,e.textBaseline=this.textBaseline,e.maxWidth=this.maxWidth,e.outline=this.outline,e.lineHeight=this.lineHeight,e.lineWidth=this.lineWidth},n._prepContext=function(e){return e.font=this.font,e.textAlign=this.textAlign||"left",e.textBaseline=this.textBaseline||"top",e},n._drawText=function(t,n){var r=!!t;r||(t=this._prepContext(e._workingContext));for(var i=this.lineHeight||this.getMeasuredLineHeight(),s=0,o=0,u=String(this.text).split(/(?:\r\n|\r|\n)/),f=0,l=u.length;l>f;f++){var c=u[f],h=null;if(null!=this.lineWidth&&(h=t.measureText(c).width)>this.lineWidth){var p=c.split(/(\s)/);c=p[0],h=t.measureText(c).width;for(var d=1,v=p.length;v>d;d+=2){var m=t.measureText(p[d]+p[d+1]).width;h+m>this.lineWidth?(r&&this._drawTextLine(t,c,o*i),h>s&&(s=h),c=p[d+1],h=t.measureText(c).width,o++):(c+=p[d]+p[d+1],h+=m)}}r&&this._drawTextLine(t,c,o*i),n&&null==h&&(h=t.measureText(c).width),h>s&&(s=h),o++}return n&&(n.count=o,n.width=s,n.height=o*i),n},n._drawTextLine=function(e,t,n){this.outline?e.strokeText(t,0,n,this.maxWidth||65535):e.fillText(t,0,n,this.maxWidth||65535)},t.Text=e}(),!function(){function e(e,t){this.initialize(e,t)}var n=e.prototype=new t.DisplayObject;n.text="",n.spriteSheet=null,n.lineHeight=0,n.letterSpacing=0,n.spaceWidth=0,n.DisplayObject_initialize=n.initialize,n.initialize=function(e,t){this.DisplayObject_initialize(),this.text=e,this.spriteSheet=t},n.DisplayObject_draw=n.draw,n.draw=function(e,t){return this.DisplayObject_draw(e,t)?!0:(this._drawText(e),void 0)},n.isVisible=function(){var e=this.cacheCanvas||this.spriteSheet&&this.spriteSheet.complete&&this.text;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&e)},n.getBounds=function(){var e=this._rectangle;return this._drawText(null,e),e.width?e:null},n._getFrame=function(e,t){var n,r=t.getAnimation(e);return r||(e!=(n=e.toUpperCase())||e!=(n=e.toLowerCase())||(n=null),n&&(r=t.getAnimation(n))),r&&t.getFrame(r.frames[0])},n._getLineHeight=function(e){var t=this._getFrame("1",e)||this._getFrame("T",e)||this._getFrame("L",e)||e.getFrame(0);return t?t.rect.height:1},n._getSpaceWidth=function(e){var t=this._getFrame("1",e)||this._getFrame("l",e)||this._getFrame("e",e)||this._getFrame("a",e)||e.getFrame(0);return t?t.rect.width:1},n._drawText=function(e,t){var n,r,i,s=0,o=0,u=this.spaceWidth,a=this.lineHeight,f=this.spriteSheet,l=!!this._getFrame(" ",f);l||0!=u||(u=this._getSpaceWidth(f)),0==a&&(a=this._getLineHeight(f));for(var c=0,h=0,p=this.text.length;p>h;h++){var d=this.text.charAt(h);if(l||" "!=d)if("\n"!=d&&"\r"!=d){var v=this._getFrame(d,f);if(v){var m=v.rect;i=v.regX,n=m.width,e&&e.drawImage(v.image,m.x,m.y,n,r=m.height,s-i,o-v.regY,n,r),s+=n+this.letterSpacing}}else"\r"==d&&"\n"==this.text.charAt(h+1)&&h++,s-i>c&&(c=s-i),s=0,o+=a;else s+=u}s-i>c&&(c=s-i),t&&(t.width=c-this.letterSpacing,t.height=o+a)},t.BitmapText=e}(),!function(){var e=function(){throw"SpriteSheetUtils cannot be instantiated"},n=t.createCanvas?t.createCanvas():document.createElement("canvas");n.getContext&&(e._workingCanvas=n,e._workingContext=n.getContext("2d"),n.width=n.height=1),e.addFlippedFrames=function(t,n,r,i){if(n||r||i){var s=0;n&&e._flip(t,++s,!0,!1),r&&e._flip(t,++s,!1,!0),i&&e._flip(t,++s,!0,!0)}},e.extractFrame=function(t,n){isNaN(n)&&(n=t.getAnimation(n).frames[0]);var r=t.getFrame(n);if(!r)return null;var i=r.rect,s=e._workingCanvas;s.width=i.width,s.height=i.height,e._workingContext.drawImage(r.image,i.x,i.y,i.width,i.height,0,0,i.width,i.height);var o=document.createElement("img");return o.src=s.toDataURL("image/png"),o},e.mergeAlpha=function(e,n,r){r||(r=t.createCanvas?t.createCanvas():document.createElement("canvas")),r.width=Math.max(n.width,e.width),r.height=Math.max(n.height,e.height);var i=r.getContext("2d");return i.save(),i.drawImage(e,0,0),i.globalCompositeOperation="destination-in",i.drawImage(n,0,0),i.restore(),r},e._flip=function(t,n,r,i){for(var s=t._images,o=e._workingCanvas,u=e._workingContext,f=s.length/n,l=0;f>l;l++){var c=s[l];c.__tmp=l,u.setTransform(1,0,0,1,0,0),u.clearRect(0,0,o.width+1,o.height+1),o.width=c.width,o.height=c.height,u.setTransform(r?-1:1,0,0,i?-1:1,r?c.width:0,i?c.height:0),u.drawImage(c,0,0);var h=document.createElement("img");h.src=o.toDataURL("image/png"),h.width=c.width,h.height=c.height,s.push(h)}var p=t._frames,d=p.length/n;for(l=0;d>l;l++){c=p[l];var v=c.rect.clone();h=s[c.image.__tmp+f*n];var m={image:h,rect:v,regX:c.regX,regY:c.regY};r&&(v.x=h.width-v.x-v.width,m.regX=v.width-c.regX),i&&(v.y=h.height-v.y-v.height,m.regY=v.height-c.regY),p.push(m)}var g="_"+(r?"h":"")+(i?"v":""),y=t._animations,b=t._data,w=y.length/n;for(l=0;w>l;l++){var E=y[l];c=b[E];var S={name:E+g,speed:c.speed,next:c.next,frames:[]};c.next&&(S.next+=g),p=c.frames;for(var x=0,T=p.length;T>x;x++)S.frames.push(p[x]+d*n);b[S.name]=S,y.push(S.name)}},t.SpriteSheetUtils=e}(),!function(){var e=function(){this.initialize()},n=e.prototype=new t.EventDispatcher;e.ERR_DIMENSIONS="frame dimensions exceed max spritesheet dimensions",e.ERR_RUNNING="a build is already running",n.maxWidth=2048,n.maxHeight=2048,n.spriteSheet=null,n.scale=1,n.padding=1,n.timeSlice=.3,n.progress=-1,n._frames=null,n._animations=null,n._data=null,n._nextFrameIndex=0,n._index=0,n._timerID=null,n._scale=1,n.initialize=function(){this._frames=[],this._animations={}},n.addFrame=function(t,n,r,i,s,o){if(this._data)throw e.ERR_RUNNING;var u=n||t.bounds||t.nominalBounds;return!u&&t.getBounds&&(u=t.getBounds()),u?(r=r||1,this._frames.push({source:t,sourceRect:u,scale:r,funct:i,params:s,scope:o,index:this._frames.length,height:u.height*r})-1):null},n.addAnimation=function(t,n,r,i){if(this._data)throw e.ERR_RUNNING;this._animations[t]={frames:n,next:r,frequency:i}},n.addMovieClip=function(t,n,r){if(this._data)throw e.ERR_RUNNING;var i=t.frameBounds,s=n||t.bounds||t.nominalBounds;if(!s&&t.getBounds&&(s=t.getBounds()),!s&&!i)return null;for(var o=this._frames.length,u=t.timeline.duration,f=0;u>f;f++){var l=i&&i[f]?i[f]:s;this.addFrame(t,l,r,function(e){var t=this.actionsEnabled;this.actionsEnabled=!1,this.gotoAndStop(e),this.actionsEnabled=t},[f],t)}var c=t.timeline._labels,h=[];for(var p in c)h.push({index:c[p],label:p});if(h.length){h.sort(function(e,t){return e.index-t.index});for(var f=0,d=h.length;d>f;f++){for(var v=h[f].label,m=o+h[f].index,g=o+(f==d-1?u:h[f+1].index),y=[],b=m;g>b;b++)y.push(b);this.addAnimation(v,y,!0)}}},n.build=function(){if(this._data)throw e.ERR_RUNNING;for(this._startBuild();this._drawNext(););return this._endBuild(),this.spriteSheet},n.buildAsync=function(t){if(this._data)throw e.ERR_RUNNING;this.timeSlice=t,this._startBuild();var n=this;this._timerID=setTimeout(function(){n._run()},50-50*Math.max(.01,Math.min(.99,this.timeSlice||.3)))},n.stopAsync=function(){clearTimeout(this._timerID),this._data=null},n.clone=function(){throw"SpriteSheetBuilder cannot be cloned."},n.toString=function(){return"[SpriteSheetBuilder]"},n._startBuild=function(){var n=this.padding||0;this.progress=0,this.spriteSheet=null,this._index=0,this._scale=this.scale;var r=[];this._data={images:[],frames:r,animations:this._animations};var i=this._frames.slice();if(i.sort(function(e,t){return e.height<=t.height?-1:1}),i[i.length-1].height+2*n>this.maxHeight)throw e.ERR_DIMENSIONS;for(var s=0,o=0,u=0;i.length;){var f=this._fillRow(i,s,u,r,n);if(f.w>o&&(o=f.w),s+=f.h,!f.h||!i.length){var l=t.createCanvas?t.createCanvas():document.createElement("canvas");l.width=this._getSize(o,this.maxWidth),l.height=this._getSize(s,this.maxHeight),this._data.images[u]=l,f.h||(o=s=0,u++)}}},n._getSize=function(e,t){for(var n=4;Math.pow(2,++n)<e;);return Math.min(t,Math.pow(2,n))},n._fillRow=function(n,r,i,s,o){var u=this.maxWidth,f=this.maxHeight;r+=o;for(var l=f-r,c=o,h=0,p=n.length-1;p>=0;p--){var d=n[p],v=this._scale*d.scale,m=d.sourceRect,g=d.source,y=Math.floor(v*m.x-o),b=Math.floor(v*m.y-o),w=Math.ceil(v*m.height+2*o),E=Math.ceil(v*m.width+2*o);if(E>u)throw e.ERR_DIMENSIONS;w>l||c+E>u||(d.img=i,d.rect=new t.Rectangle(c,r,E,w),h=h||w,n.splice(p,1),s[d.index]=[c,r,E,w,i,Math.round(-y+v*g.regX-o),Math.round(-b+v*g.regY-o)],c+=E)}return{w:c,h:h}},n._endBuild=function(){this.spriteSheet=new t.SpriteSheet(this._data),this._data=null,this.progress=1,this.dispatchEvent("complete")},n._run=function(){for(var e=50*Math.max(.01,Math.min(.99,this.timeSlice||.3)),n=(new Date).getTime()+e,r=!1;n>(new Date).getTime();)if(!this._drawNext()){r=!0;break}if(r)this._endBuild();else{var i=this;this._timerID=setTimeout(function(){i._run()},50-e)}var s=this.progress=this._index/this._frames.length;if(this.hasEventListener("progress")){var o=new t.Event("progress");o.progress=s,this.dispatchEvent(o)}},n._drawNext=function(){var e=this._frames[this._index],t=e.scale*this._scale,n=e.rect,r=e.sourceRect,i=this._data.images[e.img],s=i.getContext("2d");return e.funct&&e.funct.apply(e.scope,e.params),s.save(),s.beginPath(),s.rect(n.x,n.y,n.width,n.height),s.clip(),s.translate(Math.ceil(n.x-r.x*t),Math.ceil(n.y-r.y*t)),s.scale(t,t),e.source.draw(s),s.restore(),++this._index<this._frames.length},t.SpriteSheetBuilder=e}(),!function(){var e=function(e){this.initialize(e)},n=e.prototype=new t.DisplayObject;n.htmlElement=null,n._oldMtx=null,n._visible=!1,n.DisplayObject_initialize=n.initialize,n.initialize=function(e){"string"==typeof e&&(e=document.getElementById(e)),this.DisplayObject_initialize(),this.mouseEnabled=!1,this.htmlElement=e;var t=e.style;t.position="absolute",t.transformOrigin=t.WebkitTransformOrigin=t.msTransformOrigin=t.MozTransformOrigin=t.OTransformOrigin="0% 0%"},n.isVisible=function(){return null!=this.htmlElement},n.draw=function(){return this.visible&&(this._visible=!0),!0},n.cache=function(){},n.uncache=function(){},n.updateCache=function(){},n.hitTest=function(){},n.localToGlobal=function(){},n.globalToLocal=function(){},n.localToLocal=function(){},n.clone=function(){throw"DOMElement cannot be cloned."},n.toString=function(){return"[DOMElement (name="+this.name+")]"},n.DisplayObject__tick=n._tick,n._tick=function(e){var t=this.getStage();this._visible=!1,t&&t.on("drawend",this._handleDrawEnd,this,!0),this.DisplayObject__tick(e)},n._handleDrawEnd=function(){var e=this.htmlElement;if(e){var t=e.style,n=this._visible?"visible":"hidden";if(n!=t.visibility&&(t.visibility=n),this._visible){var r=this.getConcatenatedMatrix(this._matrix),i=this._oldMtx,s=1e4;if(i&&i.alpha==r.alpha||(t.opacity=""+(0|r.alpha*s)/s,i&&(i.alpha=r.alpha)),!i||i.tx!=r.tx||i.ty!=r.ty||i.a!=r.a||i.b!=r.b||i.c!=r.c||i.d!=r.d){var o="matrix("+(0|r.a*s)/s+","+(0|r.b*s)/s+","+(0|r.c*s)/s+","+(0|r.d*s)/s+","+(0|r.tx+.5);t.transform=t.WebkitTransform=t.OTransform=t.msTransform=o+","+(0|r.ty+.5)+")",t.MozTransform=o+"px,"+(0|r.ty+.5)+"px)",this._oldMtx=i?i.copy(r):r.clone()}}}},t.DOMElement=e}(),!function(){var e=function(){this.initialize()},n=e.prototype;n.initialize=function(){},n.getBounds=function(){return null},n.applyFilter=function(){},n.toString=function(){return"[Filter]"},n.clone=function(){return new e},t.Filter=e}(),!function(){var e=function(e,t,n){this.initialize(e,t,n)},n=e.prototype=new t.Filter;n.initialize=function(e,t,n){(isNaN(e)||0>e)&&(e=0),this.blurX=0|e,(isNaN(t)||0>t)&&(t=0),this.blurY=0|t,(isNaN(n)||1>n)&&(n=1),this.quality=0|n},n.blurX=0,n.blurY=0,n.quality=1,n.mul_table=[1,171,205,293,57,373,79,137,241,27,391,357,41,19,283,265,497,469,443,421,25,191,365,349,335,161,155,149,9,278,269,261,505,245,475,231,449,437,213,415,405,395,193,377,369,361,353,345,169,331,325,319,313,307,301,37,145,285,281,69,271,267,263,259,509,501,493,243,479,118,465,459,113,446,55,435,429,423,209,413,51,403,199,393,97,3,379,375,371,367,363,359,355,351,347,43,85,337,333,165,327,323,5,317,157,311,77,305,303,75,297,294,73,289,287,71,141,279,277,275,68,135,67,133,33,262,260,129,511,507,503,499,495,491,61,121,481,477,237,235,467,232,115,457,227,451,7,445,221,439,218,433,215,427,425,211,419,417,207,411,409,203,202,401,399,396,197,49,389,387,385,383,95,189,47,187,93,185,23,183,91,181,45,179,89,177,11,175,87,173,345,343,341,339,337,21,167,83,331,329,327,163,81,323,321,319,159,79,315,313,39,155,309,307,153,305,303,151,75,299,149,37,295,147,73,291,145,289,287,143,285,71,141,281,35,279,139,69,275,137,273,17,271,135,269,267,133,265,33,263,131,261,130,259,129,257,1],n.shg_table=[0,9,10,11,9,12,10,11,12,9,13,13,10,9,13,13,14,14,14,14,10,13,14,14,14,13,13,13,9,14,14,14,15,14,15,14,15,15,14,15,15,15,14,15,15,15,15,15,14,15,15,15,15,15,15,12,14,15,15,13,15,15,15,15,16,16,16,15,16,14,16,16,14,16,13,16,16,16,15,16,13,16,15,16,14,9,16,16,16,16,16,16,16,16,16,13,14,16,16,15,16,16,10,16,15,16,14,16,16,14,16,16,14,16,16,14,15,16,16,16,14,15,14,15,13,16,16,15,17,17,17,17,17,17,14,15,17,17,16,16,17,16,15,17,16,17,11,17,16,17,16,17,16,17,17,16,17,17,16,17,17,16,16,17,17,17,16,14,17,17,17,17,15,16,14,16,15,16,13,16,15,16,14,16,15,16,12,16,15,16,17,17,17,17,17,13,16,15,17,17,17,16,15,17,17,17,16,15,17,17,14,16,17,17,16,17,17,16,15,17,16,14,17,16,15,17,16,17,17,16,17,15,16,17,14,17,16,15,17,16,17,13,17,16,17,17,16,17,14,17,16,17,16,17,16,17,9],n.getBounds=function(){var e=.5*Math.pow(this.quality,.6);return new t.Rectangle(-this.blurX*e,-this.blurY*e,2*this.blurX*e,2*this.blurY*e)},n.applyFilter=function(e,t,n,r,i,s,o,u){s=s||e,null==o&&(o=t),null==u&&(u=n);try{var a=e.getImageData(t,n,r,i)}catch(f){return!1}var l=this.blurX/2;if(isNaN(l)||0>l)return!1;l|=0;var c=this.blurY/2;if(isNaN(c)||0>c)return!1;if(c|=0,0==l&&0==c)return!1;var h=this.quality;(isNaN(h)||1>h)&&(h=1),h|=0,h>3&&(h=3),1>h&&(h=1);var t,n,p,d,v,m,g,y,b,w,E,S,x,T,N,C=a.data,k=l+l+1,L=c+c+1,A=r-1,O=i-1,M=l+1,_=c+1,D={r:0,b:0,g:0,a:0,next:null},P=D;for(p=1;k>p;p++)P=P.next={r:0,b:0,g:0,a:0,next:null};P.next=D;var H={r:0,b:0,g:0,a:0,next:null},B=H;for(p=1;L>p;p++)B=B.next={r:0,b:0,g:0,a:0,next:null};B.next=H;for(var j=null;h-->0;){g=m=0;var F=this.mul_table[l],I=this.shg_table[l];for(n=i;--n>-1;){for(y=M*(S=C[m]),b=M*(x=C[m+1]),w=M*(T=C[m+2]),E=M*(N=C[m+3]),P=D,p=M;--p>-1;)P.r=S,P.g=x,P.b=T,P.a=N,P=P.next;for(p=1;M>p;p++)d=m+((p>A?A:p)<<2),y+=P.r=C[d],b+=P.g=C[d+1],w+=P.b=C[d+2],E+=P.a=C[d+3],P=P.next;for(j=D,t=0;r>t;t++)C[m++]=y*F>>>I,C[m++]=b*F>>>I,C[m++]=w*F>>>I,C[m++]=E*F>>>I,d=g+((d=t+l+1)<A?d:A)<<2,y-=j.r-(j.r=C[d]),b-=j.g-(j.g=C[d+1]),w-=j.b-(j.b=C[d+2]),E-=j.a-(j.a=C[d+3]),j=j.next;g+=r}for(F=this.mul_table[c],I=this.shg_table[c],t=0;r>t;t++){for(m=t<<2,y=_*(S=C[m]),b=_*(x=C[m+1]),w=_*(T=C[m+2]),E=_*(N=C[m+3]),B=H,p=0;_>p;p++)B.r=S,B.g=x,B.b=T,B.a=N,B=B.next;for(v=r,p=1;c>=p;p++)m=v+t<<2,y+=B.r=C[m],b+=B.g=C[m+1],w+=B.b=C[m+2],E+=B.a=C[m+3],B=B.next,O>p&&(v+=r);if(m=t,j=H,h>0)for(n=0;i>n;n++)d=m<<2,C[d+3]=N=E*F>>>I,N>0?(C[d]=y*F>>>I,C[d+1]=b*F>>>I,C[d+2]=w*F>>>I):C[d]=C[d+1]=C[d+2]=0,d=t+((d=n+_)<O?d:O)*r<<2,y-=j.r-(j.r=C[d]),b-=j.g-(j.g=C[d+1]),w-=j.b-(j.b=C[d+2]),E-=j.a-(j.a=C[d+3]),j=j.next,m+=r;else for(n=0;i>n;n++)d=m<<2,C[d+3]=N=E*F>>>I,N>0?(N=255/N,C[d]=(y*F>>>I)*N,C[d+1]=(b*F>>>I)*N,C[d+2]=(w*F>>>I)*N):C[d]=C[d+1]=C[d+2]=0,d=t+((d=n+_)<O?d:O)*r<<2,y-=j.r-(j.r=C[d]),b-=j.g-(j.g=C[d+1]),w-=j.b-(j.b=C[d+2]),E-=j.a-(j.a=C[d+3]),j=j.next,m+=r}}return s.putImageData(a,o,u),!0},n.clone=function(){return new e(this.blurX,this.blurY,this.quality)},n.toString=function(){return"[BlurFilter]"},t.BlurFilter=e}(),!function(){var e=function(e){this.initialize(e)},n=e.prototype=new t.Filter;n.initialize=function(e){this.alphaMap=e},n.alphaMap=null,n._alphaMap=null,n._mapData=null,n.applyFilter=function(e,t,n,r,i,s,o,u){if(!this.alphaMap)return!0;if(!this._prepAlphaMap())return!1;s=s||e,null==o&&(o=t),null==u&&(u=n);try{var a=e.getImageData(t,n,r,i)}catch(f){return!1}for(var l=a.data,c=this._mapData,h=l.length,p=0;h>p;p+=4)l[p+3]=c[p]||0;return s.putImageData(a,o,u),!0},n.clone=function(){return new e(this.alphaMap)},n.toString=function(){return"[AlphaMapFilter]"},n._prepAlphaMap=function(){if(!this.alphaMap)return!1;if(this.alphaMap==this._alphaMap&&this._mapData)return!0;this._mapData=null;var e,n=this._alphaMap=this.alphaMap,r=n;n instanceof HTMLCanvasElement?e=r.getContext("2d"):(r=t.createCanvas?t.createCanvas():document.createElement("canvas"),r.width=n.width,r.height=n.height,e=r.getContext("2d"),e.drawImage(n,0,0));try{var i=e.getImageData(0,0,n.width,n.height)}catch(s){return!1}return this._mapData=i.data,!0},t.AlphaMapFilter=e}(),!function(){var e=function(e){this.initialize(e)},n=e.prototype=new t.Filter;n.initialize=function(e){this.mask=e},n.mask=null,n.applyFilter=function(e,t,n,r,i,s,o,u){return this.mask?(s=s||e,null==o&&(o=t),null==u&&(u=n),s.save(),s.globalCompositeOperation="destination-in",s.drawImage(this.mask,o,u),s.restore(),!0):!0},n.clone=function(){return new e(this.mask)},n.toString=function(){return"[AlphaMaskFilter]"},t.AlphaMaskFilter=e}(),!function(){var e=function(e,t,n,r,i,s,o,u){this.initialize(e,t,n,r,i,s,o,u)},n=e.prototype=new t.Filter;n.redMultiplier=1,n.greenMultiplier=1,n.blueMultiplier=1,n.alphaMultiplier=1,n.redOffset=0,n.greenOffset=0,n.blueOffset=0,n.alphaOffset=0,n.initialize=function(e,t,n,r,i,s,o,u){this.redMultiplier=null!=e?e:1,this.greenMultiplier=null!=t?t:1,this.blueMultiplier=null!=n?n:1,this.alphaMultiplier=null!=r?r:1,this.redOffset=i||0,this.greenOffset=s||0,this.blueOffset=o||0,this.alphaOffset=u||0},n.applyFilter=function(e,t,n,r,i,s,o,u){s=s||e,null==o&&(o=t),null==u&&(u=n);try{var a=e.getImageData(t,n,r,i)}catch(f){return!1}for(var l=a.data,c=l.length,h=0;c>h;h+=4)l[h]=l[h]*this.redMultiplier+this.redOffset,l[h+1]=l[h+1]*this.greenMultiplier+this.greenOffset,l[h+2]=l[h+2]*this.blueMultiplier+this.blueOffset,l[h+3]=l[h+3]*this.alphaMultiplier+this.alphaOffset;return s.putImageData(a,o,u),!0},n.toString=function(){return"[ColorFilter]"},n.clone=function(){return new e(this.redMultiplier,this.greenMultiplier,this.blueMultiplier,this.alphaMultiplier,this.redOffset,this.greenOffset,this.blueOffset,this.alphaOffset)},t.ColorFilter=e}(),!function(){var e=function(e,t,n,r){this.initialize(e,t,n,r)},n=e.prototype;e.DELTA_INDEX=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],e.IDENTITY_MATRIX=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],e.LENGTH=e.IDENTITY_MATRIX.length,n.initialize=function(e,t,n,r){return this.reset(),this.adjustColor(e,t,n,r),this},n.reset=function(){return this.copyMatrix(e.IDENTITY_MATRIX)},n.adjustColor=function(e,t,n,r){return this.adjustHue(r),this.adjustContrast(t),this.adjustBrightness(e),this.adjustSaturation(n)},n.adjustBrightness=function(e){return 0==e||isNaN(e)?this:(e=this._cleanValue(e,255),this._multiplyMatrix([1,0,0,0,e,0,1,0,0,e,0,0,1,0,e,0,0,0,1,0,0,0,0,0,1]),this)},n.adjustContrast=function(t){if(0==t||isNaN(t))return this;t=this._cleanValue(t,100);var n;return 0>t?n=127+127*(t/100):(n=t%1,n=0==n?e.DELTA_INDEX[t]:e.DELTA_INDEX[t<<0]*(1-n)+e.DELTA_INDEX[(t<<0)+1]*n,n=127*n+127),this._multiplyMatrix([n/127,0,0,0,.5*(127-n),0,n/127,0,0,.5*(127-n),0,0,n/127,0,.5*(127-n),0,0,0,1,0,0,0,0,0,1]),this},n.adjustSaturation=function(e){if(0==e||isNaN(e))return this;e=this._cleanValue(e,100);var t=1+(e>0?3*e/100:e/100),n=.3086,r=.6094,i=.082;return this._multiplyMatrix([n*(1-t)+t,r*(1-t),i*(1-t),0,0,n*(1-t),r*(1-t)+t,i*(1-t),0,0,n*(1-t),r*(1-t),i*(1-t)+t,0,0,0,0,0,1,0,0,0,0,0,1]),this},n.adjustHue=function(e){if(0==e||isNaN(e))return this;e=this._cleanValue(e,180)/180*Math.PI;var t=Math.cos(e),n=Math.sin(e),r=.213,i=.715,s=.072;return this._multiplyMatrix([r+t*(1-r)+n*-r,i+t*-i+n*-i,s+t*-s+n*(1-s),0,0,r+t*-r+.143*n,i+t*(1-i)+.14*n,s+t*-s+n*-0.283,0,0,r+t*-r+n*-(1-r),i+t*-i+n*i,s+t*(1-s)+n*s,0,0,0,0,0,1,0,0,0,0,0,1]),this},n.concat=function(t){return t=this._fixMatrix(t),t.length!=e.LENGTH?this:(this._multiplyMatrix(t),this)},n.clone=function(){return(new e).copyMatrix(this)},n.toArray=function(){for(var t=[],n=0,r=e.LENGTH;r>n;n++)t[n]=this[n];return t},n.copyMatrix=function(t){for(var n=e.LENGTH,r=0;n>r;r++)this[r]=t[r];return this},n.toString=function(){return"[ColorMatrix]"},n._multiplyMatrix=function(e){for(var t=[],n=0;5>n;n++){for(var r=0;5>r;r++)t[r]=this[r+5*n];for(var r=0;5>r;r++){for(var i=0,s=0;5>s;s++)i+=e[r+5*s]*t[s];this[r+5*n]=i}}},n._cleanValue=function(e,t){return Math.min(t,Math.max(-t,e))},n._fixMatrix=function(t){return t instanceof e&&(t=t.toArray()),t.length<e.LENGTH?t=t.slice(0,t.length).concat(e.IDENTITY_MATRIX.slice(t.length,e.LENGTH)):t.length>e.LENGTH&&(t=t.slice(0,e.LENGTH)),t},t.ColorMatrix=e}(),!function(){var e=function(e){this.initialize(e)},n=e.prototype=new t.Filter;n.matrix=null,n.initialize=function(e){this.matrix=e},n.applyFilter=function(e,t,n,r,i,s,o,u){s=s||e,null==o&&(o=t),null==u&&(u=n);try{var a=e.getImageData(t,n,r,i)}catch(f){return!1}for(var l,c,h,p,d=a.data,v=d.length,m=this.matrix,g=m[0],y=m[1],b=m[2],w=m[3],E=m[4],S=m[5],x=m[6],T=m[7],N=m[8],C=m[9],k=m[10],L=m[11],A=m[12],O=m[13],M=m[14],_=m[15],D=m[16],P=m[17],H=m[18],B=m[19],j=0;v>j;j+=4)l=d[j],c=d[j+1],h=d[j+2],p=d[j+3],d[j]=l*g+c*y+h*b+p*w+E,d[j+1]=l*S+c*x+h*T+p*N+C,d[j+2]=l*k+c*L+h*A+p*O+M,d[j+3]=l*_+c*D+h*P+p*H+B;return s.putImageData(a,o,u),!0},n.toString=function(){return"[ColorMatrixFilter]"},n.clone=function(){return new e(this.matrix)},t.ColorMatrixFilter=e}(),!function(){var e=function(){throw"Touch cannot be instantiated"};e.isSupported=function(){return"ontouchstart"in window||window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>0||window.navigator.pointerEnabled&&window.navigator.maxTouchPoints>0},e.enable=function(t,n,r){return t&&t.canvas&&e.isSupported()?(t.__touch={pointers:{},multitouch:!n,preventDefault:!r,count:0},"ontouchstart"in window?e._IOS_enable(t):(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&e._IE_enable(t),!0):!1},e.disable=function(t){t&&("ontouchstart"in window?e._IOS_disable(t):(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&e._IE_disable(t))},e._IOS_enable=function(t){var n=t.canvas,r=t.__touch.f=function(n){e._IOS_handleEvent(t,n)};n.addEventListener("touchstart",r,!1),n.addEventListener("touchmove",r,!1),n.addEventListener("touchend",r,!1),n.addEventListener("touchcancel",r,!1)},e._IOS_disable=function(e){var t=e.canvas;if(t){var n=e.__touch.f;t.removeEventListener("touchstart",n,!1),t.removeEventListener("touchmove",n,!1),t.removeEventListener("touchend",n,!1),t.removeEventListener("touchcancel",n,!1)}},e._IOS_handleEvent=function(e,t){if(e){e.__touch.preventDefault&&t.preventDefault&&t.preventDefault();for(var n=t.changedTouches,r=t.type,i=0,s=n.length;s>i;i++){var o=n[i],u=o.identifier;o.target==e.canvas&&("touchstart"==r?this._handleStart(e,u,t,o.pageX,o.pageY):"touchmove"==r?this._handleMove(e,u,t,o.pageX,o.pageY):("touchend"==r||"touchcancel"==r)&&this._handleEnd(e,u,t))}}},e._IE_enable=function(t){var n=t.canvas,r=t.__touch.f=function(n){e._IE_handleEvent(t,n)};void 0===window.navigator.pointerEnabled?(n.addEventListener("MSPointerDown",r,!1),window.addEventListener("MSPointerMove",r,!1),window.addEventListener("MSPointerUp",r,!1),window.addEventListener("MSPointerCancel",r,!1),t.__touch.preventDefault&&(n.style.msTouchAction="none")):(n.addEventListener("pointerdown",r,!1),window.addEventListener("pointermove",r,!1),window.addEventListener("pointerup",r,!1),window.addEventListener("pointercancel",r,!1),t.__touch.preventDefault&&(n.style.touchAction="none")),t.__touch.activeIDs={}},e._IE_disable=function(e){var t=e.__touch.f;void 0===window.navigator.pointerEnabled?(window.removeEventListener("MSPointerMove",t,!1),window.removeEventListener("MSPointerUp",t,!1),window.removeEventListener("MSPointerCancel",t,!1),e.canvas&&e.canvas.removeEventListener("MSPointerDown",t,!1)):(window.removeEventListener("pointermove",t,!1),window.removeEventListener("pointerup",t,!1),window.removeEventListener("pointercancel",t,!1),e.canvas&&e.canvas.removeEventListener("pointerdown",t,!1))},e._IE_handleEvent=function(e,t){if(e){e.__touch.preventDefault&&t.preventDefault&&t.preventDefault();var n=t.type,r=t.pointerId,i=e.__touch.activeIDs;if("MSPointerDown"==n||"pointerdown"==n){if(t.srcElement!=e.canvas)return;i[r]=!0,this._handleStart(e,r,t,t.pageX,t.pageY)}else i[r]&&("MSPointerMove"==n||"pointermove"==n?this._handleMove(e,r,t,t.pageX,t.pageY):("MSPointerUp"==n||"MSPointerCancel"==n||"pointerup"==n||"pointercancel"==n)&&(delete i[r],this._handleEnd(e,r,t)))}},e._handleStart=function(e,t,n,r,i){var s=e.__touch;if(s.multitouch||!s.count){var o=s.pointers;o[t]||(o[t]=!0,s.count++,e._handlePointerDown(t,n,r,i))}},e._handleMove=function(e,t,n,r,i){e.__touch.pointers[t]&&e._handlePointerMove(t,n,r,i)},e._handleEnd=function(e,t,n){var r=e.__touch,i=r.pointers;i[t]&&(r.count--,e._handlePointerUp(t,n,!0),delete i[t])},t.Touch=e}(),!function(){var e=t.EaselJS=t.EaselJS||{}}(),e.render=t}),define("canvas/structure",["SCJ","canvas/render"],function(e,t){function r(){var e,t,n,r,i=arguments[0];return i.length===1?(e=t=n=i[0],r=1):i.length===2?(e=t=n=i[0],r=i[1]/255):(e=i[0],t=i[1],n=i[2],r=typeof i[3]=="number"?i[3]:1),[e,t,n,r]}var n=function(e,n){this.canvas=document.createElement("canvas"),this.canvas.width=e,this.canvas.height=n,this.stage=new t.Stage(this.canvas),this.TWO_PI=Math.PI*2,this.container=new t.Container,window.CTTTT=this.container,this.width=e,this.height=n,this.strokeStyle="black",this.currentAction="beginStroke",this.fillStyle="white",this.tickFn=null,this.stage.addChild(this.container),t.Ticker.addEventListener("tick",this.stage),this.graphicsArr=[]};n.prototype={image:function(e,n,r){var i=new t.Bitmap(e.canvas);i.x=n,i.y=r,this.stage.addChild(i),this.graphicsArr.push(e)},background:function(){var e=r(arguments),n=new t.Shape((new t.Graphics).beginFill("rgba("+e[0]+","+e[1]+","+e[2]+","+e[3]+")").rect(0,0,this.width,this.height));this.container.addChild(n)},createGraphics:function(e,t,r,i){var s=new n(e,t,r,i);return this.stage.addChild(s.container),arguments.length>2&&(s.container.x=arguments[2],s.container.y=arguments[3]),s},stroke:function(e,t,n,i){var s=r(arguments);this.strokeStyle="rgba("+s[0]+","+s[1]+","+s[2]+","+s[3]+")",this.currentAction="beginStroke"},point:function(e,n){var r=new t.Shape((new t.Graphics).beginFill(this.fillStyle).drawCircle(e,n,1));this.container.addChild(r)},line:function(e,n,r,i){var s=new t.Shape((new t.Graphics).beginStroke(this.strokeStyle).mt(e,n).lt(r,i).endStroke());this.container.addChild(s)},fill:function(e,t,n,i){var s=r(arguments);this.fillStyle="rgba("+s[0]+","+s[1]+","+s[2]+","+s[3]+")",this.currentAction="beginFill"},rect:function(e,n,r,i){var s=new t.Shape((new t.Graphics)[this.currentAction](this.currentAction=="beginFill"?this.fillStyle:this.strokeStyle).rect(e,n,r,i).endFill());this.container.addChild(s)},ellipse:function(e,n,r,i){var s=new t.Shape((new t.Graphics)[this.currentAction](this.currentAction=="beginFill"?this.fillStyle:this.strokeStyle).drawEllipse(e-r/2,n-i/2,r,i).endFill());this.container.addChild(s)},circle:function(e,n,r){var i=new t.Shape((new t.Graphics)[this.currentAction](this.currentAction=="beginFill"?this.fillStyle:this.strokeStyle).drawCircle(e,n,r));this.container.addChild(i)},frameRate:function(e){t.Ticker.setFPS(e)},noLoop:function(){t.Ticker.setPaused(!0)},loop:function(){t.Ticker.setPaused(!1)},nextTick:function(){this.tickFn&&this.tickFn()},tick:function(e){this.tickFn=e,this.tickFn();var n=this;t.Ticker.addEventListener("tick",function(t){n.mouseX=n.stage.mouseX,n.mouseY=n.stage.mouseY;if(!t.paused){for(var r=0,i=n.graphicsArr.length;r<i;r++){var s=n.graphicsArr[r];s.container.removeAllChildren()}n.container.removeAllChildren(),e()}})},mousePressed:function(e){this.stage.addEventListener("stagemousedown",function(){e()})},toInt:function(e){return Math.round(e)},random:function(e,t){return e+Math.random()*(t-e)},randomInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},sin:function(e){return Math.sin(e)},cos:function(e){return Math.cos(e)}},e.createGraphics=function(e,t,r){var i=new n(e,t);if(r){var s=document.querySelector(r);s.appendChild(i.canvas)}return i}}),require.config({baseUrl:"../../src/SCJ"}),require(["SCJ","canvas/structure"],function(e){var t=e.createGraphics(200,200,"#canvasCTT");t.background(127);for(var n=0;n<t.height;n+=20)t.fill(0),t.rect(0,n,t.width,10),t.fill(255),t.rect(n,0,10,t.height)}),define("main/widthheight",function(){});