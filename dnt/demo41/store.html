<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
     <title>SCJ Framework-Store</title>
    <link rel="shortcut icon" href="../img/dang.ico" type="image/x-icon" />
    <style>
        .code {
            background: silver;
            font-family: Verdana, Geneva, sans-serif;
            font-size: 16px;
            margin:0px;
            margin-top:1px;
            margin-bottom:1px;
        }



        h1 {
            background: none repeat scroll 0 0 darkSlateBlue;
            border-radius: 3px 3px 3px 3px;
            color: white;
            font-size: 18pt;
            font-weight: bold;
            letter-spacing: 1px;
           margin:0px;
            padding-left: 20px;
            height:40px;
            line-height:40px;
        }
    </style>
        <style>
        body {
            background: url(../img/topbg.png) repeat;
        }
    </style>
</head>
<body>
    <h1>使用方式</h1>
    <pre class="code"><span style="color:black;background:silver">require([</span><span style="color:#a31515;background:silver">"SCJ"</span><span style="color:black;background:silver">, </span><span style="color:#a31515;background:silver">"core/store"</span><span style="color:black;background:silver">], </span><span style="color:blue;background:silver">function </span><span style="color:black;background:silver">(SCJ) {
    
    </span><span style="color:blue;background:silver">var </span><span style="color:black;background:silver">store = SCJ.createStore();
    </span><span style="color:green;background:silver">//--------or--------
    //var store = SCJ.cs();

    // Store '当耐特' at 'name'
    </span><span style="color:black;background:silver">store.set(</span><span style="color:#a31515;background:silver">'name'</span><span style="color:black;background:silver">, </span><span style="color:#a31515;background:silver">'当耐特'</span><span style="color:black;background:silver">)

    </span><span style="color:green;background:silver">// Get 'name'
    </span><span style="color:black;background:silver">store.get(</span><span style="color:#a31515;background:silver">'name'</span><span style="color:black;background:silver">)

    </span><span style="color:green;background:silver">// Remove 'name'
    </span><span style="color:black;background:silver">store.remove(</span><span style="color:#a31515;background:silver">'name'</span><span style="color:black;background:silver">)

    </span><span style="color:green;background:silver">// Clear all keys
    </span><span style="color:black;background:silver">store.clear()

    </span><span style="color:green;background:silver">// Store an object
    </span><span style="color:black;background:silver">store.set(</span><span style="color:#a31515;background:silver">'SCJ'</span><span style="color:black;background:silver">, { author: </span><span style="color:#a31515;background:silver">'当耐特'</span><span style="color:black;background:silver">, purpose: </span><span style="color:#a31515;background:silver">'create everything' </span><span style="color:black;background:silver">})

    </span><span style="color:green;background:silver">// Get the stored object 
    </span><span style="color:blue;background:silver">var </span><span style="color:black;background:silver">scj = store.get(</span><span style="color:#a31515;background:silver">'SCJ'</span><span style="color:black;background:silver">)
    alert(</span><span style="color:#a31515;background:silver">"SCJ framework created by "</span><span style="color:black;background:silver">+scj.author+</span><span style="color:#a31515;background:silver">" provides many powerful module that allows developers to "</span><span style="color:black;background:silver">+scj.purpose+</span><span style="color:#a31515;background:silver">"."</span><span style="color:black;background:silver">);

    </span><span style="color:green;background:silver">// Get all stored values. output  true.
    </span><span style="color:black;background:silver">alert(store.getAll().SCJ.author == </span><span style="color:#a31515;background:silver">'当耐特' </span><span style="color:black;background:silver">) 
    
    </span><span style="color:green;background:silver">// Loop over all stored values
    </span><span style="color:black;background:silver">store.forEach(</span><span style="color:blue;background:silver">function </span><span style="color:black;background:silver">(val, key) {
        console.log(key, </span><span style="color:#a31515;background:silver">'=='</span><span style="color:black;background:silver">, val)
    })
   
})</span></pre>
    <h1>build注意事项</h1>
    <p>当存取JSON的时候，需用到JSON.stringify和JSON.parse，对于不支持这两个方法的浏览器需要引入json2.js</p>
    <p>SCJ做了依赖读取，浏览器不支持才会加载json2.js，见store.js代码：</p>
    <pre class="code"><span style="color:black;background:silver">define([</span><span style="color:#a31515;background:silver">"SCJ"</span><span style="color:black;background:silver">, </span><span style="color:blue;background:silver">this</span><span style="color:black;background:silver">.JSON ? </span><span style="color:#a31515;background:silver">"SCJ" </span><span style="color:black;background:silver">: </span><span style="color:#a31515;background:silver">"core/json2"</span><span style="color:black;background:silver">], </span><span style="color:blue;background:silver">function </span><span style="color:black;background:silver">(SCJ) {
    </span><span style="color:green;background:silver">//..
    //省略
    //..
</span><span style="color:black;background:silver">})</span></pre>
    <p>所以build.js中配置需把json2的path指向空，如下所示:</p>
    <pre class="code"><span style="color:black;background:silver">    paths: {
        </span><span style="color:#a31515;background:silver">"json2"</span><span style="color:black;background:silver">: </span><span style="color:#a31515;background:silver">'empty:'
    </span><span style="color:black;background:silver">}</span></pre>
</body>
</html>
